{"ast":null,"code":"import _defineProperty from \"D:\\\\actions\\\\st_frontend\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/defineProperty\";\nimport _classCallCheck from \"D:\\\\actions\\\\st_frontend\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"D:\\\\actions\\\\st_frontend\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"D:\\\\actions\\\\st_frontend\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"D:\\\\actions\\\\st_frontend\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"D:\\\\actions\\\\st_frontend\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/inherits\";\nimport _assertThisInitialized from \"D:\\\\actions\\\\st_frontend\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/assertThisInitialized\";\nvar _jsxFileName = \"D:\\\\actions\\\\st_frontend\\\\src\\\\pages\\\\Employee\\\\MyOffice\\\\index.js\";\nimport Model from '../../../model/model'; // LIBS \n\nimport moment from 'moment';\nimport React, { Component } from 'react';\nimport { connect } from 'react-redux';\nimport { BenGrid } from '../../../components/BenGrid2';\nimport MyForm from './Form';\nvar MODE = 'offices';\nvar MODE_NAME = 'Văn phòng làm việc';\n\nvar MyOffice =\n/*#__PURE__*/\nfunction (_Component) {\n  _inherits(MyOffice, _Component);\n\n  function MyOffice(props) {\n    var _this;\n\n    _classCallCheck(this, MyOffice);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(MyOffice).call(this, props));\n    _this._curInfo = {};\n    _this._isIniData = false;\n    _this.state = {\n      typeAction: '',\n      onAction: '',\n      status: '',\n      isOpenForm: false,\n      tab: 'office'\n    };\n    _this.grid = {\n      colums: [{\n        headerName: \"Tên \",\n        field: \"name\",\n        width: 300,\n        cellRenderer: function cellRenderer(params) {\n          return \"\\n                            <span> <i class=\\\"fa fa-shirtsinbulk mr-5\\\"></i> \".concat(params.value, \" </span>\\n                        \");\n        }\n      }, {\n        headerName: \"Số Nhân viên\",\n        field: \"total_user\",\n        width: 180\n      }, {\n        headerName: \"Tỉnh/Thành\",\n        field: \"city\",\n        width: 180\n      }, {\n        headerName: \"Ngày tạo\",\n        field: \"date_created\",\n        width: 140,\n        cellRenderer: function cellRenderer(params) {\n          var humanDate = moment(params.value).format('YYYY-MM-DD');\n          return \"\\n                            \".concat(humanDate, \"\\n                        \");\n        }\n      }],\n      rowData: []\n    };\n\n    _this._setup();\n\n    _this._doOpenModalUpdate = _this._doOpenModalUpdate.bind(_assertThisInitialized(_assertThisInitialized(_this)));\n    _this._doOpenModalPost = _this._doOpenModalPost.bind(_assertThisInitialized(_assertThisInitialized(_this)));\n    return _this;\n  }\n\n  _createClass(MyOffice, [{\n    key: \"_setup\",\n    value: function _setup() {\n      this.model = new Model(MODE, this.props.dispatch);\n    }\n  }, {\n    key: \"_doOpenModalUpdate\",\n    value: function _doOpenModalUpdate(data) {\n      this._curInfo = data;\n      this.setState({\n        isOpenForm: true,\n        typeAction: 'put'\n      });\n    }\n  }, {\n    key: \"_doOpenModalPost\",\n    value: function _doOpenModalPost() {\n      this.setState({\n        isOpenForm: true,\n        typeAction: 'post'\n      });\n    }\n  }, {\n    key: \"_onSubmitForm\",\n    value: function _onSubmitForm(res) {\n      if (res.name === 'success' || res.name === 'ok') {\n        this._curInfo = {};\n        this.setState({\n          isOpenForm: false,\n          typeAction: '',\n          receiptType: '',\n          status: res.name\n        });\n      }\n    }\n  }, {\n    key: \"componentWillReceiveProps\",\n    value: function componentWillReceiveProps(newProps) {\n      if (!this._isIniData) {\n        this.model.load();\n        this._isIniData = true;\n      }\n\n      this.grid.rowData = newProps[MODE]['list'] || []; // CONNECT REDUX STATE \n\n      this._whereStateChange(newProps[MODE]['state']);\n    }\n    /* WHERE*/\n\n  }, {\n    key: \"_whereStateChange\",\n    value: function _whereStateChange(newState) {\n      this.setState(Object.assign(this.state, newState));\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this2 = this;\n\n      return React.createElement(\"div\", {\n        hidden: this.state.tab === this.props.onTab ? false : true,\n        className: \"animated fadeIn\",\n        style: {\n          padding: 10\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 127\n        },\n        __self: this\n      }, React.createElement(MyForm, {\n        typeAction: this.state.typeAction,\n        width: \"36%\",\n        data: this._curInfo,\n        model: this.model,\n        isOpen: this.state.isOpenForm,\n        onToggle: function onToggle(isOpen) {\n          _this2.setState({\n            isOpenForm: isOpen\n          });\n        },\n        onSubmitForm: function onSubmitForm(res) {\n          _this2._onSubmitForm(res);\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 129\n        },\n        __self: this\n      }), React.createElement(BenGrid, {\n        height: \"77.5vh\",\n        gridID: \"id\",\n        onBtnEdit: this._doOpenModalUpdate,\n        onBtnAdd: this._doOpenModalPost,\n        rowSelection: \"single\",\n        formStatus: this.state.status,\n        isRightTool: true,\n        nextColums: this.grid.colums,\n        rowData: this.grid.rowData,\n        model: this.model,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 142\n        },\n        __self: this\n      }));\n    }\n  }]);\n\n  return MyOffice;\n}(Component);\n\nvar mapStateToProps = function mapStateToProps(state) {\n  return _defineProperty({}, MODE, state[MODE]);\n};\n\nexport default connect(mapStateToProps)(MyOffice);","map":{"version":3,"sources":["D:/actions/st_frontend/src/pages/Employee/MyOffice/index.js"],"names":["Model","moment","React","Component","connect","BenGrid","MyForm","MODE","MODE_NAME","MyOffice","props","_curInfo","_isIniData","state","typeAction","onAction","status","isOpenForm","tab","grid","colums","headerName","field","width","cellRenderer","params","value","humanDate","format","rowData","_setup","_doOpenModalUpdate","bind","_doOpenModalPost","model","dispatch","data","setState","res","name","receiptType","newProps","load","_whereStateChange","newState","Object","assign","onTab","padding","isOpen","_onSubmitForm","mapStateToProps"],"mappings":"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","sourcesContent":["\r\nimport Model from '../../../model/model';\r\n\r\n\r\n// LIBS \r\nimport moment from 'moment';\r\n\r\n\r\nimport React, { Component } from 'react';\r\nimport { connect } from 'react-redux';\r\n\r\n\r\nimport { BenGrid } from '../../../components/BenGrid2';\r\nimport MyForm from './Form'; \r\n\r\n \r\nconst MODE = 'offices';\r\nconst MODE_NAME = 'Văn phòng làm việc'; \r\n\r\n\r\nclass MyOffice extends Component {\r\n\r\n    _curInfo = {} ; \r\n    _isIniData = false ;\r\n\r\n    constructor(props){\r\n        super(props);\r\n\r\n        this.state = {\r\n            typeAction:'',\r\n            onAction:'',\r\n            status:'',\r\n\r\n            isOpenForm:false,\r\n\r\n            tab:'office'\r\n        }\r\n\r\n        this.grid = {\r\n            colums:[\r\n                { headerName: \"Tên \", field: \"name\",width:300,\r\n                    cellRenderer(params){\r\n                        return `\r\n                            <span> <i class=\"fa fa-shirtsinbulk mr-5\"></i> ${params.value} </span>\r\n                        `;\r\n                    }\r\n                },\r\n\r\n                { headerName:\"Số Nhân viên\", field:\"total_user\",width:180 },\r\n                { headerName:\"Tỉnh/Thành\", field:\"city\",width:180 },\r\n                \r\n                { headerName:\"Ngày tạo\", field:\"date_created\",width:140,\r\n\r\n                    cellRenderer(params){\r\n                        const humanDate = moment(params.value).format('YYYY-MM-DD')\r\n                        return `\r\n                            ${ humanDate }\r\n                        `\r\n                    }\r\n                }\r\n                \r\n            ],\r\n            rowData:[]\r\n        }\r\n\r\n        this._setup();\r\n\r\n        this._doOpenModalUpdate = this._doOpenModalUpdate.bind(this); \r\n        this._doOpenModalPost = this._doOpenModalPost.bind(this);\r\n\r\n\r\n    }   \r\n\r\n    _setup(){\r\n        this.model = new Model(MODE,this.props.dispatch);\r\n    }\r\n\r\n    _doOpenModalUpdate(data){\r\n\r\n        this._curInfo = data ; \r\n        this.setState({\r\n            isOpenForm:true,\r\n            typeAction:'put'\r\n        });\r\n    }\r\n    _doOpenModalPost(){\r\n        \r\n        this.setState({\r\n            isOpenForm:true,\r\n            typeAction:'post'\r\n        });\r\n    }\r\n    \r\n    _onSubmitForm(res){\r\n        if(res.name==='success' || res.name==='ok'){\r\n\r\n            this._curInfo = {}\r\n            \r\n            this.setState({\r\n                isOpenForm:false,\r\n                typeAction:'',\r\n                receiptType:'',\r\n                status:res.name\r\n            });\r\n \r\n         }\r\n    }\r\n    componentWillReceiveProps(newProps){\r\n    \r\n        if(!this._isIniData){\r\n            this.model.load();\r\n            this._isIniData = true ; \r\n        }\r\n\r\n        this.grid.rowData = newProps[MODE]['list'] || [] ;  \r\n        // CONNECT REDUX STATE \r\n        this._whereStateChange(newProps[MODE]['state']);\r\n    }\r\n\r\n    /* WHERE*/\r\n    _whereStateChange(newState){\r\n        this.setState(Object.assign(this.state,newState));\r\n    }\r\n\r\n    render() {\r\n        return (\r\n            <div hidden={ this.state.tab === this.props.onTab ? false : true } className=\"animated fadeIn\" style={{padding:10}} >\r\n\r\n                <MyForm\r\n\r\n                    typeAction={this.state.typeAction}\r\n                    width=\"36%\"\r\n                    data={ this._curInfo }\r\n                    model={this.model}\r\n                    isOpen={ this.state.isOpenForm }\r\n                    onToggle={(isOpen)=>{ this.setState({isOpenForm:isOpen}) }}\r\n                    \r\n                    onSubmitForm={ (res)=>{ this._onSubmitForm(res) }}\r\n\r\n\r\n                />\r\n                <BenGrid\r\n\r\n                    height='77.5vh'\r\n                    gridID=\"id\"\r\n\r\n                    onBtnEdit={ this._doOpenModalUpdate }\r\n                    onBtnAdd={this._doOpenModalPost}   \r\n\r\n                    rowSelection='single'\r\n                    formStatus={ this.state.status }\r\n                    isRightTool={ true }\r\n                        \r\n\r\n                    nextColums={ this.grid.colums }\r\n                    rowData={this.grid.rowData}\r\n                    model={ this.model }\r\n                    \r\n                        \r\n                />\r\n            </div>\r\n        );\r\n    }\r\n}\r\n\r\nconst mapStateToProps = (state) => {\r\n    return {\r\n        [MODE]: state[MODE]\r\n    }\r\n}\r\n\r\nexport default connect(mapStateToProps)(MyOffice) ;"]},"metadata":{},"sourceType":"module"}