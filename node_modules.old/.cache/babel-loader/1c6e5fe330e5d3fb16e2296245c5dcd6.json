{"ast":null,"code":"import _regeneratorRuntime from \"D:\\\\actions\\\\st_frontend\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/regenerator\";\nimport _asyncToGenerator from \"D:\\\\actions\\\\st_frontend\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/asyncToGenerator\";\nimport _classCallCheck from \"D:\\\\actions\\\\st_frontend\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"D:\\\\actions\\\\st_frontend\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"D:\\\\actions\\\\st_frontend\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"D:\\\\actions\\\\st_frontend\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"D:\\\\actions\\\\st_frontend\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/inherits\";\nvar _jsxFileName = \"D:\\\\actions\\\\st_frontend\\\\src\\\\pages\\\\Inventory\\\\Receipt\\\\PrintForm.js\";\n// DATA \nimport { PHIEU_XUATKHO, PHIEU_NHAPKHO } from '../../../config/temp-code-in-out-basic';\nimport { WAREHOUSE_TRACKS } from '../../../config/app.config'; // HOOKS \n\nimport doGetModelInfoCode from '../../../hook/ultil/doGetModelInfoCode';\nimport doPrint from '../../../hook/ultil/doPrint';\nimport React, { Component } from 'react';\nimport moment from 'moment';\nimport ViewModal from '../../../components/ViewModal';\n\nvar PrintForm =\n/*#__PURE__*/\nfunction (_Component) {\n  _inherits(PrintForm, _Component);\n\n  function PrintForm() {\n    var _getPrototypeOf2;\n\n    var _this;\n\n    _classCallCheck(this, PrintForm);\n\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    _this = _possibleConstructorReturn(this, (_getPrototypeOf2 = _getPrototypeOf(PrintForm)).call.apply(_getPrototypeOf2, [this].concat(args)));\n    _this.state = {\n      companyInfo: {},\n      warehouseInfo: {},\n      purchaseInfo: {},\n      orderInfo: {}\n    };\n    return _this;\n  }\n\n  _createClass(PrintForm, [{\n    key: \"componentWillReceiveProps\",\n    value: function () {\n      var _componentWillReceiveProps = _asyncToGenerator(\n      /*#__PURE__*/\n      _regeneratorRuntime.mark(function _callee(newProp) {\n        var receiptInfo, resWHInfo, resPurInfo, resOrder;\n        return _regeneratorRuntime.wrap(function _callee$(_context) {\n          while (1) {\n            switch (_context.prev = _context.next) {\n              case 0:\n                if (!(JSON.stringify(newProp.companyInfo) != '{}')) {\n                  _context.next = 21;\n                  break;\n                }\n\n                this.setState(newProp.companyInfo);\n\n                if (!(JSON.stringify(newProp.data) !== '{}')) {\n                  _context.next = 21;\n                  break;\n                }\n\n                receiptInfo = newProp.data;\n                _context.t0 = receiptInfo.track_code;\n                _context.next = _context.t0 === 'muahang' ? 7 : _context.t0 === 'banhang' ? 16 : 21;\n                break;\n\n              case 7:\n                _context.next = 9;\n                return doGetModelInfoCode('warehouses', newProp.data.warehouse_code);\n\n              case 9:\n                resWHInfo = _context.sent;\n\n                if (resWHInfo.name === 'success') {\n                  this.setState({\n                    warehouseInfo: resWHInfo.data\n                  });\n                }\n\n                _context.next = 13;\n                return doGetModelInfoCode('purchases', newProp.data.purchase_code);\n\n              case 13:\n                resPurInfo = _context.sent;\n\n                if (resPurInfo.name === 'success') {\n                  this.setState({\n                    purchaseInfo: resPurInfo.data\n                  });\n                }\n\n                return _context.abrupt(\"break\", 21);\n\n              case 16:\n                _context.next = 18;\n                return doGetModelInfoCode('orders', receiptInfo.order_code);\n\n              case 18:\n                resOrder = _context.sent;\n\n                if (resOrder.name === 'success') {\n                  this.setState({\n                    orderInfo: resOrder.data\n                  });\n                }\n\n                return _context.abrupt(\"break\", 21);\n\n              case 21:\n              case \"end\":\n                return _context.stop();\n            }\n          }\n        }, _callee, this);\n      }));\n\n      function componentWillReceiveProps(_x) {\n        return _componentWillReceiveProps.apply(this, arguments);\n      }\n\n      return componentWillReceiveProps;\n    }()\n  }, {\n    key: \"_getTrackCode\",\n    value: function _getTrackCode(code) {\n      var name = '';\n      var MY_TRACKCODE = WAREHOUSE_TRACKS['in'].concat(WAREHOUSE_TRACKS['out']);\n      MY_TRACKCODE.map(function (item) {\n        if (item.code === code) {\n          name = item.name;\n        }\n      });\n      return name;\n    } // USING FOR REDER BASIC\n\n  }, {\n    key: \"_renderBodyCart\",\n    value: function _renderBodyCart(cart) {\n      var html = \"\";\n      cart.map(function (item, index) {\n        var total = parseFloat(item.price) * parseInt(item.amount);\n        var stt = index + 1;\n        html += \"\\n                <tr class=\\\"record-item\\\">\\n                    <td class=\\\"text-center item\\\" style=\\\"vertical-align:middle\\\">\\n                        \".concat(stt, \"\\n                    </td>\\n                    \\n                    <td class=\\\"text-center item\\\" style=\\\"vertical-align:middle\\\" >\\n                        \").concat(item.code, \"\\n                    </td>\\n                    <td class=\\\"item-pro-desc item\\\" style=\\\"word-wrap:break-word;\\\">\\n                       \").concat(item.name, \"\\n                    </td>\\n\\n                    <td class=\\\"text-center item\\\" style=\\\"vertical-align:middle\\\">\\n                        \").concat(item.unit || '', \"\\n                    </td>\\n\\n                    \\n                    <td class=\\\"text-center item\\\" style=\\\"vertical-align:middle\\\">\\n                        \").concat(item.amount, \"\\n                    </td>\\n                </tr>\\n            \");\n      });\n      return html;\n    }\n  }, {\n    key: \"_renderOrderBody\",\n    value: function _renderOrderBody(HTML, data) {\n      // CUSTOMER INFO \n      var cusInfo = JSON.parse(data.customer_info);\n      HTML = HTML.replace(/{{CUSTOMER_NAME}}/g, cusInfo.name);\n      HTML = HTML.replace(/{{CUSTOMER_ADDRESS}}/g, cusInfo.address_delivery);\n      HTML = HTML.replace(/{{CUSTOMER_PHONE}}/g, cusInfo.phone);\n      HTML = HTML.replace(/{{CUSTOMER_EMAIL}}/g, cusInfo.email);\n      HTML = HTML.replace(/{{CUSTOMER_RECEIVER}}/g, cusInfo.contact_name);\n      HTML = HTML.replace(/{{CUSTOMER_TAXNO}}/g, cusInfo.tax_no); // END CUSTOMER\n      // ORDER INFO \n\n      HTML = HTML.replace(/{{RECEIPT_CODE_OUT}}/g, data.code_out);\n      HTML = HTML.replace(/{{RECEIPT_DATE_CREATED}}/g, moment(data.date_created).format('YYYY-MM-DD'));\n      HTML = HTML.replace(/{{RECEIPT_ORDER_INV}}/g, data.order_code);\n      HTML = HTML.replace(/{{WAREHOUSE_CODE}}/g, data.warehouse_code);\n      HTML = HTML.replace(/{{BARCODE}}/g, \"<img style=\\\"height:60px\\\" src=\\\"https://barcode.tec-it.com/barcode.ashx?data=\".concat(data.code_out.toUpperCase(), \"\\\"/>\"));\n      HTML = HTML.replace(/{{RECEIPT_NOTE}}/g, data.note); // END ORDER INFO \n      // CART TABLE\n\n      var cart = JSON.parse(data.cart);\n      HTML = HTML.replace(/{{ORDER_RECORDS}}/g, this._renderBodyCart(cart)); // FOOTER \n\n      HTML = HTML.replace(/{{USER_CODE}}/g, window.USERINFO.username);\n      console.log(this.state.orderInfo);\n\n      if (JSON.stringify(this.state.orderInfo) !== '{}') {\n        HTML = HTML.replace(/{{ORDER_BELONG_USER}}/g, this.state.orderInfo.belong_user);\n      }\n\n      return HTML;\n    }\n  }, {\n    key: \"_renderPOBody\",\n    value: function _renderPOBody(HTML, data) {\n      // SUPPLIER INFO\n      var supInfo = JSON.parse(data.supplier_info);\n      HTML = HTML.replace(/{{SUPPLIER_CODE}}/g, supInfo.code);\n      HTML = HTML.replace(/{{SUPPLIER_NAME}}/g, supInfo.name);\n      HTML = HTML.replace(/{{SUPPLIER_ADDRESS}}/g, supInfo.address);\n      HTML = HTML.replace(/{{SUPPLIER_TAXNO}}/g, supInfo.tax_no);\n      HTML = HTML.replace(/{{SUPPLIER_PHONE}}/g, supInfo.phone);\n      HTML = HTML.replace(/{{SUPPLIER_EMAIL}}/g, supInfo.email || 'n/a'); // END SUPPLIER INFO\n      // RECEIP INFO \n\n      HTML = HTML.replace(/{{PURCHASE_CODE}}/g, data.purchase_code);\n      HTML = HTML.replace(/{{WAREHOUSE_CODE}}/g, data.warehouse_code); // END RECEIPT INFO \n      // SHIP TO \n\n      if (JSON.stringify(this.state.warehouseInfo) !== '{}') {\n        HTML = HTML.replace(/{{RECEIVER_LOCATION}}/g, this.state.warehouseInfo.name);\n        HTML = HTML.replace(/{{RECEIVER_ADDRESS}}/g, this.state.warehouseInfo.address);\n        HTML = HTML.replace(/{{RECEIVER_CONTACT}}/g, this.state.warehouseInfo.contact_person + ' - ' + this.state.warehouseInfo.phone);\n      } // END SHIP TO\n      // PURCHASE INFO \n\n\n      if (JSON.stringify(this.state.purchaseInfo) !== '{}') {\n        var purInfo = this.state.purchaseInfo;\n        HTML = HTML.replace(/{{PURCHASE_BELONG_USERCODE}}/g, purInfo.user_code);\n        HTML = HTML.replace(/{{PURCHASE_PAYMENT}}/g, purInfo.payment_code);\n        HTML = HTML.replace(/{{PURCHASE_BELONG_USERNAME}}/g, purInfo.creator);\n        HTML = HTML.replace(/{{PURCHASE_BELONG_USERMAIL}}/g, purInfo.creator_email); // \n\n        HTML = HTML.replace(/{{BARCODE}}/g, \"<img style=\\\"height:60px\\\" src=\\\"https://barcode.tec-it.com/barcode.ashx?data=\".concat(purInfo.code.toUpperCase(), \"\\\"/>\"));\n      } // END PURCHASE\n\n\n      var cart = JSON.parse(data.cart);\n      HTML = HTML.replace(/{{ORDER_RECORDS}}/g, this._renderBodyCart(cart));\n      HTML = HTML.replace(/{{RECEIPT_NOTE}}/g, data.note);\n      return HTML;\n    }\n  }, {\n    key: \"_renderBasic\",\n    value: function _renderBasic(HTML, data) {\n      HTML = HTML.replace(/{{RECEIP_TRACK_CODE}}/g, this._getTrackCode(data.track_code));\n      HTML = HTML.replace(/{{RECEIP_ATTACH}}/g, this._getTrackCode(data.attack_code));\n      HTML = HTML.replace(/{{RECEIPT_NOTE}}/g, this._getTrackCode(data.note));\n      HTML = HTML.replace(/{{RECEIPT_DATE_CREATED}}/g, moment(data.date_created).format('YYYY-MM-DD'));\n      HTML = HTML.replace(/{{RECEIPT_CODE_OUT}}/g, data.code_out);\n      HTML = HTML.replace(/{{RECEIPT_CODE_IN}}/g, data.code_in);\n      HTML = HTML.replace(/{{WAREHOUSE_CODE}}/g, data.warehouse_code);\n      var cart = JSON.parse(data.cart);\n      HTML = HTML.replace(/{{ORDER_RECORDS}}/g, this._renderBodyCart(cart));\n      return HTML;\n    }\n  }, {\n    key: \"_formatHTML\",\n    value: function _formatHTML(data, companyInfo) {\n      var HTML = \"\";\n\n      if (JSON.stringify(companyInfo) != '{}') {\n        // DECODE DATA\n        if (JSON.stringify(data) !== '{}') {\n          var tempBasic = {\n            in: PHIEU_NHAPKHO,\n            out: PHIEU_XUATKHO\n          };\n\n          switch (data.track_code) {\n            case 'banhang':\n              HTML = companyInfo['receipt_out_temp'];\n              HTML = this._renderOrderBody(HTML, data);\n              break;\n\n            case 'muahang':\n              HTML = companyInfo['receipt_in_temp']; //alert(HTML)\n\n              HTML = this._renderPOBody(HTML, data);\n              break;\n\n            default:\n              // TEMPLATE MẪU CƠ BẢN\n              HTML = tempBasic[data.type];\n              HTML = this._renderBasic(HTML, data);\n              break;\n          }\n\n          HTML = HTML.replace(/{{COMPANY_LOGO}}/g, companyInfo['logo']);\n          HTML = HTML.replace(/{{COMPANY_NAME}}/g, companyInfo['name']);\n          HTML = HTML.replace(/{{COMPANY_ADDRESS}}/g, companyInfo['address']);\n          HTML = HTML.replace(/{{COMPANY_TAXNO}}/g, companyInfo['tax_no']);\n          HTML = HTML.replace(/{{COMPANY_PHONE}}/g, companyInfo['phone']);\n          HTML = HTML.replace(/{{COMPANY_WEBSITE}}/g, companyInfo['website']);\n          HTML = HTML.replace(/{{COMPANY_EMAIL}}/g, companyInfo['email']);\n        }\n      }\n\n      return HTML;\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this2 = this;\n\n      var data = this.props.data;\n\n      var HTML = this._formatHTML(data, this.props.companyInfo); //this._formatQuotationHTML(data,this.props.companyInfo);\n\n\n      return React.createElement(ViewModal, Object.assign({\n        name: React.createElement(\"span\", {\n          className: \"text-uppercase\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 304\n          },\n          __self: this\n        }, \" form \")\n      }, this.props, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 304\n        },\n        __self: this\n      }), React.createElement(\"div\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 305\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        style: {\n          padding: 10\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 307\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"btn-group\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 308\n        },\n        __self: this\n      }, React.createElement(\"a\", {\n        onClick: function onClick() {\n          doPrint(HTML);\n        },\n        className: \"btn btn-normal btn-sm\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 310\n        },\n        __self: this\n      }, \" \", React.createElement(\"i\", {\n        className: \"fa fa-print\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 310\n        },\n        __self: this\n      }), \" Print\"))), React.createElement(\"div\", {\n        ref: function ref(el) {\n          return _this2.componentRef = el;\n        },\n        style: {\n          paddingBottom: 20\n        },\n        dangerouslySetInnerHTML: {\n          __html: HTML\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 316\n        },\n        __self: this\n      })));\n    }\n  }]);\n\n  return PrintForm;\n}(Component);\n\nPrintForm.defaultProps = {\n  onToggle: function onToggle() {},\n  data: {}\n};\nexport default PrintForm;","map":{"version":3,"sources":["D:/actions/st_frontend/src/pages/Inventory/Receipt/PrintForm.js"],"names":["PHIEU_XUATKHO","PHIEU_NHAPKHO","WAREHOUSE_TRACKS","doGetModelInfoCode","doPrint","React","Component","moment","ViewModal","PrintForm","state","companyInfo","warehouseInfo","purchaseInfo","orderInfo","newProp","JSON","stringify","setState","data","receiptInfo","track_code","warehouse_code","resWHInfo","name","purchase_code","resPurInfo","order_code","resOrder","code","MY_TRACKCODE","concat","map","item","cart","html","index","total","parseFloat","price","parseInt","amount","stt","unit","HTML","cusInfo","parse","customer_info","replace","address_delivery","phone","email","contact_name","tax_no","code_out","date_created","format","toUpperCase","note","_renderBodyCart","window","USERINFO","username","console","log","belong_user","supInfo","supplier_info","address","contact_person","purInfo","user_code","payment_code","creator","creator_email","_getTrackCode","attack_code","code_in","tempBasic","in","out","_renderOrderBody","_renderPOBody","type","_renderBasic","props","_formatHTML","padding","el","componentRef","paddingBottom","__html","defaultProps","onToggle"],"mappings":"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","sourcesContent":["\r\n// DATA \r\nimport { PHIEU_XUATKHO, PHIEU_NHAPKHO } from '../../../config/temp-code-in-out-basic';\r\nimport {  WAREHOUSE_TRACKS } from '../../../config/app.config';\r\n\r\n// HOOKS \r\nimport doGetModelInfoCode from '../../../hook/ultil/doGetModelInfoCode';\r\nimport doPrint from '../../../hook/ultil/doPrint';\r\n\r\n\r\nimport React, { Component } from 'react';\r\nimport moment from 'moment';\r\n\r\n\r\n\r\nimport ViewModal from '../../../components/ViewModal';\r\n\r\n\r\nclass PrintForm extends Component {  \r\n\r\n    \r\n    state = {\r\n        companyInfo:{},\r\n        warehouseInfo:{},\r\n        purchaseInfo:{},\r\n        orderInfo:{}\r\n\r\n    }\r\n\r\n    async componentWillReceiveProps(newProp){\r\n\r\n        if(JSON.stringify(newProp.companyInfo)!='{}'){\r\n            this.setState(newProp.companyInfo);\r\n\r\n            if(JSON.stringify(newProp.data)!=='{}'){\r\n                \r\n                const receiptInfo = newProp.data;\r\n                \r\n                switch(receiptInfo.track_code){\r\n\r\n                    case 'muahang':\r\n                        const resWHInfo = await doGetModelInfoCode('warehouses',newProp.data.warehouse_code);\r\n                        if(resWHInfo.name==='success'){\r\n                            this.setState({\r\n                                warehouseInfo : resWHInfo.data\r\n                            });\r\n                        }\r\n\r\n                        const resPurInfo = await doGetModelInfoCode('purchases',newProp.data.purchase_code);\r\n                        if(resPurInfo.name==='success'){\r\n                            this.setState({\r\n                                purchaseInfo:resPurInfo.data\r\n                            })\r\n                        }\r\n                    break;\r\n\r\n                    case 'banhang':\r\n                        \r\n                        const resOrder = await doGetModelInfoCode('orders',receiptInfo.order_code);\r\n                        \r\n                        if(resOrder.name==='success'){\r\n                            this.setState({\r\n                                orderInfo:resOrder.data\r\n                            });\r\n                        }\r\n                    break; \r\n                }\r\n                \r\n            }\r\n\r\n        }\r\n    }\r\n\r\n    _getTrackCode(code){\r\n        let name = '';\r\n        const MY_TRACKCODE = WAREHOUSE_TRACKS['in'].concat(WAREHOUSE_TRACKS['out']);\r\n\r\n        MY_TRACKCODE.map((item)=>{\r\n            if(item.code===code){\r\n                name = item.name;\r\n            }\r\n        });\r\n\r\n        return name;\r\n\r\n    }\r\n\r\n\r\n    // USING FOR REDER BASIC\r\n    _renderBodyCart(cart){\r\n        let html = ``;\r\n        cart.map((item,index)=>{\r\n            const total = parseFloat(item.price) * parseInt(item.amount);\r\n            const stt = index + 1; \r\n\r\n            html += `\r\n                <tr class=\"record-item\">\r\n                    <td class=\"text-center item\" style=\"vertical-align:middle\">\r\n                        ${stt}\r\n                    </td>\r\n                    \r\n                    <td class=\"text-center item\" style=\"vertical-align:middle\" >\r\n                        ${ item.code }\r\n                    </td>\r\n                    <td class=\"item-pro-desc item\" style=\"word-wrap:break-word;\">\r\n                       ${item.name  }\r\n                    </td>\r\n\r\n                    <td class=\"text-center item\" style=\"vertical-align:middle\">\r\n                        ${ item.unit || '' }\r\n                    </td>\r\n\r\n                    \r\n                    <td class=\"text-center item\" style=\"vertical-align:middle\">\r\n                        ${ item.amount }\r\n                    </td>\r\n                </tr>\r\n            `\r\n        });\r\n\r\n        return html;\r\n    }\r\n    \r\n\r\n    _renderOrderBody(HTML,data){\r\n\r\n        // CUSTOMER INFO \r\n        \r\n        const cusInfo = JSON.parse(data.customer_info);\r\n            \r\n        HTML = HTML.replace(/{{CUSTOMER_NAME}}/g, cusInfo.name);\r\n        HTML = HTML.replace(/{{CUSTOMER_ADDRESS}}/g, cusInfo.address_delivery);\r\n        HTML = HTML.replace(/{{CUSTOMER_PHONE}}/g, cusInfo.phone);\r\n        HTML = HTML.replace(/{{CUSTOMER_EMAIL}}/g, cusInfo.email);\r\n        HTML = HTML.replace(/{{CUSTOMER_RECEIVER}}/g, cusInfo.contact_name);\r\n        HTML = HTML.replace(/{{CUSTOMER_TAXNO}}/g, cusInfo.tax_no);\r\n        // END CUSTOMER\r\n            \r\n        // ORDER INFO \r\n        HTML = HTML.replace(/{{RECEIPT_CODE_OUT}}/g, data.code_out);\r\n        HTML = HTML.replace(/{{RECEIPT_DATE_CREATED}}/g, moment(data.date_created).format('YYYY-MM-DD'));\r\n        HTML = HTML.replace(/{{RECEIPT_ORDER_INV}}/g, data.order_code);\r\n        HTML = HTML.replace(/{{WAREHOUSE_CODE}}/g, data.warehouse_code);\r\n        HTML = HTML.replace(/{{BARCODE}}/g, `<img style=\"height:60px\" src=\"https://barcode.tec-it.com/barcode.ashx?data=${ data.code_out.toUpperCase() }\"/>`);\r\n\r\n        HTML = HTML.replace(/{{RECEIPT_NOTE}}/g, data.note);\r\n        // END ORDER INFO \r\n\r\n        // CART TABLE\r\n        const cart = JSON.parse(data.cart);  \r\n        HTML = HTML.replace(/{{ORDER_RECORDS}}/g,  this._renderBodyCart(cart) ); \r\n        \r\n\r\n        // FOOTER \r\n        HTML = HTML.replace(/{{USER_CODE}}/g, window.USERINFO.username);\r\n        console.log(this.state.orderInfo);\r\n\r\n        if(JSON.stringify(this.state.orderInfo)!=='{}'){\r\n            HTML = HTML.replace(/{{ORDER_BELONG_USER}}/g, this.state.orderInfo.belong_user);\r\n        }\r\n         \r\n\r\n        return HTML ; \r\n    }\r\n    _renderPOBody(HTML, data){\r\n        \r\n        // SUPPLIER INFO\r\n        const supInfo = JSON.parse(data.supplier_info);\r\n        HTML = HTML.replace(/{{SUPPLIER_CODE}}/g, supInfo.code );\r\n        HTML = HTML.replace(/{{SUPPLIER_NAME}}/g, supInfo.name );\r\n        HTML = HTML.replace(/{{SUPPLIER_ADDRESS}}/g, supInfo.address );\r\n        HTML = HTML.replace(/{{SUPPLIER_TAXNO}}/g, supInfo.tax_no );\r\n        HTML = HTML.replace(/{{SUPPLIER_PHONE}}/g, supInfo.phone  );\r\n        HTML = HTML.replace(/{{SUPPLIER_EMAIL}}/g, supInfo.email || 'n/a' );\r\n        // END SUPPLIER INFO\r\n\r\n        // RECEIP INFO \r\n        HTML = HTML.replace(/{{PURCHASE_CODE}}/g, data.purchase_code );\r\n        HTML = HTML.replace(/{{WAREHOUSE_CODE}}/g, data.warehouse_code );\r\n        \r\n        // END RECEIPT INFO \r\n\r\n        // SHIP TO \r\n        if(JSON.stringify(this.state.warehouseInfo) !=='{}'){\r\n            \r\n            HTML = HTML.replace(/{{RECEIVER_LOCATION}}/g, this.state.warehouseInfo.name );\r\n            HTML = HTML.replace(/{{RECEIVER_ADDRESS}}/g, this.state.warehouseInfo.address );\r\n            HTML = HTML.replace(/{{RECEIVER_CONTACT}}/g, this.state.warehouseInfo.contact_person + ' - '+ this.state.warehouseInfo.phone );\r\n            \r\n\r\n        }\r\n        // END SHIP TO\r\n\r\n        // PURCHASE INFO \r\n        if(JSON.stringify(this.state.purchaseInfo)!=='{}'){\r\n            const purInfo = this.state.purchaseInfo;\r\n            \r\n\r\n            HTML = HTML.replace(/{{PURCHASE_BELONG_USERCODE}}/g, purInfo.user_code );\r\n            HTML = HTML.replace(/{{PURCHASE_PAYMENT}}/g, purInfo.payment_code );\r\n            HTML = HTML.replace(/{{PURCHASE_BELONG_USERNAME}}/g, purInfo.creator );\r\n            HTML = HTML.replace(/{{PURCHASE_BELONG_USERMAIL}}/g, purInfo.creator_email );\r\n\r\n            // \r\n            HTML = HTML.replace(/{{BARCODE}}/g, `<img style=\"height:60px\" src=\"https://barcode.tec-it.com/barcode.ashx?data=${ purInfo.code.toUpperCase() }\"/>`);\r\n                \r\n            \r\n        }\r\n        // END PURCHASE\r\n\r\n        const cart = JSON.parse(data.cart);  \r\n        HTML = HTML.replace(/{{ORDER_RECORDS}}/g,  this._renderBodyCart(cart) ); \r\n        HTML = HTML.replace(/{{RECEIPT_NOTE}}/g,  data.note );\r\n        \r\n\r\n\r\n        return HTML;\r\n\r\n    }\r\n\r\n    _renderBasic(HTML,data){\r\n        \r\n\r\n        HTML = HTML.replace(/{{RECEIP_TRACK_CODE}}/g, this._getTrackCode(data.track_code) );\r\n        HTML = HTML.replace(/{{RECEIP_ATTACH}}/g, this._getTrackCode(data.attack_code) );\r\n        HTML = HTML.replace(/{{RECEIPT_NOTE}}/g, this._getTrackCode(data.note));\r\n        \r\n        HTML = HTML.replace(/{{RECEIPT_DATE_CREATED}}/g,  moment(data.date_created).format('YYYY-MM-DD') );\r\n        HTML = HTML.replace(/{{RECEIPT_CODE_OUT}}/g,  data.code_out );\r\n        HTML = HTML.replace(/{{RECEIPT_CODE_IN}}/g,  data.code_in );\r\n        \r\n        HTML = HTML.replace(/{{WAREHOUSE_CODE}}/g,  data.warehouse_code );\r\n\r\n        const cart = JSON.parse(data.cart);  \r\n        HTML = HTML.replace(/{{ORDER_RECORDS}}/g,  this._renderBodyCart(cart) ); \r\n        \r\n        \r\n\r\n        return HTML;\r\n    }\r\n\r\n    _formatHTML(data,companyInfo){\r\n        let HTML = ``;\r\n\r\n        if(JSON.stringify(companyInfo)!='{}'){\r\n\r\n            // DECODE DATA\r\n            if(JSON.stringify(data)!=='{}'){\r\n\r\n\r\n                \r\n                const tempBasic = {\r\n                    in:PHIEU_NHAPKHO,\r\n                    out:PHIEU_XUATKHO\r\n                }\r\n\r\n                \r\n                switch(data.track_code){\r\n                    case 'banhang':\r\n                        HTML = companyInfo['receipt_out_temp'];\r\n                        HTML = this._renderOrderBody(HTML,data);\r\n                        \r\n                    break;\r\n                    case 'muahang':\r\n                        HTML = companyInfo['receipt_in_temp']; \r\n                        //alert(HTML)\r\n                        HTML = this._renderPOBody(HTML,data);\r\n\r\n                    break;\r\n\r\n                    default:\r\n                        // TEMPLATE MẪU CƠ BẢN\r\n                        HTML = tempBasic[data.type];\r\n                        HTML = this._renderBasic(HTML,data);\r\n                        \r\n                    break;\r\n                    \r\n                }\r\n                \r\n                HTML = HTML.replace(/{{COMPANY_LOGO}}/g,companyInfo['logo']);\r\n                HTML = HTML.replace(/{{COMPANY_NAME}}/g,companyInfo['name']);\r\n                HTML = HTML.replace(/{{COMPANY_ADDRESS}}/g,companyInfo['address']);\r\n                HTML = HTML.replace(/{{COMPANY_TAXNO}}/g,companyInfo['tax_no']);\r\n                HTML = HTML.replace(/{{COMPANY_PHONE}}/g,companyInfo['phone']);\r\n                HTML = HTML.replace(/{{COMPANY_WEBSITE}}/g,companyInfo['website']);\r\n                HTML = HTML.replace(/{{COMPANY_EMAIL}}/g,companyInfo['email']);\r\n                \r\n            }\r\n            \r\n\r\n        }\r\n\r\n        return HTML;\r\n    }\r\n\r\n\r\n    render() {\r\n        \r\n        const data = this.props.data;\r\n        const HTML = this._formatHTML(data,this.props.companyInfo); //this._formatQuotationHTML(data,this.props.companyInfo);\r\n        \r\n       \r\n        return (\r\n            <ViewModal name={ <span className=\"text-uppercase\"> form </span> }  { ...this.props }   >\r\n                <div>\r\n                    \r\n                    <div style={{padding:10}}>\r\n                        <div className=\"btn-group\">\r\n                        \r\n                            <a onClick={()=>{ doPrint(HTML) }} className=\"btn btn-normal btn-sm\"> <i className=\"fa fa-print\"></i> Print</a>\r\n\r\n                            \r\n                        </div>\r\n                          \r\n                    </div>\r\n                    <div    \r\n                        ref={el => (this.componentRef = el)}\r\n                        style={{\r\n                                paddingBottom:20\r\n                        }}\r\n                            dangerouslySetInnerHTML={{ __html: HTML  }} \r\n                    />\r\n\r\n                </div>\r\n            </ViewModal>\r\n        );\r\n    }\r\n}\r\n\r\nPrintForm.defaultProps = {\r\n    onToggle:()=>{},\r\n    data:{}\r\n}  \r\n\r\nexport default PrintForm\r\n"]},"metadata":{},"sourceType":"module"}