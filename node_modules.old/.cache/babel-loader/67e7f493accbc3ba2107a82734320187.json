{"ast":null,"code":"import _regeneratorRuntime from \"D:\\\\actions\\\\st_frontend\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/regenerator\";\nimport _asyncToGenerator from \"D:\\\\actions\\\\st_frontend\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/asyncToGenerator\";\nimport _defineProperty from \"D:\\\\actions\\\\st_frontend\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/defineProperty\";\nimport _classCallCheck from \"D:\\\\actions\\\\st_frontend\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"D:\\\\actions\\\\st_frontend\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"D:\\\\actions\\\\st_frontend\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"D:\\\\actions\\\\st_frontend\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"D:\\\\actions\\\\st_frontend\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/inherits\";\nimport _assertThisInitialized from \"D:\\\\actions\\\\st_frontend\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/assertThisInitialized\";\nvar _jsxFileName = \"D:\\\\actions\\\\st_frontend\\\\src\\\\pages\\\\Cashflow\\\\View\\\\Form.js\";\n// HOOKS \nimport detectForm from '../../../hook/before/detectform';\nimport React, { Component } from 'react';\nimport { Row, Col, FormGroup, Input } from 'reactstrap';\nimport ViewModal from '../../../components/ViewModal';\nimport InputNumeral from '../../../components/InputNumeral';\nimport SelectList from '../../../components/SelectList';\nimport SelectListModel from '../../../components/SelectListModel';\nvar FROM_OBJECTS = [{\n  code: 'inv_code',\n  name: 'Đơn hàng bán số INV'\n}, {\n  code: 'po_code',\n  name: 'Đơn hàng mua Số PO'\n}, {\n  code: 'user_code',\n  name: 'Nhân viên'\n}, {\n  code: 'other_code',\n  name: 'Khác'\n}];\n\nvar MyForm =\n/*#__PURE__*/\nfunction (_Component) {\n  _inherits(MyForm, _Component);\n\n  function MyForm(props) {\n    var _this;\n\n    _classCallCheck(this, MyForm);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(MyForm).call(this, props));\n    _this.state = {};\n    _this._onChange = _this._onChange.bind(_assertThisInitialized(_assertThisInitialized(_this)));\n    _this._onSubmit = _this._onSubmit.bind(_assertThisInitialized(_assertThisInitialized(_this)));\n    return _this;\n  }\n\n  _createClass(MyForm, [{\n    key: \"_resetForm\",\n    value: function _resetForm() {\n      return {\n        from_type: 'inv_code',\n        ref_code: '',\n        refcode_name: 'Đơn hàng bán số INV',\n        person_name: '',\n        person_address: '',\n        total: 0,\n        total_before: 0,\n        bill_account_id: 0,\n        bank_ref: '',\n        reason: '',\n        type: this.props.receiptType,\n        note: ''\n      };\n    }\n  }, {\n    key: \"_onSubmit\",\n    value: function _onSubmit() {\n      var _this2 = this;\n\n      var fields = ['from_type', 'ref_code', 'person_name', 'person_address', 'total', 'bill_account_id', 'reason'];\n\n      if (detectForm(fields, this.state) === '') {\n        var data = this.state;\n        this.model.axios(this.props.typeAction, data, function (res) {\n          _this2._whereStateChange(res);\n        });\n      }\n    }\n  }, {\n    key: \"_onChange\",\n    value: function _onChange(name, value) {\n      this.setState(_defineProperty({}, name, value));\n    }\n  }, {\n    key: \"_onObjectChange\",\n    value: function _onObjectChange(code) {\n      var refcode_name = FROM_OBJECTS.map(function (item) {\n        if (item.code === code) {\n          return item.name;\n        }\n      });\n      this.setState({\n        refcode_name: refcode_name,\n        from_type: code\n      });\n    }\n  }, {\n    key: \"componentDidMount\",\n    value: function () {\n      var _componentDidMount = _asyncToGenerator(\n      /*#__PURE__*/\n      _regeneratorRuntime.mark(function _callee() {\n        return _regeneratorRuntime.wrap(function _callee$(_context) {\n          while (1) {\n            switch (_context.prev = _context.next) {\n              case 0:\n                // INIT ORDERS MODEL\n                this.model = this.props.model;\n\n              case 1:\n              case \"end\":\n                return _context.stop();\n            }\n          }\n        }, _callee, this);\n      }));\n\n      function componentDidMount() {\n        return _componentDidMount.apply(this, arguments);\n      }\n\n      return componentDidMount;\n    }()\n  }, {\n    key: \"_whereStateChange\",\n    value: function _whereStateChange(res) {\n      if (res.name === 'success' || res.name === 'ok') {\n        this.props.onSubmitForm(res);\n      }\n    }\n  }, {\n    key: \"componentWillReceiveProps\",\n    value: function componentWillReceiveProps(newProps) {\n      if (newProps.typeAction === 'put') {\n        var data = newProps.data;\n        var state = {\n          id: data.id,\n          code: data.code,\n          from_type: data.from_type,\n          ref_code: data.ref_code,\n          person_name: data.person_name,\n          person_address: data.person_address,\n          total: data.total,\n          total_before: data.total_before,\n          bill_account_id: data.bill_account_id,\n          bank_ref: data.bank_ref,\n          reason: data.reason,\n          type: data.type,\n          note: data.note\n        };\n        this.setState(state);\n      } else {\n        var _state = this._resetForm();\n\n        _state.type = newProps.receiptType;\n        _state.code = '';\n        this.setState(_state);\n      }\n    }\n  }, {\n    key: \"_getTitle\",\n    value: function _getTitle() {\n      var arrTitle = {\n        pt: 'Phiếu thu',\n        pc: 'Phiếu chi'\n      };\n      return arrTitle[this.props.receiptType] + ' ' + this.state.code;\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this3 = this;\n\n      var title = this._getTitle();\n\n      return React.createElement(ViewModal, Object.assign({\n        name: title,\n        isFooter: true\n      }, this.props, {\n        onSubmit: this._onSubmit,\n        onToggle: function onToggle(isOpen) {\n          _this3.props.onToggle(isOpen);\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 164\n        },\n        __self: this\n      }), React.createElement(\"div\", {\n        className: \"view-modal-body\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 165\n        },\n        __self: this\n      }, React.createElement(FormGroup, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 166\n        },\n        __self: this\n      }, React.createElement(Row, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 167\n        },\n        __self: this\n      }, React.createElement(Col, {\n        md: 4,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 169\n        },\n        __self: this\n      }, React.createElement(\"label\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 170\n        },\n        __self: this\n      }, \" \\u0110\\u1ED1i t\\u01B0\\u1EE3ng \"), React.createElement(SelectList, {\n        disabled: this.props.typeAction === 'post' ? false : true,\n        onChange: function onChange(e) {\n          _this3._onObjectChange(e.target.value);\n        },\n        defaultValue: this.state.from_type,\n        id: \"from_type\",\n        name: \"Vui l\\xF2ng ch\\u1ECDn\",\n        rows: FROM_OBJECTS,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 171\n        },\n        __self: this\n      })), React.createElement(Col, {\n        md: 4,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 179\n        },\n        __self: this\n      }, React.createElement(\"label\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 180\n        },\n        __self: this\n      }, \" \", this.state.refcode_name, \" \"), React.createElement(Input, {\n        onChange: function onChange(e) {\n          _this3._onChange('ref_code', e.target.value);\n        },\n        defaultValue: this.state.ref_code,\n        type: \"text\",\n        id: \"ref_code\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 181\n        },\n        __self: this\n      })))), React.createElement(FormGroup, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 186\n        },\n        __self: this\n      }, React.createElement(Row, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 187\n        },\n        __self: this\n      }, React.createElement(Col, {\n        md: 4,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 188\n        },\n        __self: this\n      }, React.createElement(\"label\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 189\n        },\n        __self: this\n      }, \" T\\xEAn \\u0111\\u01A1n v\\u1ECB \"), React.createElement(Input, {\n        defaultValue: this.state.person_name,\n        onChange: function onChange(e) {\n          _this3._onChange('person_name', e.target.value);\n        },\n        id: \"person_name\",\n        type: \"text\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 190\n        },\n        __self: this\n      })), React.createElement(Col, {\n        md: 8,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 192\n        },\n        __self: this\n      }, React.createElement(\"label\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 193\n        },\n        __self: this\n      }, \" \\u0110\\u1ECBa ch\\u1EC9 \"), React.createElement(Input, {\n        defaultValue: this.state.person_address,\n        onChange: function onChange(e) {\n          _this3._onChange('person_address', e.target.value);\n        },\n        id: \"person_address\",\n        type: \"text\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 194\n        },\n        __self: this\n      })))), React.createElement(FormGroup, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 201\n        },\n        __self: this\n      }, React.createElement(Row, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 202\n        },\n        __self: this\n      }, React.createElement(Col, {\n        md: 4,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 203\n        },\n        __self: this\n      }, React.createElement(\"label\", {\n        className: \"text-red\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 204\n        },\n        __self: this\n      }, \" S\\u1ED1 ti\\u1EC1n \"), React.createElement(InputNumeral, {\n        defaultValue: this.state.total,\n        onChange: function onChange(value) {\n          _this3._onChange('total', value);\n        },\n        id: \"total\",\n        style: {\n          color: '#DD4B59'\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 205\n        },\n        __self: this\n      })), React.createElement(Col, {\n        md: 4,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 207\n        },\n        __self: this\n      }, React.createElement(\"label\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 208\n        },\n        __self: this\n      }, \" Lo\\u1EA1i t\\xE0i kho\\u1EA3n \"), React.createElement(SelectListModel, {\n        id: \"bill_account_id\",\n        onChange: function onChange(e) {\n          _this3._onChange('bill_account_id', e.target.value);\n        },\n        name: \"Vui l\\xF2ng ch\\u1ECDn\",\n        strModel: \"bill_accounts\",\n        defaultValue: this.state.bill_account_id,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 209\n        },\n        __self: this\n      })), React.createElement(Col, {\n        md: 4,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 214\n        },\n        __self: this\n      }, React.createElement(\"label\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 215\n        },\n        __self: this\n      }, \" K\\xE8m theo \"), React.createElement(Input, {\n        defaultValue: this.state.bank_ref,\n        onChange: function onChange(e) {\n          _this3._onChange('bank_ref', e.target.value);\n        },\n        id: \"bank_ref\",\n        type: \"text\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 216\n        },\n        __self: this\n      })))), React.createElement(FormGroup, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 220\n        },\n        __self: this\n      }, React.createElement(Row, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 221\n        },\n        __self: this\n      }, React.createElement(Col, {\n        md: 8,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 222\n        },\n        __self: this\n      }, React.createElement(\"label\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 223\n        },\n        __self: this\n      }, \" L\\xFD do  \"), React.createElement(Input, {\n        defaultValue: this.state.reason,\n        onChange: function onChange(e) {\n          _this3._onChange('reason', e.target.value);\n        },\n        id: \"reason\",\n        type: \"text\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 224\n        },\n        __self: this\n      }))), React.createElement(Row, {\n        style: {\n          marginTop: 20\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 227\n        },\n        __self: this\n      }, React.createElement(Col, {\n        md: 8,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 228\n        },\n        __self: this\n      }, React.createElement(\"label\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 229\n        },\n        __self: this\n      }, \"Ghi ch\\xFA\"), React.createElement(Input, {\n        defaultValue: this.state.note,\n        id: \"note\",\n        onChange: function onChange(e) {\n          _this3._onChange('note', e.target.value);\n        },\n        style: {\n          height: 100\n        },\n        type: \"textarea\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 230\n        },\n        __self: this\n      }))))));\n    }\n  }]);\n\n  return MyForm;\n}(Component);\n\nexport { MyForm as default };\nMyForm.defaultProps = {\n  receiptType: 'pt',\n  typeAction: 'post',\n  onToggle: function onToggle() {},\n  onSubmitForm: function onSubmitForm() {}\n};","map":{"version":3,"sources":["D:/actions/st_frontend/src/pages/Cashflow/View/Form.js"],"names":["detectForm","React","Component","Row","Col","FormGroup","Input","ViewModal","InputNumeral","SelectList","SelectListModel","FROM_OBJECTS","code","name","MyForm","props","state","_onChange","bind","_onSubmit","from_type","ref_code","refcode_name","person_name","person_address","total","total_before","bill_account_id","bank_ref","reason","type","receiptType","note","fields","data","model","axios","typeAction","res","_whereStateChange","value","setState","map","item","onSubmitForm","newProps","id","_resetForm","arrTitle","pt","pc","title","_getTitle","isOpen","onToggle","e","_onObjectChange","target","color","marginTop","height","defaultProps"],"mappings":"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","sourcesContent":["\r\n// HOOKS \r\nimport detectForm from '../../../hook/before/detectform';\r\n\r\nimport React, { Component } from 'react';\r\nimport {  Row, Col, FormGroup, Input  } from 'reactstrap';\r\n\r\n\r\nimport ViewModal from '../../../components/ViewModal'; \r\n\r\nimport InputNumeral from '../../../components/InputNumeral';\r\n\r\n\r\nimport SelectList from '../../../components/SelectList';\r\nimport SelectListModel from '../../../components/SelectListModel';\r\n\r\nconst FROM_OBJECTS = [\r\n    {code:'inv_code',name:'Đơn hàng bán số INV'},\r\n    {code:'po_code',name:'Đơn hàng mua Số PO'},\r\n    {code:'user_code',name:'Nhân viên'},\r\n    {code:'other_code',name:'Khác'},\r\n]\r\n\r\n\r\nexport default class MyForm extends Component {\r\n    \r\n\r\n    constructor(props){\r\n        super(props);\r\n\r\n        this.state = {}\r\n\r\n        this._onChange = this._onChange.bind(this) ; \r\n        this._onSubmit = this._onSubmit.bind(this);\r\n\r\n    }\r\n\r\n\r\n    _resetForm(){\r\n\r\n\r\n        return {\r\n          from_type:'inv_code',\r\n          ref_code:'',\r\n          refcode_name:'Đơn hàng bán số INV',\r\n          person_name:'',\r\n          person_address:'',\r\n          total:0,\r\n          total_before:0,\r\n          bill_account_id:0,\r\n          bank_ref:'',\r\n          reason:'',\r\n          type:this.props.receiptType, \r\n          note:''\r\n\r\n        }\r\n    }\r\n      \r\n    _onSubmit(){\r\n        const fields = [\r\n            'from_type','ref_code','person_name','person_address','total','bill_account_id','reason'\r\n        ];\r\n          \r\n        if(detectForm(fields,this.state)===''){\r\n            \r\n            const data = this.state ; \r\n            this.model.axios(this.props.typeAction,data,(res)=>{ \r\n                this._whereStateChange(res);               \r\n            });\r\n\r\n        }\r\n\r\n    }\r\n    \r\n    _onChange(name,value){\r\n        this.setState({ \r\n          [name]:value\r\n        });\r\n        \r\n    }\r\n\r\n    _onObjectChange(code){\r\n        \r\n        const refcode_name = FROM_OBJECTS.map((item)=>{  if(item.code===code){ return item.name } })\r\n        \r\n        this.setState({\r\n            refcode_name:refcode_name,\r\n            from_type:code\r\n        });\r\n\r\n\r\n\r\n    }\r\n    async componentDidMount(){\r\n        // INIT ORDERS MODEL\r\n        this.model =  this.props.model;  \r\n        \r\n        \r\n    }\r\n\r\n    _whereStateChange(res){\r\n\r\n        if(res.name==='success' || res.name ==='ok'){\r\n          this.props.onSubmitForm(res);\r\n        }\r\n        \r\n    }\r\n    componentWillReceiveProps(newProps){\r\n      \r\n        if(newProps.typeAction==='put'){\r\n  \r\n          const data = newProps.data; \r\n            \r\n          const state = {\r\n            \r\n            id:data.id,\r\n            code:data.code,\r\n            from_type:data.from_type,\r\n            ref_code:data.ref_code,\r\n            person_name:data.person_name,\r\n            person_address:data.person_address,\r\n            total:data.total,\r\n            total_before:data.total_before,\r\n            bill_account_id:data.bill_account_id,\r\n            bank_ref:data.bank_ref,\r\n            reason:data.reason,\r\n            type:data.type, \r\n            note:data.note\r\n            \r\n          }\r\n          \r\n          this.setState(state);\r\n  \r\n        }else{\r\n  \r\n  \r\n          let state = this._resetForm();\r\n          state.type = newProps.receiptType;\r\n          state.code = '';\r\n          this.setState(state); \r\n\r\n          \r\n        \r\n        }\r\n  \r\n        \r\n  \r\n    }\r\n\r\n    _getTitle(){\r\n\r\n        const arrTitle = {\r\n            pt:'Phiếu thu',\r\n            pc:'Phiếu chi'\r\n        }\r\n        \r\n        return arrTitle[this.props.receiptType] +' '+ this.state.code ;\r\n    }\r\n    render() {\r\n\r\n        const title = this._getTitle();\r\n\r\n        return ( \r\n            <ViewModal name={title}  isFooter={true} {...this.props} onSubmit={this._onSubmit}  onToggle={(isOpen)=>{ this.props.onToggle(isOpen) }}>\r\n                <div className=\"view-modal-body\">\r\n                    <FormGroup>\r\n                        <Row>\r\n                            \r\n                            <Col md={4}>    \r\n                                <label> Đối tượng </label>\r\n                                <SelectList \r\n                                    disabled={ this.props.typeAction === 'post' ? false : true }\r\n                                    onChange={(e)=>{ this._onObjectChange(e.target.value) }} \r\n                                    defaultValue={ this.state.from_type } id=\"from_type\" name=\"Vui lòng chọn\"\r\n                                    rows={ FROM_OBJECTS } \r\n                                />\r\n                            </Col>\r\n\r\n                            <Col md={4}>\r\n                                <label> { this.state.refcode_name } </label>\r\n                                <Input onChange={(e)=>{  this._onChange('ref_code',e.target.value) }} defaultValue={this.state.ref_code} type=\"text\" id=\"ref_code\" />\r\n                            </Col>\r\n                            \r\n                        </Row>\r\n                    </FormGroup>\r\n                    <FormGroup>\r\n                        <Row>\r\n                            <Col md={4}>\r\n                                <label> Tên đơn vị </label>\r\n                                <Input defaultValue={this.state.person_name} onChange={(e)=>{  this._onChange('person_name',e.target.value) }} id=\"person_name\" type=\"text\" />\r\n                            </Col>\r\n                            <Col md={8}>\r\n                                <label> Địa chỉ </label>\r\n                                <Input \r\n                                    defaultValue={this.state.person_address} \r\n                                    onChange={(e)=>{  this._onChange('person_address',e.target.value) }} id=\"person_address\" type=\"text\" \r\n                                />\r\n                            </Col>\r\n                        </Row>\r\n                    </FormGroup>\r\n                    <FormGroup>\r\n                        <Row>\r\n                            <Col md={4}>\r\n                                <label className=\"text-red\"> Số tiền </label>\r\n                                <InputNumeral defaultValue={this.state.total} onChange={(value)=>{  this._onChange('total',value) }} id=\"total\"  style={{color:'#DD4B59'}} />\r\n                            </Col>\r\n                            <Col md={4}>\r\n                                <label> Loại tài khoản </label>\r\n                                <SelectListModel id=\"bill_account_id\" \r\n                                    onChange={(e)=>{  this._onChange('bill_account_id',e.target.value) }} name=\"Vui lòng chọn\" strModel=\"bill_accounts\" \r\n                                    defaultValue={this.state.bill_account_id}\r\n                                />\r\n                            </Col>\r\n                            <Col md={4}> \r\n                                <label> Kèm theo </label>\r\n                                <Input defaultValue={this.state.bank_ref} onChange={(e)=>{  this._onChange('bank_ref',e.target.value) }} id=\"bank_ref\" type=\"text\" />\r\n                            </Col>\r\n                        </Row>\r\n                    </FormGroup>\r\n                    <FormGroup>\r\n                        <Row>\r\n                            <Col md={8}>\r\n                                <label> Lý do  </label>\r\n                                <Input defaultValue={this.state.reason} onChange={(e)=>{  this._onChange('reason',e.target.value) }} id=\"reason\" type=\"text\" />\r\n                            </Col>\r\n                        </Row>\r\n                        <Row style={{marginTop:20}}>\r\n                            <Col md={8}>\r\n                                <label>Ghi chú</label>\r\n                                <Input defaultValue={this.state.note} id=\"note\" onChange={(e)=>{  this._onChange('note',e.target.value) }} style={{height:100}} type=\"textarea\" />\r\n                            </Col>\r\n                        </Row>\r\n                    </FormGroup>\r\n\r\n\r\n                </div>\r\n            </ViewModal>\r\n        );\r\n    }\r\n}\r\n\r\nMyForm.defaultProps = {\r\n  receiptType:'pt',\r\n  typeAction:'post',\r\n  onToggle:()=>{},\r\n  onSubmitForm:()=>{}\r\n\r\n}"]},"metadata":{},"sourceType":"module"}