{"ast":null,"code":"import _defineProperty from \"D:\\\\actions\\\\st_frontend\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/defineProperty\";\nimport _classCallCheck from \"D:\\\\actions\\\\st_frontend\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"D:\\\\actions\\\\st_frontend\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"D:\\\\actions\\\\st_frontend\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"D:\\\\actions\\\\st_frontend\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"D:\\\\actions\\\\st_frontend\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/inherits\";\nimport _assertThisInitialized from \"D:\\\\actions\\\\st_frontend\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/assertThisInitialized\";\nvar _jsxFileName = \"D:\\\\actions\\\\st_frontend\\\\src\\\\pages\\\\Cashflow\\\\Setting\\\\BillAccountPage\\\\index.js\";\n\n/* OBJECT - PLUGIN*/\nimport Model from '../../../../model/model'; // HOOK ULTI \n\nimport moment from 'moment';\nimport React, { Component } from 'react';\nimport { connect } from 'react-redux';\n/*INCLUDE OTHER COMPONENT*/\n\nimport { BenGrid } from '../../../../components/BenGrid2';\nimport MyForm from './Form';\nvar MODE = 'bill_accounts';\nvar MODE_TAB = 'BillAccountPage';\nvar MODE_NAME = 'Tài khoản thu - chi';\n\nvar BillAccountPage =\n/*#__PURE__*/\nfunction (_Component) {\n  _inherits(BillAccountPage, _Component);\n\n  function BillAccountPage(props) {\n    var _this;\n\n    _classCallCheck(this, BillAccountPage);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(BillAccountPage).call(this, props));\n    _this._isData = false;\n    _this._curInfo = {};\n    _this.state = {\n      typeAction: '',\n      // post - put - delete ...\n      onAction: '',\n      // string method\n      status: '',\n      // status\n      tab: MODE_TAB,\n      isFormOpen: false\n    };\n    _this.grid = {\n      colums: [{\n        headerName: \"Tên\",\n        field: \"name\",\n        width: 270\n      }, {\n        headerName: \"Loại\",\n        field: \"type\",\n        width: 100,\n        cellRenderer: function cellRenderer(params) {\n          return \"<span class=\\\"text-uppercase\\\"> \".concat(params.value, \" </span>\");\n        }\n      }, {\n        headerName: \"Số TK\",\n        field: \"bank_no\",\n        width: 200\n      }, {\n        headerName: \"Ngân hàng\",\n        field: \"bank_name\",\n        width: 240\n      }, {\n        headerName: \"Người tạo\",\n        field: \"creator\",\n        width: 180\n      }, {\n        headerName: \"Ngày tạo\",\n        field: \"date_created\",\n        width: 140,\n        cellRenderer: function cellRenderer(params) {\n          var humanDate = params.value === null ? '<i class=\"fa fa-clock-o\"></i>' : moment(params.value).format('YYYY-MM-DD');\n          return \"\\n                \".concat(humanDate, \"\\n            \");\n        }\n      }],\n      rowData: []\n    };\n\n    _this._setup();\n\n    _this._doOpenModal = _this._doOpenModal.bind(_assertThisInitialized(_assertThisInitialized(_this)));\n    _this._doOpenModalUpdate = _this._doOpenModalUpdate.bind(_assertThisInitialized(_assertThisInitialized(_this)));\n    return _this;\n  }\n\n  _createClass(BillAccountPage, [{\n    key: \"_setup\",\n    value: function _setup() {\n      this.model = new Model(MODE, this.props.dispatch);\n    }\n  }, {\n    key: \"_doOpenModalUpdate\",\n    value: function _doOpenModalUpdate(data) {\n      this._curInfo = data;\n\n      this._whereStateChange({\n        typeAction: 'put',\n        isFormOpen: true\n      });\n    }\n  }, {\n    key: \"_doOpenModal\",\n    value: function _doOpenModal() {\n      this._whereStateChange({\n        typeAction: 'post',\n        isFormOpen: true\n      });\n    }\n  }, {\n    key: \"_onSubmitForm\",\n    value: function _onSubmitForm(res) {\n      this._curInfo = res.data;\n      var isOpen = res.name === 'success' || res.name === 'ok' ? false : true;\n      this.setState({\n        isFormOpen: isOpen,\n        typeAction: '',\n        status: res.name\n      });\n    }\n    /* HOW */\n\n    /* END HOW*/\n\n    /* WHEN*/\n\n  }, {\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      this.model.initData();\n    }\n  }, {\n    key: \"componentWillReceiveProps\",\n    value: function componentWillReceiveProps(newProps) {\n      this.grid.rowData = newProps[MODE]['list']; // CONNECT REDUX STATE \n\n      this._whereStateChange(newProps[MODE]['state']);\n    }\n    /* WHERE*/\n\n  }, {\n    key: \"_whereStateChange\",\n    value: function _whereStateChange(newState) {\n      this.setState(Object.assign(this.state, newState));\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this2 = this;\n\n      return React.createElement(\"div\", {\n        hidden: this.props.onTab === this.state.tab ? false : true,\n        style: {\n          padding: 10\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 129\n        },\n        __self: this\n      }, React.createElement(MyForm, {\n        name: MODE_NAME,\n        width: \"36%\",\n        model: this.model,\n        data: this._curInfo,\n        isOpen: this.state.isFormOpen,\n        typeAction: this.state.typeAction,\n        onToggle: function onToggle(isOpen) {\n          _this2.setState({\n            isFormOpen: isOpen\n          });\n        },\n        onSubmitForm: function onSubmitForm(res) {\n          _this2._onSubmitForm(res);\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 132\n        },\n        __self: this\n      }), React.createElement(BenGrid, {\n        height: \"77.5vh\",\n        gridID: \"id\",\n        onBtnEdit: this._doOpenModalUpdate,\n        onBtnAdd: this._doOpenModal,\n        onCellSelected: function onCellSelected(json) {\n          _this2._curInfo = json;\n        },\n        rowSelection: \"single\",\n        isRightTool: true,\n        nextColums: this.grid.colums,\n        rowData: this.grid.rowData,\n        model: this.model,\n        formStatus: this.state.status,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 143\n        },\n        __self: this\n      }));\n    }\n  }]);\n\n  return BillAccountPage;\n}(Component);\n\nfunction mapStateToProps(state) {\n  return _defineProperty({}, MODE, state[MODE]);\n}\n\nexport default connect(mapStateToProps)(BillAccountPage);","map":{"version":3,"sources":["D:/actions/st_frontend/src/pages/Cashflow/Setting/BillAccountPage/index.js"],"names":["Model","moment","React","Component","connect","BenGrid","MyForm","MODE","MODE_TAB","MODE_NAME","BillAccountPage","props","_isData","_curInfo","state","typeAction","onAction","status","tab","isFormOpen","grid","colums","headerName","field","width","cellRenderer","params","value","humanDate","format","rowData","_setup","_doOpenModal","bind","_doOpenModalUpdate","model","dispatch","data","_whereStateChange","res","isOpen","name","setState","initData","newProps","newState","Object","assign","onTab","padding","_onSubmitForm","json","mapStateToProps"],"mappings":"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","sourcesContent":["/* OBJECT - PLUGIN*/\r\nimport Model from '../../../../model/model';\r\n// HOOK ULTI \r\nimport moment from 'moment';\r\n\r\n\r\nimport React, { Component } from 'react';\r\nimport { connect } from 'react-redux';\r\n\r\n/*INCLUDE OTHER COMPONENT*/\r\nimport { BenGrid } from '../../../../components/BenGrid2';\r\nimport MyForm from './Form';\r\n\r\nconst MODE = 'bill_accounts';\r\nconst MODE_TAB = 'BillAccountPage';\r\nconst MODE_NAME = 'Tài khoản thu - chi';\r\n\r\n\r\nclass BillAccountPage extends Component{\r\n\r\n  _isData = false;\r\n  _curInfo = {};\r\n\r\n  constructor(props){\r\n    super(props);\r\n\r\n    this.state = {\r\n      typeAction:'', // post - put - delete ...\r\n      onAction:'', // string method\r\n      status:'', // status\r\n\r\n      tab:MODE_TAB,\r\n      isFormOpen:false\r\n      \r\n    }\r\n    \r\n    this.grid = {\r\n      colums:[\r\n        {headerName: \"Tên\", field: \"name\", width:270},\r\n        {headerName: \"Loại\", field: \"type\", width:100,\r\n          cellRenderer(params){\r\n            return `<span class=\"text-uppercase\"> ${params.value} </span>`\r\n          }\r\n        },\r\n        {headerName: \"Số TK\", field: \"bank_no\", width:200},\r\n        {headerName:\"Ngân hàng\",field:\"bank_name\",width:240},\r\n        {headerName: \"Người tạo\", field: \"creator\",width:180},\r\n        {headerName: \"Ngày tạo\", field: \"date_created\",width:140,\r\n          cellRenderer(params){\r\n            const humanDate =   params.value ===null ? '<i class=\"fa fa-clock-o\"></i>': moment(params.value).format('YYYY-MM-DD') ; \r\n                return `\r\n                ${ humanDate }\r\n            `\r\n          }\r\n        },\r\n\r\n      ],\r\n      rowData: []\r\n    }\r\n\r\n    this._setup();\r\n    this._doOpenModal = this._doOpenModal.bind(this); \r\n    this._doOpenModalUpdate = this._doOpenModalUpdate.bind(this); \r\n\r\n    \r\n  }\r\n\r\n  _setup(){\r\n    this.model = new Model(MODE,this.props.dispatch);\r\n    \r\n  }\r\n\r\n  _doOpenModalUpdate(data){\r\n    this._curInfo = data ; \r\n    this._whereStateChange({\r\n      typeAction:'put',\r\n      isFormOpen:true\r\n    });\r\n  }\r\n\r\n  _doOpenModal(){\r\n    \r\n    this._whereStateChange({\r\n      typeAction:'post',\r\n      isFormOpen:true\r\n    });\r\n\r\n  }\r\n\r\n  _onSubmitForm(res){\r\n    \r\n    this._curInfo = res.data; \r\n\r\n    const isOpen = res.name === 'success' || res.name === 'ok' ? false : true ;\r\n    this.setState({\r\n      isFormOpen:isOpen,\r\n      typeAction:'',\r\n      status:res.name\r\n    });\r\n\r\n  }\r\n\r\n\r\n  /* HOW */\r\n  /* END HOW*/\r\n\r\n  /* WHEN*/\r\n  componentDidMount(){\r\n    this.model.initData() ; \r\n  }\r\n  componentWillReceiveProps(newProps){\r\n    \r\n    this.grid.rowData = newProps[MODE]['list'];\r\n    // CONNECT REDUX STATE \r\n    this._whereStateChange(newProps[MODE]['state']);\r\n    \r\n  }\r\n  \r\n\r\n  /* WHERE*/\r\n  _whereStateChange(newState){\r\n    this.setState(Object.assign(this.state,newState));\r\n  }\r\n  \r\n\r\n  render(){\r\n    \r\n    return(\r\n      <div hidden={  this.props.onTab === this.state.tab ? false : true } style={{padding:10}} >\r\n\r\n          \r\n          <MyForm\r\n            name={ MODE_NAME }\r\n            width=\"36%\"\r\n\r\n            model={this.model}\r\n            data={this._curInfo}\r\n            isOpen={this.state.isFormOpen}\r\n            typeAction={ this.state.typeAction }\r\n            onToggle={(isOpen)=>{ this.setState({isFormOpen:isOpen}) }}\r\n            onSubmitForm={(res)=>{  this._onSubmitForm(res) }}\r\n          />\r\n          <BenGrid\r\n\r\n             height='77.5vh'\r\n             gridID=\"id\"\r\n             onBtnEdit={ this._doOpenModalUpdate }\r\n             onBtnAdd={this._doOpenModal}   \r\n             onCellSelected={(json)=>{ this._curInfo = json  }}\r\n             rowSelection='single'\r\n\r\n             isRightTool={ true }\r\n\r\n             nextColums={ this.grid.colums }\r\n             rowData={this.grid.rowData}\r\n             model={ this.model }\r\n             formStatus={this.state.status}\r\n\r\n             \r\n          />\r\n      </div>\r\n    )\r\n  }\r\n}\r\n\r\nfunction mapStateToProps(state){\r\n  return {\r\n     [MODE]:state[MODE]\r\n  }\r\n}\r\n\r\n\r\nexport default connect(mapStateToProps)(BillAccountPage)"]},"metadata":{},"sourceType":"module"}