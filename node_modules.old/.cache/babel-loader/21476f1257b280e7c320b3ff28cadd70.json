{"ast":null,"code":"import _classCallCheck from \"D:\\\\actions\\\\st_frontend\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"D:\\\\actions\\\\st_frontend\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"D:\\\\actions\\\\st_frontend\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"D:\\\\actions\\\\st_frontend\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"D:\\\\actions\\\\st_frontend\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/inherits\";\nimport _assertThisInitialized from \"D:\\\\actions\\\\st_frontend\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/assertThisInitialized\";\nvar _jsxFileName = \"D:\\\\actions\\\\st_frontend\\\\src\\\\pages\\\\pages\\\\PushSDK\\\\deviceCommandPage\\\\deviceControll.js\";\nimport React from 'react';\nimport { Label, Form, Input, FormGroup, Row, Col } from 'reactstrap';\nimport { preLoad } from '../../../../hook/before';\nimport axios from 'axios';\nimport server from '../../../../config/server';\nimport BenMessage from '../../../../components/BenMessage';\n\nvar DeviceControll =\n/*#__PURE__*/\nfunction (_React$Component) {\n  _inherits(DeviceControll, _React$Component);\n\n  function DeviceControll(props) {\n    var _this;\n\n    _classCallCheck(this, DeviceControll);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(DeviceControll).call(this, props));\n    _this.state = {\n      typeAction: '',\n      // post - put - delete ...\n      onAction: '',\n      // string method\n      status: '',\n      // status\n      tab: 'deviceControll',\n      devices: [],\n      curSerial: '',\n      indexCommand: 0,\n      command: '',\n      commands: [\"CONTROL DEVICE 01010103\", \"CONTROL DEVICE 02000000\", \"CONTROL DEVICE 03000000\"],\n      commandActions: ['Open Door 1', 'Cancel all alarm', 'Reboot device'],\n      commandRes: \"\"\n    };\n    _this._submitCommand = _this._submitCommand.bind(_assertThisInitialized(_assertThisInitialized(_this)));\n    return _this;\n  }\n\n  _createClass(DeviceControll, [{\n    key: \"trim\",\n    value: function trim(str) {\n      return str.replace(/(^\\s*)/g, \"\");\n    }\n  }, {\n    key: \"_submitCommand\",\n    value: function _submitCommand() {\n      var _this2 = this;\n\n      var cmd = this.trim(this.state.command).trim();\n      var url = server.base() + '/pushapi/createCmd?cmdType=userDefined&sn=' + this.state.curSerial.trim();\n\n      if (this.state.curSerial !== '' && this.state.command !== '') {\n        preLoad('post');\n        axios.post(url, {\n          \"originalCmd\": cmd\n        }).then(function (responese) {\n          var res = responese.data;\n\n          if (res.desc === 'ok') {\n            preLoad('stop');\n\n            _this2.setState({\n              commandRes: JSON.stringify(res, undefined, 2)\n            });\n          }\n        });\n      } else {\n        BenMessage({\n          message: 'Vui lòng chọn thiết bị và hạng mục cần thao tác'\n        });\n      }\n    }\n  }, {\n    key: \"_onChangeSerial\",\n    value: function _onChangeSerial(e) {\n      var sn = e.target.value;\n\n      if (sn !== '') {\n        this.setState({\n          curSerial: sn\n        });\n      }\n    }\n  }, {\n    key: \"_onChangeCommandAction\",\n    value: function _onChangeCommandAction(e) {\n      var index = parseInt(e.target.value);\n      var cmd = this.state.commands[index];\n      this.setState({\n        command: cmd,\n        indexCommand: index\n      });\n    }\n  }, {\n    key: \"_queryCommandStatus\",\n    value: function _queryCommandStatus() {\n      var _this3 = this;\n\n      var url = server.base() + '/pushapi/cmdServlet';\n      axios.post(url).then(function (responese) {\n        var res = responese.data;\n\n        if (res.desc === 'ok') {\n          console.log(res);\n\n          _this3.setState({\n            commandRes: res.cmdData === \"\" ? 'listening..' : res.cmdData\n          });\n        }\n      });\n    }\n  }, {\n    key: \"_queryListDevice\",\n    value: function _queryListDevice() {\n      var _this4 = this;\n\n      var url = server.base() + '/pushapi/deviceServlet?type=1';\n      axios.post(url).then(function (responese) {\n        var res = responese.data;\n\n        if (res.desc === 'ok') {\n          _this4.setState({\n            devices: res.data\n          });\n        }\n      });\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this5 = this;\n\n      var displayCmd = {\n        \"originalCmd\": this.state.command\n      };\n      return React.createElement(\"div\", {\n        hidden: this.props.onTab === this.state.tab ? false : true,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 149\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"guidebook\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 150\n        },\n        __self: this\n      }, React.createElement(\"h3\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 151\n        },\n        __self: this\n      }, \" Thao t\\xE1c : Devices Controll \"), React.createElement(\"p\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 152\n        },\n        __self: this\n      }, \"  Ph\\u1EA7n n\\xE0y l\\xE0 h\\u01B0\\u1EDBng d\\u1EA9n cho ch\\u01B0\\u01A1ng tr\\xECnh demo v\\u1EC1 Devices Controll   \"), React.createElement(\"h5\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 154\n        },\n        __self: this\n      }, \" Request \"), React.createElement(\"ul\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 155\n        },\n        __self: this\n      }, React.createElement(\"li\", {\n        style: {\n          fontSize: 14\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 156\n        },\n        __self: this\n      }, \" Method : POST \"), React.createElement(\"li\", {\n        style: {\n          fontSize: 14\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 157\n        },\n        __self: this\n      }, \"cURL: /pushapi/createCmd?cmdType=userDefined&sn=\", React.createElement(\"span\", {\n        className: \"txt-green\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 158\n        },\n        __self: this\n      }, \" \", this.state.curSerial, \" \"), React.createElement(\"pre\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 159\n        },\n        __self: this\n      }, JSON.stringify(displayCmd, undefined, 2)))), React.createElement(FormGroup, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 169\n        },\n        __self: this\n      }, React.createElement(Row, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 170\n        },\n        __self: this\n      }, React.createElement(Col, {\n        md: \"3\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 171\n        },\n        __self: this\n      }, React.createElement(Label, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 172\n        },\n        __self: this\n      }, \" Ph\\u01B0\\u01A1ng th\\u1EE9c CURD \"), React.createElement(Input, {\n        onChange: function onChange(e) {\n          _this5._onChangeCommandAction(e);\n        },\n        type: \"select\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 173\n        },\n        __self: this\n      }, React.createElement(\"option\", {\n        key: \"\",\n        value: \"\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 174\n        },\n        __self: this\n      }, \" Vui l\\xF2ng ch\\u1ECDn \"), this.state.commandActions.map(function (item, index) {\n        return React.createElement(\"option\", {\n          key: index,\n          value: index,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 178\n          },\n          __self: this\n        }, \" \", item, \" \");\n      }))), React.createElement(Col, {\n        md: 3,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 184\n        },\n        __self: this\n      }, React.createElement(Label, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 185\n        },\n        __self: this\n      }, \" Ch\\u1ECDn serial thi\\u1EBFt b\\u1ECB \"), React.createElement(Input, {\n        onChange: function onChange(e) {\n          _this5._onChangeSerial(e);\n        },\n        type: \"select\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 186\n        },\n        __self: this\n      }, React.createElement(\"option\", {\n        key: \"\",\n        value: \"\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 187\n        },\n        __self: this\n      }, \" Vui l\\xF2ng ch\\u1ECDn \"), this.props.devices.map(function (item, index) {\n        return React.createElement(\"option\", {\n          key: index,\n          value: item.sn,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 191\n          },\n          __self: this\n        }, \" \", item.sn + '---' + item.DeviceName, \" \");\n      }))))), React.createElement(FormGroup, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 200\n        },\n        __self: this\n      }, React.createElement(Row, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 201\n        },\n        __self: this\n      }, React.createElement(Col, {\n        md: 12,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 202\n        },\n        __self: this\n      }, React.createElement(Label, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 203\n        },\n        __self: this\n      }, \" Device native Command :\", React.createElement(\"span\", {\n        className: \"txt-red ml-5\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 204\n        },\n        __self: this\n      }, \"C\\xE2u l\\u1EC7nh command s\\u1EBD l\\u01B0u d\\u1EA1ng text file\\uFF0Cv\\xE0 nh\\u1EEFng k\\xFD t\\u1EF1 \\u201C\\\\t\\u201D c\\u1EA7n thay th\\u1EBF b\\u1EB1ng \\u201CTab\\u201D string kh\\xF4ng d\\u1EA5u ti\\u1EBFng vi\\u1EC7t\")), React.createElement(Input, {\n        style: {\n          background: '#000',\n          color: '#ddd'\n        },\n        onChange: function onChange(e) {\n          _this5.setState({\n            command: e.target.value\n          });\n        },\n        value: this.state.command,\n        type: \"text\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 205\n        },\n        __self: this\n      }))), React.createElement(Row, {\n        style: {\n          marginTop: 20\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 216\n        },\n        __self: this\n      }, React.createElement(Col, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 217\n        },\n        __self: this\n      }, React.createElement(\"button\", {\n        onClick: this._submitCommand,\n        className: \"btn btn-success\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 218\n        },\n        __self: this\n      }, \" RUN \")))), React.createElement(\"h5\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 224\n        },\n        __self: this\n      }, \" Responese \"), React.createElement(\"pre\", {\n        style: {\n          background: '#000',\n          color: '#ddd',\n          padding: 20,\n          height: 300,\n          overflowY: 'auto'\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 225\n        },\n        __self: this\n      }, this.state.commandRes)));\n    }\n  }]);\n\n  return DeviceControll;\n}(React.Component);\n\nexport { DeviceControll as default };","map":{"version":3,"sources":["D:/actions/st_frontend/src/pages/pages/PushSDK/deviceCommandPage/deviceControll.js"],"names":["React","Label","Form","Input","FormGroup","Row","Col","preLoad","axios","server","BenMessage","DeviceControll","props","state","typeAction","onAction","status","tab","devices","curSerial","indexCommand","command","commands","commandActions","commandRes","_submitCommand","bind","str","replace","cmd","trim","url","base","post","then","responese","res","data","desc","setState","JSON","stringify","undefined","message","e","sn","target","value","index","parseInt","console","log","cmdData","displayCmd","onTab","fontSize","_onChangeCommandAction","map","item","_onChangeSerial","DeviceName","background","color","marginTop","padding","height","overflowY","Component"],"mappings":"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","sourcesContent":["import React from 'react';\r\n\r\n\r\n\r\nimport {  Label,  Form, Input, FormGroup, Row, Col } from 'reactstrap';\r\nimport { preLoad } from '../../../../hook/before';\r\n\r\nimport axios from 'axios';\r\nimport server from '../../../../config/server';\r\n\r\n\r\nimport BenMessage from '../../../../components/BenMessage';\r\n\r\n\r\nexport default class DeviceControll extends React.Component {\r\n\r\n  constructor(props){\r\n    super(props);\r\n\r\n    this.state = {\r\n      typeAction:'', // post - put - delete ...\r\n      onAction:'', // string method\r\n      status:'', // status\r\n\r\n      tab:'deviceControll',  \r\n        \r\n      devices:[],\r\n      curSerial:'',\r\n      \r\n      indexCommand:0,\r\n      command:'',\r\n      commands:[\r\n            \"CONTROL DEVICE 01010103\",\r\n            \"CONTROL DEVICE 02000000\",\r\n            \"CONTROL DEVICE 03000000\"\r\n      ],\r\n\r\n      commandActions:[\r\n          'Open Door 1',\r\n          'Cancel all alarm',\r\n          'Reboot device'\r\n      ],\r\n      commandRes:``\r\n\r\n    }\r\n\r\n    this._submitCommand = this._submitCommand.bind(this);\r\n    \r\n  }\r\n\r\n  trim(str){\r\n    return str.replace(/(^\\s*)/g,\"\");  \r\n  }\r\n  _submitCommand(){\r\n\r\n    let cmd = this.trim(this.state.command).trim();\r\n    const url = server.base()+'/pushapi/createCmd?cmdType=userDefined&sn='+this.state.curSerial.trim();\r\n      \r\n    \r\n    if(this.state.curSerial!=='' && this.state.command !==''){\r\n      preLoad('post');\r\n      axios.post(url,{\r\n\r\n        \"originalCmd\":cmd\r\n      }).then((responese)=>{\r\n        const res = responese.data ;\r\n        \r\n        \r\n        \r\n        if(res.desc==='ok'){\r\n\r\n          preLoad('stop');\r\n          this.setState({\r\n            commandRes: JSON.stringify(res, undefined, 2)\r\n        });\r\n\r\n        }\r\n      });\r\n    }else{ \r\n      BenMessage({\r\n          message:'Vui lòng chọn thiết bị và hạng mục cần thao tác'\r\n      }) \r\n    }\r\n\r\n    \r\n\r\n  }\r\n  _onChangeSerial(e){\r\n      const sn = e.target.value;\r\n      \r\n      if(sn!==''){\r\n        this.setState({\r\n            curSerial:sn\r\n        })\r\n      }\r\n  }\r\n  _onChangeCommandAction(e){\r\n    const index = parseInt(e.target.value);\r\n\r\n    const cmd = this.state.commands[index];\r\n\r\n\r\n    this.setState({\r\n        command:cmd,\r\n        indexCommand:index\r\n    });\r\n    \r\n  }\r\n\r\n\r\n  _queryCommandStatus(){\r\n    const url = server.base()+'/pushapi/cmdServlet';\r\n    axios.post(url).then((responese)=>{\r\n        const res = responese.data ;\r\n        \r\n        if(res.desc==='ok'){\r\n          console.log(res);\r\n          this.setState({\r\n              commandRes:res.cmdData === \"\" ? 'listening..' :res.cmdData\r\n          });\r\n\r\n  \r\n        }\r\n      });\r\n  }\r\n\r\n  _queryListDevice(){\r\n    const url = server.base()+'/pushapi/deviceServlet?type=1';\r\n    axios.post(url).then((responese)=>{\r\n      const res = responese.data ;\r\n      if(res.desc==='ok'){\r\n\r\n        \r\n        this.setState({\r\n            devices:res.data\r\n        });\r\n\r\n      }\r\n    });\r\n  }\r\n\r\n  \r\n  render() {\r\n\r\n    const displayCmd = {\r\n      \"originalCmd\":this.state.command\r\n    }\r\n    return (\r\n      <div hidden={  this.props.onTab === this.state.tab ? false : true } >\r\n          <div className=\"guidebook\">\r\n            <h3> Thao tác : Devices Controll </h3>\r\n            <p>  Phần này là hướng dẩn cho chương trình demo về Devices Controll   </p>\r\n            \r\n            <h5> Request </h5>\r\n            <ul>\r\n                <li style={{fontSize:14}}> Method : POST </li>\r\n                <li style={{fontSize:14}}> \r\n                    cURL: /pushapi/createCmd?cmdType=userDefined&sn=<span className=\"txt-green\"> { this.state.curSerial } </span>\r\n                    <pre>\r\n                      {\r\n                        JSON.stringify(displayCmd,undefined,2)\r\n                      }\r\n                    </pre>\r\n                </li>\r\n                \r\n            </ul>\r\n\r\n\r\n            <FormGroup>\r\n                <Row>\r\n                    <Col md=\"3\">\r\n                        <Label> Phương thức CURD </Label>\r\n                        <Input onChange={ (e)=>{ this._onChangeCommandAction(e) } } type=\"select\">\r\n                            <option key=\"\"  value=\"\"> Vui lòng chọn </option>\r\n                            {\r\n                                this.state.commandActions.map((item,index)=>{\r\n                                    return(\r\n                                        <option key={index} value={index} > { item } </option>\r\n                                    )\r\n                                })\r\n                            }\r\n                        </Input>\r\n                    </Col>\r\n                    <Col md={3}>\r\n                        <Label> Chọn serial thiết bị </Label>\r\n                        <Input onChange={(e)=>{ this._onChangeSerial(e) }} type=\"select\">\r\n                            <option key=\"\"  value=\"\"> Vui lòng chọn </option>\r\n                            {\r\n                                this.props.devices.map((item,index)=>{\r\n                                    return(\r\n                                        <option key={index} value={item.sn}> { item.sn+'---'+item.DeviceName } </option>\r\n                                    )\r\n                                })\r\n                            }\r\n                        </Input>\r\n                    </Col>\r\n                    \r\n                </Row>\r\n            </FormGroup>\r\n            <FormGroup>\r\n                <Row>\r\n                    <Col md={12}>\r\n                        <Label> Device native Command :   \r\n                        <span className=\"txt-red ml-5\">Câu lệnh command sẽ lưu dạng text file，và những ký tự “\\t” cần thay thế bằng “Tab” string không dấu tiếng việt</span></Label>\r\n                         <Input style={{\r\n                           background:'#000',\r\n                           color:'#ddd'\r\n                         }} onChange={(e)=>{\r\n                            this.setState({\r\n                              command:e.target.value\r\n                            })\r\n                         }} value={ this.state.command } type=\"text\" />\r\n                        \r\n                    </Col>\r\n                </Row>\r\n                <Row style={{marginTop:20}}>\r\n                    <Col>\r\n                        <button onClick={ this._submitCommand } className=\"btn btn-success\"> RUN </button>                                \r\n                    </Col>\r\n                </Row>\r\n            </FormGroup>\r\n            \r\n           \r\n            <h5> Responese </h5>\r\n            <pre style={{background:'#000', color:'#ddd', padding:20, height:300, overflowY:'auto'}}>\r\n                { this.state.commandRes }\r\n            </pre>\r\n            \r\n            \r\n\r\n          </div>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n"]},"metadata":{},"sourceType":"module"}