{"ast":null,"code":"import _regeneratorRuntime from \"D:\\\\actions\\\\st_frontend\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/regenerator\";\nimport _asyncToGenerator from \"D:\\\\actions\\\\st_frontend\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/asyncToGenerator\";\nimport _defineProperty from \"D:\\\\actions\\\\st_frontend\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/defineProperty\";\nimport _classCallCheck from \"D:\\\\actions\\\\st_frontend\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"D:\\\\actions\\\\st_frontend\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"D:\\\\actions\\\\st_frontend\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"D:\\\\actions\\\\st_frontend\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"D:\\\\actions\\\\st_frontend\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/inherits\";\nimport _assertThisInitialized from \"D:\\\\actions\\\\st_frontend\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/assertThisInitialized\";\nvar _jsxFileName = \"D:\\\\actions\\\\st_frontend\\\\src\\\\pages\\\\iservice\\\\tickets\\\\Form.js\";\nimport detectForm from '../../../hook/before/detectform';\nimport { ISERVICE_TYPES } from '../../../config/app.config'; // LIBS \n\nimport moment from 'moment';\nimport numeral from 'numeral';\nimport { myTime } from '../../../hook/ultil/myTime';\nimport React, { Component } from 'react';\nimport { Row, Col, FormGroup, Input, ButtonGroup, Button } from 'reactstrap';\nimport DatePicker from 'react-datepicker';\nimport \"react-datepicker/dist/react-datepicker.css\";\nimport SelectList from '../../../components/SelectList';\nimport InputSuggestOrder from '../../../components/InputSuggestOrder';\nimport InputSuggest from '../../../components/InputSuggest';\nimport InputSuggestProduct from '../../../components/InputSuggestProduct';\nimport BenTable from '../../../components/BenTable';\nimport SelectHour from '../../../components/SelectHour';\nimport SelectMinute from '../../../components/SelectMinute';\nimport ViewModal from '../../../components/ViewModal';\nvar FROM_OBJECTS = [{\n  code: 'inv_code',\n  name: 'Đơn hàng bán'\n}, {\n  code: 'customer_code',\n  name: 'Khách hàng'\n}];\n\nvar MyForm =\n/*#__PURE__*/\nfunction (_Component) {\n  _inherits(MyForm, _Component);\n\n  function MyForm(props) {\n    var _this;\n\n    _classCallCheck(this, MyForm);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(MyForm).call(this, props));\n\n    _this._clearCart = function () {\n      _this.grid.rowData = [];\n\n      _this.setState({\n        status: '_clearCart'\n      });\n    };\n\n    _this.state = {\n      code: '',\n      customer_info: {\n        name: '',\n        address_delivery: '',\n        phone: ''\n      },\n      startDate: new Date(myTime.curDateEn()),\n      hour: 0,\n      minute: 0\n    };\n    _this.grid = {\n      colums: [{\n        headerName: 'Mã',\n        field: 'code',\n        width: '100px'\n      }, {\n        headerName: 'Dịch vụ',\n        field: 'name',\n        width: '200px'\n      }, {\n        headerName: 'Đơn giá',\n        field: 'price',\n        width: '90px'\n      }],\n      rowData: []\n    };\n    _this._onChange = _this._onChange.bind(_assertThisInitialized(_assertThisInitialized(_this)));\n    _this._onSubmit = _this._onSubmit.bind(_assertThisInitialized(_assertThisInitialized(_this)));\n    return _this;\n  }\n\n  _createClass(MyForm, [{\n    key: \"_addCart\",\n    value: function _addCart(json) {\n      var item = {\n        id: json.id,\n        code: json.code,\n        unit: json.unit_name,\n        name: json.name,\n        price: numeral(json.price_4).format('0,0'),\n        amount: 1\n      };\n      this.grid.rowData.push(item);\n      this.setState({\n        status: '_addCart'\n      });\n    }\n  }, {\n    key: \"_onSubmit\",\n    value: function _onSubmit() {\n      var _this2 = this;\n\n      var fields = ['from_type', 'ref_code', 'belong_user', 'content_issue'];\n\n      if (detectForm(fields, this.state) === '') {\n        var date_arrived = moment(this.state.startDate).format('YYYY-MM-DD') + ' ' + this.state.hour + ':' + this.state.minute;\n        var data = this.state;\n        data.date_arrived = date_arrived;\n        data.cart = this.grid.rowData;\n        delete data.startDate;\n        delete data.hour;\n        delete data.minute;\n        this.model.axios(this.props.typeAction, data, function (res) {\n          _this2._whereStateChange(res);\n        });\n      }\n    }\n  }, {\n    key: \"_onChange\",\n    value: function _onChange(name, value) {\n      this.setState(_defineProperty({}, name, value));\n    }\n  }, {\n    key: \"_getTitle\",\n    value: function _getTitle() {\n      var type = this.props.receiptType === '' ? 'osv' : this.props.receiptType;\n      return ISERVICE_TYPES[type]['name'];\n    }\n  }, {\n    key: \"_resetForm\",\n    value: function _resetForm() {\n      this.grid.rowData = [];\n      return {\n        type: this.props.receiptType,\n        from_type: 'inv_code',\n        ref_code: '',\n        refcode_name: 'Đơn hàng bán',\n        customer_code: '',\n        customer_info: {\n          name: '',\n          address_delivery: '',\n          phone: ''\n        },\n        content_issue: '',\n        belong_user: '',\n        cart: []\n      };\n    }\n  }, {\n    key: \"_onChangeRefcodeCustomer\",\n    value: function _onChangeRefcodeCustomer(item) {\n      this.setState({\n        ref_code: item.code,\n        customer_code: item.code,\n        customer_info: {\n          name: item.name,\n          address_delivery: item.address,\n          phone: item.phone\n        }\n      });\n    }\n  }, {\n    key: \"_onChangeRefcode\",\n    value: function _onChangeRefcode(item) {\n      var cusInfo = JSON.parse(item.customer_info);\n      this.setState({\n        ref_code: item.code_pi,\n        customer_code: cusInfo.code,\n        customer_info: cusInfo\n      });\n    }\n  }, {\n    key: \"_onCustomerChange\",\n    value: function _onCustomerChange(name, value) {\n      var cusInfo = this.state.customer_info;\n      cusInfo[name] = value;\n      this.setState({\n        customer_info: cusInfo\n      });\n    }\n  }, {\n    key: \"_onObjectChange\",\n    value: function _onObjectChange(code) {\n      var refcode_name = FROM_OBJECTS.map(function (item) {\n        if (item.code === code) {\n          return item.name;\n        }\n      });\n      this.setState({\n        refcode_name: refcode_name,\n        from_type: code\n      });\n    }\n  }, {\n    key: \"componentDidMount\",\n    value: function () {\n      var _componentDidMount = _asyncToGenerator(\n      /*#__PURE__*/\n      _regeneratorRuntime.mark(function _callee() {\n        return _regeneratorRuntime.wrap(function _callee$(_context) {\n          while (1) {\n            switch (_context.prev = _context.next) {\n              case 0:\n                // INIT ORDERS MODEL\n                this.model = this.props.model;\n\n              case 1:\n              case \"end\":\n                return _context.stop();\n            }\n          }\n        }, _callee, this);\n      }));\n\n      function componentDidMount() {\n        return _componentDidMount.apply(this, arguments);\n      }\n\n      return componentDidMount;\n    }()\n  }, {\n    key: \"_whereStateChange\",\n    value: function _whereStateChange(res) {\n      if (res.name === 'success' || res.name === 'ok') {\n        this.props.onSubmitForm(res);\n      }\n    }\n  }, {\n    key: \"componentWillReceiveProps\",\n    value: function componentWillReceiveProps(newProps) {\n      var state = {};\n\n      if (newProps.typeAction === 'post') {\n        state = this._resetForm();\n        this.setState(state);\n      } else if (newProps.typeAction === 'put') {\n        if (JSON.stringify(newProps.data) !== '{}') {\n          var data = newProps.data;\n          var cusInfo = JSON.parse(data.customer_info);\n          var startDate = moment(data.date_arrived).format('YYYY-MM-DD');\n          var hh = moment(data.date_arrived).format('HH');\n          var mm = moment(data.date_arrived).format('mm');\n          this.grid.rowData = data.cart !== null ? JSON.parse(data.cart) : [];\n          state = {\n            id: data.id,\n            code: data.code,\n            type: data.type,\n            from_type: data.from_type,\n            ref_code: data.ref_code,\n            refcode_name: 'Đơn hàng bán',\n            customer_code: data.customer_code,\n            customer_info: cusInfo,\n            content_issue: data.content_issue,\n            belong_user: data.belong_user,\n            startDate: new Date(startDate),\n            hour: hh,\n            minute: mm\n          };\n          this.setState(state);\n        }\n      }\n    }\n  }, {\n    key: \"RefCode\",\n    value: function RefCode(from_type) {\n      var _this3 = this;\n\n      var arr = {\n        inv_code: React.createElement(\"div\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 293\n          },\n          __self: this\n        }, React.createElement(\"label\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 294\n          },\n          __self: this\n        }, \" M\\xE3 ch\\u1EE9ng t\\u1EEB \"), React.createElement(InputSuggestOrder, {\n          id: \"ref_code\",\n          onSelected: function onSelected(item) {\n            _this3._onChangeRefcode(item);\n          },\n          defaultValue: this.state.ref_code,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 295\n          },\n          __self: this\n        })),\n        customer_code: React.createElement(\"div\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 297\n          },\n          __self: this\n        }, React.createElement(\"label\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 298\n          },\n          __self: this\n        }, \" M\\xE3 kh\\xE1ch h\\xE0ng \"), React.createElement(InputSuggest, {\n          strModel: \"customers\",\n          onSelected: function onSelected(item) {\n            _this3._onChangeRefcodeCustomer(item);\n          },\n          id: \"ref_code\",\n          defaultValue: this.state.ref_code,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 299\n          },\n          __self: this\n        }))\n      };\n      return arr[from_type];\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this4 = this;\n\n      var title = this._getTitle();\n\n      var cusInfo = this.state.customer_info;\n      return React.createElement(ViewModal, Object.assign({\n        name: title,\n        isFooter: true\n      }, this.props, {\n        onSubmit: this._onSubmit,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 316\n        },\n        __self: this\n      }), React.createElement(\"div\", {\n        className: \"view-modal-body\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 317\n        },\n        __self: this\n      }, React.createElement(Row, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 318\n        },\n        __self: this\n      }, React.createElement(Col, {\n        md: 8,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 321\n        },\n        __self: this\n      }, React.createElement(FormGroup, {\n        row: true,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 323\n        },\n        __self: this\n      }, React.createElement(Col, {\n        md: 6,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 324\n        },\n        __self: this\n      }, React.createElement(\"label\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 325\n        },\n        __self: this\n      }, \" Phi\\u1EBFu theo \"), React.createElement(SelectList, {\n        onChange: function onChange(e) {\n          _this4._onObjectChange(e.target.value);\n        },\n        defaultValue: this.state.from_type,\n        id: \"from_type\",\n        name: \"Vui l\\xF2ng ch\\u1ECDn\",\n        rows: FROM_OBJECTS,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 326\n        },\n        __self: this\n      })), React.createElement(Col, {\n        md: 6,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 333\n        },\n        __self: this\n      }, this.RefCode(this.state.from_type))), React.createElement(FormGroup, {\n        row: true,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 339\n        },\n        __self: this\n      }, React.createElement(Col, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 340\n        },\n        __self: this\n      }, React.createElement(\"label\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 341\n        },\n        __self: this\n      }, \" D\\u1ECBch v\\u1EE5 \"), React.createElement(\"span\", {\n        onClick: this._clearCart,\n        className: \"pull-right pointer\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 342\n        },\n        __self: this\n      }, React.createElement(\"small\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 343\n        },\n        __self: this\n      }, \" Xo\\xE1  \")), React.createElement(InputSuggestProduct, {\n        type: \"SERVICE\",\n        onSelected: function onSelected(json) {\n          _this4._addCart(json);\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 345\n        },\n        __self: this\n      }))), React.createElement(FormGroup, {\n        row: true,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 349\n        },\n        __self: this\n      }, React.createElement(Col, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 350\n        },\n        __self: this\n      }, React.createElement(BenTable, {\n        height: \"333px\",\n        grid: this.grid,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 351\n        },\n        __self: this\n      })))), React.createElement(Col, {\n        md: 4,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 360\n        },\n        __self: this\n      }, React.createElement(FormGroup, {\n        row: true,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 361\n        },\n        __self: this\n      }, React.createElement(Col, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 362\n        },\n        __self: this\n      }, React.createElement(\"label\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 363\n        },\n        __self: this\n      }, \" Kh\\xE1ch h\\xE0ng \"), React.createElement(Input, {\n        defaultValue: cusInfo['name'],\n        type: \"text\",\n        onChange: function onChange(e) {\n          _this4._onCustomerChange('name', e.target.value);\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 364\n        },\n        __self: this\n      }))), React.createElement(FormGroup, {\n        row: true,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 372\n        },\n        __self: this\n      }, React.createElement(Col, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 373\n        },\n        __self: this\n      }, React.createElement(\"label\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 374\n        },\n        __self: this\n      }, \" S\\u0110T \"), React.createElement(Input, {\n        type: \"text\",\n        onChange: function onChange(e) {\n          _this4._onCustomerChange('phone', e.target.value);\n        },\n        defaultValue: cusInfo['phone'],\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 375\n        },\n        __self: this\n      }))), React.createElement(FormGroup, {\n        row: true,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 383\n        },\n        __self: this\n      }, React.createElement(Col, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 384\n        },\n        __self: this\n      }, React.createElement(\"label\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 385\n        },\n        __self: this\n      }, \" \\u0110\\u1ECBa ch\\u1EC9 \"), React.createElement(Input, {\n        type: \"text\",\n        onChange: function onChange(e) {\n          _this4._onCustomerChange('address_delivery', e.target.value);\n        },\n        defaultValue: cusInfo['address_delivery'],\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 386\n        },\n        __self: this\n      }))), React.createElement(FormGroup, {\n        row: true,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 394\n        },\n        __self: this\n      }, React.createElement(Col, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 395\n        },\n        __self: this\n      }, React.createElement(\"label\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 396\n        },\n        __self: this\n      }, \" Ng\\u01B0\\u1EDDi ph\\u1EE5 tr\\xE1ch \"), React.createElement(InputSuggest, {\n        strModel: \"users\",\n        code: \"username\",\n        onSelected: function onSelected(value) {\n          _this4._onChange('belong_user', value.username);\n        },\n        defaultValue: this.state.belong_user,\n        id: \"belong_user\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 397\n        },\n        __self: this\n      }))), React.createElement(FormGroup, {\n        row: true,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 406\n        },\n        __self: this\n      }, React.createElement(Col, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 407\n        },\n        __self: this\n      }, React.createElement(\"label\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 408\n        },\n        __self: this\n      }, \" L\\u1ECBch h\\u1EB9n \\u0111\\u1EBFn \"), React.createElement(\"div\", {\n        style: {\n          'clear': 'both'\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 409\n        },\n        __self: this\n      }, React.createElement(ButtonGroup, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 410\n        },\n        __self: this\n      }, React.createElement(Button, {\n        style: {\n          background: '#fff',\n          borderRight: 0\n        },\n        disabled: true,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 411\n        },\n        __self: this\n      }, \" \", React.createElement(\"i\", {\n        className: \"fa fa-calendar\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 411\n        },\n        __self: this\n      }), \" \"), React.createElement(DatePicker, {\n        onChange: function onChange(date) {\n          _this4.setState({\n            startDate: date\n          });\n        },\n        dateFormat: \"yyyy-MM-dd\",\n        selected: this.state.startDate,\n        className: \"input-datepicker\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 412\n        },\n        __self: this\n      }), React.createElement(SelectHour, {\n        onChange: function onChange(e) {\n          _this4.setState({\n            hour: e.target.value\n          });\n        },\n        defaultValue: this.state.hour,\n        style: {\n          borderRadius: 0,\n          borderLeft: 0,\n          height: 37\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 421\n        },\n        __self: this\n      }), React.createElement(SelectMinute, {\n        onChange: function onChange(e) {\n          _this4.setState({\n            minute: e.target.value\n          });\n        },\n        defaultValue: this.state.minute,\n        style: {\n          borderRadius: 0,\n          borderLeft: 0,\n          width: 120,\n          height: 37\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 426\n        },\n        __self: this\n      }))))), React.createElement(FormGroup, {\n        row: true,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 436\n        },\n        __self: this\n      }, React.createElement(Col, {\n        md: 12,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 437\n        },\n        __self: this\n      }, React.createElement(\"label\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 438\n        },\n        __self: this\n      }, \" M\\xF4 t\\u1EA3 v\\u1EA5n \\u0111\\u1EC1 \"), React.createElement(Input, {\n        id: \"content_issue\",\n        onChange: function onChange(e) {\n          _this4._onChange('content_issue', e.target.value);\n        },\n        defaultValue: this.state.content_issue,\n        type: \"textarea\",\n        style: {\n          height: 120\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 439\n        },\n        __self: this\n      })))))));\n    }\n  }]);\n\n  return MyForm;\n}(Component);\n\nexport { MyForm as default };\nMyForm.defaultProps = {\n  onToggle: function onToggle() {},\n  onSubmitForm: function onSubmitForm() {},\n  receiptType: 'osv'\n};","map":{"version":3,"sources":["D:/actions/st_frontend/src/pages/iservice/tickets/Form.js"],"names":["detectForm","ISERVICE_TYPES","moment","numeral","myTime","React","Component","Row","Col","FormGroup","Input","ButtonGroup","Button","DatePicker","SelectList","InputSuggestOrder","InputSuggest","InputSuggestProduct","BenTable","SelectHour","SelectMinute","ViewModal","FROM_OBJECTS","code","name","MyForm","props","_clearCart","grid","rowData","setState","status","state","customer_info","address_delivery","phone","startDate","Date","curDateEn","hour","minute","colums","headerName","field","width","_onChange","bind","_onSubmit","json","item","id","unit","unit_name","price","price_4","format","amount","push","fields","date_arrived","data","cart","model","axios","typeAction","res","_whereStateChange","value","type","receiptType","from_type","ref_code","refcode_name","customer_code","content_issue","belong_user","address","cusInfo","JSON","parse","code_pi","map","onSubmitForm","newProps","_resetForm","stringify","hh","mm","arr","inv_code","_onChangeRefcode","_onChangeRefcodeCustomer","title","_getTitle","e","_onObjectChange","target","RefCode","_addCart","_onCustomerChange","username","background","borderRight","date","borderRadius","borderLeft","height","defaultProps","onToggle"],"mappings":"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","sourcesContent":["import  detectForm from '../../../hook/before/detectform';\r\nimport { ISERVICE_TYPES } from '../../../config/app.config';\r\n\r\n// LIBS \r\nimport moment from 'moment';\r\nimport numeral from 'numeral';\r\nimport {myTime} from '../../../hook/ultil/myTime';\r\n\r\n\r\n\r\nimport React, { Component } from 'react';\r\nimport {  Row, Col, FormGroup, Input, ButtonGroup, Button  } from 'reactstrap';\r\n\r\nimport DatePicker from 'react-datepicker';\r\nimport \"react-datepicker/dist/react-datepicker.css\";\r\n\r\n\r\n\r\nimport SelectList from '../../../components/SelectList';\r\nimport InputSuggestOrder from '../../../components/InputSuggestOrder'\r\nimport InputSuggest from '../../../components/InputSuggest';\r\nimport InputSuggestProduct from '../../../components/InputSuggestProduct';\r\nimport BenTable from '../../../components/BenTable';\r\n\r\n\r\nimport SelectHour from '../../../components/SelectHour';\r\nimport SelectMinute from '../../../components/SelectMinute'; \r\n\r\n\r\n\r\nimport ViewModal from '../../../components/ViewModal';\r\n\r\n\r\nconst FROM_OBJECTS = [\r\n    {code:'inv_code',name:'Đơn hàng bán'},\r\n    {code:'customer_code',name:'Khách hàng'}   \r\n]\r\n\r\n\r\nexport default class MyForm extends Component {\r\n\r\n\r\n\r\n    constructor(props){\r\n        super(props);\r\n\r\n        this.state = {\r\n\r\n            code:'',\r\n            customer_info:{\r\n                name:'',\r\n                address_delivery:'',\r\n                phone:''\r\n            },\r\n            startDate: new Date( myTime.curDateEn() ),\r\n            hour:0,\r\n            minute:0,\r\n            \r\n        }\r\n\r\n\r\n        this.grid = {\r\n            colums:[\r\n                { headerName:'Mã', field:'code', width:'100px' },\r\n                { headerName:'Dịch vụ', field:'name', width:'200px' },\r\n                { headerName:'Đơn giá', field:'price', width:'90px' }\r\n            ],\r\n            rowData:[]\r\n        }\r\n\r\n        this._onChange = this._onChange.bind(this) ; \r\n        this._onSubmit = this._onSubmit.bind(this);\r\n        \r\n\r\n\r\n    }\r\n\r\n    \r\n    _clearCart = ()=>{\r\n        this.grid.rowData = [] ;\r\n        this.setState({\r\n            status:'_clearCart'\r\n        })\r\n    }\r\n    \r\n    _addCart(json){\r\n        \r\n        const item = {\r\n            id:json.id,\r\n            code:json.code,\r\n            unit:json.unit_name,\r\n            name:json.name,\r\n            price:numeral(json.price_4).format('0,0'),\r\n            amount:1,\r\n        }\r\n\r\n        this.grid.rowData.push(item);\r\n        this.setState({\r\n            status:'_addCart'\r\n        });\r\n\r\n\r\n    }\r\n    _onSubmit(){\r\n        const fields = [\r\n            'from_type','ref_code','belong_user','content_issue'\r\n        ];\r\n          \r\n        if(detectForm(fields,this.state)===''){\r\n            \r\n            const date_arrived = moment(this.state.startDate).format('YYYY-MM-DD')  +' '+this.state.hour+':'+this.state.minute;\r\n            let data = this.state ; \r\n\r\n            data.date_arrived = date_arrived;\r\n            data.cart = this.grid.rowData;\r\n\r\n\r\n            delete data.startDate;\r\n            delete data.hour;\r\n            delete data.minute;\r\n            \r\n            this.model.axios(this.props.typeAction,data,(res)=>{ \r\n                \r\n                this._whereStateChange(res);               \r\n\r\n            });\r\n\r\n                    \r\n        }\r\n\r\n    }\r\n    \r\n    _onChange(name,value){\r\n        this.setState({ \r\n          [name]:value\r\n        });\r\n        \r\n    }\r\n\r\n\r\n\r\n    _getTitle(){\r\n\r\n        const type = this.props.receiptType === '' ? 'osv':this.props.receiptType; \r\n        \r\n        return ISERVICE_TYPES[type]['name'] ;\r\n\r\n    }\r\n\r\n    _resetForm(){\r\n\r\n        this.grid.rowData = [] ;\r\n\r\n        return {\r\n\r\n            type:this.props.receiptType, \r\n            from_type:'inv_code',\r\n            ref_code:'',\r\n            refcode_name:'Đơn hàng bán',\r\n            customer_code:'',\r\n            customer_info:{\r\n                name:'',\r\n                address_delivery:'',\r\n                phone:''\r\n            },\r\n            content_issue:'',\r\n            belong_user:'',\r\n            cart:[]\r\n\r\n          \r\n        }\r\n    }\r\n\r\n    \r\n    _onChangeRefcodeCustomer(item){\r\n          \r\n            \r\n        this.setState({\r\n            ref_code:item.code,\r\n            customer_code:item.code,\r\n            customer_info:{\r\n                name:item.name,\r\n                address_delivery:item.address,\r\n                phone:item.phone\r\n            },\r\n            \r\n        });\r\n\r\n        \r\n    }\r\n    _onChangeRefcode(item){\r\n        \r\n        \r\n        const cusInfo = JSON.parse(item.customer_info);\r\n        \r\n        this.setState({\r\n            ref_code:item.code_pi,\r\n            customer_code:cusInfo.code,\r\n            customer_info:cusInfo\r\n        });\r\n\r\n    }\r\n    _onCustomerChange(name,value){\r\n        let cusInfo = this.state.customer_info;\r\n        cusInfo[name] = value;\r\n\r\n        this.setState({\r\n            customer_info:cusInfo\r\n        })\r\n    }\r\n\r\n    _onObjectChange(code){\r\n        \r\n        const refcode_name = FROM_OBJECTS.map((item)=>{  if(item.code===code){ return item.name } });\r\n        \r\n        this.setState({\r\n            refcode_name:refcode_name,\r\n            from_type:code\r\n        });\r\n\r\n\r\n\r\n    }\r\n    async componentDidMount(){\r\n        // INIT ORDERS MODEL\r\n        this.model =  this.props.model;  \r\n        \r\n        \r\n    }\r\n\r\n    _whereStateChange(res){\r\n\r\n        if(res.name==='success' || res.name ==='ok'){\r\n          this.props.onSubmitForm(res);\r\n        }\r\n        \r\n    }\r\n\r\n    componentWillReceiveProps(newProps){\r\n\r\n        let state = {};\r\n        \r\n        if(newProps.typeAction==='post'){\r\n\r\n            state = this._resetForm();\r\n            this.setState(state);\r\n\r\n        }else if(newProps.typeAction==='put'){\r\n            \r\n            if(JSON.stringify(newProps.data) !=='{}'){\r\n\r\n                const data = newProps.data ;\r\n                const cusInfo = JSON.parse(data.customer_info);\r\n    \r\n                const startDate = moment(data.date_arrived).format('YYYY-MM-DD');\r\n                const hh = moment(data.date_arrived).format('HH');\r\n                const mm = moment(data.date_arrived).format('mm');\r\n                \r\n                this.grid.rowData = data.cart !== null ? JSON.parse(data.cart) : [] ;\r\n                \r\n                \r\n                \r\n                state = {\r\n                    id:data.id,\r\n                    code:data.code,\r\n                    type:data.type, \r\n                    from_type:data.from_type,\r\n                    ref_code:data.ref_code,\r\n                    refcode_name:'Đơn hàng bán',\r\n                    customer_code:data.customer_code,\r\n                    customer_info:cusInfo,\r\n                    content_issue:data.content_issue,\r\n                    belong_user:data.belong_user,\r\n                    startDate: new Date( startDate ),\r\n                    hour:hh,\r\n                    minute:mm\r\n    \r\n                }\r\n\r\n                this.setState(state);\r\n                \r\n\r\n            }\r\n        }\r\n        \r\n        \r\n        \r\n    }\r\n\r\n    RefCode(from_type){\r\n\r\n        const arr = {\r\n            inv_code:<div>\r\n                            <label> Mã chứng từ </label>\r\n                            <InputSuggestOrder id=\"ref_code\" onSelected={(item)=>{ this._onChangeRefcode(item) }} defaultValue={this.state.ref_code} />\r\n                     </div>,\r\n            customer_code:<div>\r\n                        <label> Mã khách hàng </label>\r\n                        <InputSuggest strModel=\"customers\" onSelected={(item)=>{ this._onChangeRefcodeCustomer(item) }} id=\"ref_code\" defaultValue={this.state.ref_code} />\r\n                    </div>\r\n         \r\n        };\r\n        return(\r\n          arr[from_type]                     \r\n        )\r\n    }\r\n    render() {\r\n\r\n        const title = this._getTitle();\r\n        const cusInfo = this.state.customer_info ; \r\n\r\n\r\n        \r\n        return (\r\n            \r\n            <ViewModal name={title}  isFooter={true} {...this.props} onSubmit={this._onSubmit} >\r\n                <div className=\"view-modal-body\">\r\n                    <Row>\r\n\r\n                        {/* LEFT */}\r\n                        <Col md={8}>\r\n\r\n                            <FormGroup row>\r\n                                <Col md={6}>\r\n                                    <label> Phiếu theo </label>\r\n                                    <SelectList \r\n\r\n                                        onChange={(e)=>{ this._onObjectChange(e.target.value) }} \r\n                                        defaultValue={ this.state.from_type } id=\"from_type\" name=\"Vui lòng chọn\"\r\n                                        rows={ FROM_OBJECTS } \r\n                                    /> \r\n                                </Col>\r\n                                <Col md={6}>\r\n                                    { this.RefCode(this.state.from_type) }\r\n                                </Col>\r\n                                \r\n                            </FormGroup>\r\n                            \r\n                            <FormGroup row>\r\n                                <Col>\r\n                                    <label> Dịch vụ </label>\r\n                                    <span onClick={this._clearCart}  className=\"pull-right pointer\">\r\n                                        <small> Xoá  </small>\r\n                                    </span>\r\n                                    <InputSuggestProduct  type=\"SERVICE\" onSelected={(json)=>{ this._addCart(json) }}  />\r\n                                </Col>\r\n                            </FormGroup>\r\n\r\n                            <FormGroup row>\r\n                                <Col>\r\n                                    <BenTable height=\"333px\" grid={this.grid} />\r\n                                </Col>\r\n                            </FormGroup>\r\n\r\n                             \r\n                        </Col>\r\n                        {/* END LEFT */}\r\n\r\n                        {/* RIGHT */}\r\n                        <Col md={4}>\r\n                            <FormGroup row>\r\n                                <Col>\r\n                                    <label> Khách hàng </label>\r\n                                    <Input   \r\n                                        defaultValue={ cusInfo['name'] } \r\n                                        type=\"text\" \r\n                                        onChange={(e)=>{ this._onCustomerChange('name',e.target.value) }}\r\n                                    />\r\n                                </Col>\r\n                            </FormGroup>\r\n\r\n                            <FormGroup row>\r\n                                <Col>\r\n                                    <label> SĐT </label>\r\n                                    <Input \r\n                                        type=\"text\" \r\n                                        onChange={(e)=>{ this._onCustomerChange('phone',e.target.value) }}\r\n                                        defaultValue={cusInfo['phone']}    \r\n                                    />\r\n                                </Col>\r\n                            </FormGroup>\r\n\r\n                            <FormGroup row>\r\n                                <Col>\r\n                                    <label> Địa chỉ </label>\r\n                                    <Input \r\n                                        type=\"text\" \r\n                                        onChange={(e)=>{ this._onCustomerChange('address_delivery',e.target.value) }}\r\n                                        defaultValue={cusInfo['address_delivery']}    \r\n                                    />\r\n                                </Col>\r\n                            </FormGroup>\r\n                            \r\n                            <FormGroup row>\r\n                                <Col>\r\n                                    <label> Người phụ trách </label>\r\n                                    <InputSuggest  \r\n                                        \r\n                                        strModel='users' \r\n                                        code=\"username\" \r\n                                        onSelected={(value)=>{ this._onChange('belong_user',value.username) }} defaultValue={ this.state.belong_user }  \r\n                                        id=\"belong_user\"  \r\n                                    />\r\n                                </Col>\r\n                            </FormGroup>\r\n                            <FormGroup row>\r\n                                <Col>\r\n                                    <label> Lịch hẹn đến </label>\r\n                                    <div style={{'clear':'both'}}>\r\n                                        <ButtonGroup>\r\n                                            <Button style={{background:'#fff', borderRight:0}} disabled> <i className=\"fa fa-calendar\"></i> </Button>\r\n                                            <DatePicker\r\n                                                onChange={(date)=>{ this.setState({startDate:date}) }}\r\n\r\n                                                dateFormat=\"yyyy-MM-dd\"\r\n                                                selected={this.state.startDate}\r\n\r\n                                                className=\"input-datepicker\"\r\n                                            />\r\n\r\n                                            <SelectHour \r\n                                                onChange={(e)=>{ this.setState({hour:e.target.value}) }} \r\n                                                defaultValue={this.state.hour} \r\n                                                style={{borderRadius:0,borderLeft:0,height:37}}  \r\n                                            />\r\n                                            <SelectMinute \r\n                                                onChange={(e)=>{ this.setState({minute:e.target.value}) }} \r\n                                                defaultValue={this.state.minute} style={{borderRadius:0, borderLeft:0, width:120, height:37}} \r\n                                            />\r\n\r\n                                        </ButtonGroup>\r\n                                    </div>\r\n                                </Col>\r\n                            </FormGroup>\r\n\r\n                            <FormGroup row>\r\n                                <Col md={12}>\r\n                                    <label> Mô tả vấn đề </label>\r\n                                    <Input \r\n                                        id=\"content_issue\"\r\n                                        onChange={(e)=>{ this._onChange('content_issue',e.target.value) }} \r\n                                        defaultValue={this.state.content_issue} type=\"textarea\" style={{height:120}} \r\n                                    />\r\n                                </Col>\r\n                            </FormGroup>\r\n\r\n                        </Col>\r\n                        {/* END RIGHT */}\r\n                    </Row>\r\n                    \r\n                </div>\r\n            </ViewModal>\r\n        );\r\n    }\r\n}\r\n\r\nMyForm.defaultProps = {\r\n    onToggle:()=>{},\r\n    onSubmitForm:()=>{},\r\n    receiptType:'osv'\r\n}\r\n\r\n"]},"metadata":{},"sourceType":"module"}