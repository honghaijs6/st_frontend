{"ast":null,"code":"import _defineProperty from \"D:\\\\actions\\\\st_frontend\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/defineProperty\";\nimport _classCallCheck from \"D:\\\\actions\\\\st_frontend\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"D:\\\\actions\\\\st_frontend\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"D:\\\\actions\\\\st_frontend\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"D:\\\\actions\\\\st_frontend\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"D:\\\\actions\\\\st_frontend\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/inherits\";\nimport _assertThisInitialized from \"D:\\\\actions\\\\st_frontend\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/assertThisInitialized\";\nvar _jsxFileName = \"D:\\\\actions\\\\st_frontend\\\\src\\\\pages\\\\Employee\\\\MyEmployee\\\\index.js\";\n// DATA \nimport USER_CONFIG from '../../../config/user.conf';\nimport { JOB_TYPES, JOB_LEVELS } from '../../../config/app.config';\nimport Model from '../../../model/model'; // LIBS \n\nimport moment from 'moment';\nimport React, { Component } from 'react';\nimport { FormGroup, Label } from 'reactstrap';\nimport { connect } from 'react-redux';\nimport { BenGrid } from '../../../components/BenGrid2';\nimport ButtonExpand from '../../../components/ButtonExpand';\nimport SelectList from '../../../components/SelectList';\nimport MyForm from './Form';\nvar MODE = 'users';\nvar MODE_NAME = 'Nhân viên';\n\nvar MyEmployee =\n/*#__PURE__*/\nfunction (_Component) {\n  _inherits(MyEmployee, _Component);\n\n  function MyEmployee(props) {\n    var _this;\n\n    _classCallCheck(this, MyEmployee);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(MyEmployee).call(this, props));\n    _this._curInfo = {};\n    _this.state = {\n      typeAction: '',\n      onAction: '',\n      status: '',\n      isOpenForm: false,\n      tab: 'employee'\n    };\n    _this.grid = {\n      colums: [{\n        headerName: \"Họ & Tên \",\n        field: \"name\",\n        width: 300,\n        cellRenderer: function cellRenderer(params) {\n          return \"\\n                            <span> <i class=\\\"fa fa-user mr-5\\\"></i> \".concat(params.value, \" </span>\\n                        \");\n        }\n      }, {\n        headerName: \"Văn phòng\",\n        field: \"office_name\",\n        width: 180\n      }, {\n        headerName: \"Cấp bậc\",\n        field: \"job_level\",\n        width: 180,\n        cellRenderer: function cellRenderer(params) {\n          return USER_CONFIG['job_level'][params.value];\n        }\n      }, {\n        headerName: \"Loại hình\",\n        field: \"job_type\",\n        width: 180,\n        cellRenderer: function cellRenderer(params) {\n          return USER_CONFIG['job_type'][params.value];\n        }\n      }, {\n        headerName: \"SĐT\",\n        field: \"phone\",\n        width: 140,\n        cellRenderer: function cellRenderer(params) {\n          return params.value === 'null' ? 'n/a' : params.value;\n        }\n      }, {\n        headerName: \"E-mail\",\n        field: \"email\",\n        width: 180\n      }, {\n        headerName: \"Ngày tạo\",\n        field: \"date_created\",\n        width: 140,\n        cellRenderer: function cellRenderer(params) {\n          var humanDate = moment(params.value).format('YYYY-MM-DD');\n          return \"\\n                     \".concat(humanDate, \"\\n                   \");\n        }\n      }, {\n        headerName: \"Hiệu chỉnh\",\n        field: \"date_modified\",\n        width: 140,\n        cellRenderer: function cellRenderer(params) {\n          var humanDate = params.value !== null ? moment(params.value).format('YYYY-MM-DD') : '';\n          return \"\\n                     \".concat(humanDate, \"\\n                   \");\n        }\n      }],\n      rowData: []\n    };\n\n    _this._setup();\n\n    _this._doOpenModalPost = _this._doOpenModalPost.bind(_assertThisInitialized(_assertThisInitialized(_this)));\n    _this._doOpenModalUpdate = _this._doOpenModalUpdate.bind(_assertThisInitialized(_assertThisInitialized(_this)));\n    return _this;\n  }\n\n  _createClass(MyEmployee, [{\n    key: \"_setup\",\n    value: function _setup() {\n      this.model = new Model(MODE, this.props.dispatch);\n    }\n  }, {\n    key: \"_onChange\",\n    value: function _onChange(field, value) {\n      if (value !== '') {\n        this.model.set('paginate', _defineProperty({}, field, value));\n      } else {\n        this.model.remove(field);\n      }\n\n      this.model.load();\n    }\n  }, {\n    key: \"_onSubmitForm\",\n    value: function _onSubmitForm(res) {\n      if (res.name === 'success' || res.name === 'ok') {\n        this._curInfo = {};\n        this.setState({\n          isOpenForm: false,\n          typeAction: '',\n          receiptType: '',\n          status: res.name\n        });\n      }\n    }\n  }, {\n    key: \"_doOpenModalPost\",\n    value: function _doOpenModalPost() {\n      this.setState({\n        typeAction: 'post',\n        isOpenForm: true\n      });\n    }\n  }, {\n    key: \"_doOpenModalUpdate\",\n    value: function _doOpenModalUpdate(data) {\n      this._curInfo = data;\n      this.setState({\n        typeAction: 'put',\n        isOpenForm: true\n      });\n    }\n  }, {\n    key: \"componentWillReceiveProps\",\n    value: function componentWillReceiveProps(newProps) {\n      this.grid.rowData = newProps[MODE]['list'] || []; // CONNECT REDUX STATE \n\n      this._whereStateChange(newProps[MODE]['state']);\n    }\n  }, {\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      this.model.initData();\n    }\n    /* WHERE*/\n\n  }, {\n    key: \"_whereStateChange\",\n    value: function _whereStateChange(newState) {\n      this.setState(Object.assign(this.state, newState));\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this2 = this;\n\n      return React.createElement(\"div\", {\n        hidden: this.props.onTab === this.state.tab ? false : true,\n        className: \"animated fadeIn\",\n        style: {\n          padding: 10\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 182\n        },\n        __self: this\n      }, React.createElement(MyForm, {\n        typeAction: this.state.typeAction,\n        model: this.model,\n        width: \"45%\",\n        isOpen: this.state.isOpenForm,\n        onToggle: function onToggle(isOpen) {\n          _this2.setState({\n            isOpenForm: isOpen\n          });\n        },\n        data: this._curInfo,\n        onSubmitForm: function onSubmitForm(res) {\n          _this2._onSubmitForm(res);\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 184\n        },\n        __self: this\n      }), React.createElement(BenGrid, {\n        height: \"77.5vh\",\n        gridID: \"id\",\n        onBtnEdit: this._doOpenModalUpdate,\n        onBtnAdd: this._doOpenModalPost,\n        rowSelection: \"single\",\n        formStatus: this.state.status,\n        isRightTool: true,\n        nextColums: this.grid.colums,\n        rowData: this.grid.rowData,\n        model: this.model,\n        customButton: React.createElement(ButtonExpand, {\n          style: {\n            borderRight: 0\n          },\n          icon: \"fa-filter\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 213\n          },\n          __self: this\n        }, React.createElement(FormGroup, {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 214\n          },\n          __self: this\n        }, React.createElement(Label, {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 215\n          },\n          __self: this\n        }, \" C\\u1EA5p b\\u1EADc \"), React.createElement(SelectList, {\n          name: \"T\\u1EA5t C\\u1EA3\",\n          onChange: function onChange(e) {\n            _this2._onChange('job_level', e.target.value);\n          },\n          rows: JOB_LEVELS,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 216\n          },\n          __self: this\n        })), React.createElement(FormGroup, {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 219\n          },\n          __self: this\n        }, React.createElement(Label, {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 220\n          },\n          __self: this\n        }, \" Lo\\u1EA1i h\\xECnh  \"), React.createElement(SelectList, {\n          name: \"T\\u1EA5t C\\u1EA3\",\n          onChange: function onChange(e) {\n            _this2._onChange('job_type', e.target.value);\n          },\n          rows: JOB_TYPES,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 221\n          },\n          __self: this\n        }))),\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 197\n        },\n        __self: this\n      }));\n    }\n  }]);\n\n  return MyEmployee;\n}(Component);\n\nvar mapStateToProps = function mapStateToProps(state) {\n  return _defineProperty({}, MODE, state[MODE]);\n};\n\nexport default connect(mapStateToProps)(MyEmployee);","map":{"version":3,"sources":["D:/actions/st_frontend/src/pages/Employee/MyEmployee/index.js"],"names":["USER_CONFIG","JOB_TYPES","JOB_LEVELS","Model","moment","React","Component","FormGroup","Label","connect","BenGrid","ButtonExpand","SelectList","MyForm","MODE","MODE_NAME","MyEmployee","props","_curInfo","state","typeAction","onAction","status","isOpenForm","tab","grid","colums","headerName","field","width","cellRenderer","params","value","humanDate","format","rowData","_setup","_doOpenModalPost","bind","_doOpenModalUpdate","model","dispatch","set","remove","load","res","name","setState","receiptType","data","newProps","_whereStateChange","initData","newState","Object","assign","onTab","padding","isOpen","_onSubmitForm","borderRight","e","_onChange","target","mapStateToProps"],"mappings":"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","sourcesContent":["// DATA \r\nimport USER_CONFIG from '../../../config/user.conf'\r\nimport { JOB_TYPES, JOB_LEVELS } from '../../../config/app.config'; \r\n\r\nimport Model from '../../../model/model';\r\n\r\n\r\n\r\n// LIBS \r\nimport moment from 'moment';\r\n\r\n\r\nimport React, { Component } from 'react';\r\nimport { FormGroup, Label } from 'reactstrap';\r\nimport { connect } from 'react-redux';\r\n\r\nimport { BenGrid } from '../../../components/BenGrid2';\r\n\r\nimport ButtonExpand from '../../../components/ButtonExpand';\r\nimport SelectList from '../../../components/SelectList';\r\n\r\n\r\nimport MyForm from './Form';\r\n\r\nconst MODE = 'users';\r\nconst MODE_NAME = 'Nhân viên';\r\n\r\n\r\nclass MyEmployee extends Component {\r\n\r\n    _curInfo = {}; \r\n    constructor(props){\r\n        super(props);\r\n\r\n        \r\n        this.state = {\r\n\r\n            typeAction:'',\r\n            onAction:'',\r\n            status:'',\r\n\r\n            isOpenForm:false,\r\n            \r\n            tab:'employee'\r\n        }\r\n\r\n        this.grid = {\r\n            colums:[\r\n                { headerName: \"Họ & Tên \", field: \"name\",width:300,\r\n                    cellRenderer(params){\r\n                        return `\r\n                            <span> <i class=\"fa fa-user mr-5\"></i> ${params.value} </span>\r\n                        `;\r\n                    }\r\n                },\r\n                { headerName: \"Văn phòng\", field: \"office_name\",width:180 },\r\n                { headerName: \"Cấp bậc\", field: \"job_level\",width:180,\r\n                    cellRenderer(params){\r\n                        return USER_CONFIG['job_level'][params.value]\r\n                    }\r\n                },\r\n                { headerName: \"Loại hình\", field:\"job_type\", width:180,\r\n                    cellRenderer(params){\r\n                        return USER_CONFIG['job_type'][params.value];\r\n                    }\r\n                },\r\n                { headerName: \"SĐT\", field:\"phone\", width:140,\r\n                    cellRenderer(params){\r\n                        return params.value === 'null' ? 'n/a' : params.value\r\n                    }\r\n                },\r\n                { headerName: \"E-mail\", field:\"email\", width:180 },\r\n                {headerName: \"Ngày tạo\", field: \"date_created\",width:140,\r\n                  \r\n                  cellRenderer(params){\r\n        \r\n                    const humanDate = moment(params.value).format('YYYY-MM-DD')\r\n                    return `\r\n                     ${ humanDate }\r\n                   `\r\n                  }\r\n                  \r\n                },\r\n                {headerName: \"Hiệu chỉnh\", field: \"date_modified\",width:140,\r\n                  \r\n                  cellRenderer(params){\r\n        \r\n                    const humanDate = params.value !== null ? moment(params.value).format('YYYY-MM-DD') : '';\r\n                    return `\r\n                     ${ humanDate }\r\n                   `\r\n                  }\r\n                  \r\n                }\r\n                \r\n              ],\r\n              rowData: []\r\n        }\r\n\r\n        this._setup()\r\n\r\n        this._doOpenModalPost = this._doOpenModalPost.bind(this);\r\n        this._doOpenModalUpdate = this._doOpenModalUpdate.bind(this);\r\n    }\r\n\r\n    _setup(){\r\n\r\n        this.model = new Model(MODE, this.props.dispatch);\r\n\r\n    }\r\n\r\n    _onChange(field,value){\r\n    \r\n        if(value!==''){\r\n          this.model.set('paginate',{\r\n            [field]:value\r\n          });\r\n        }else{ this.model.remove(field) }\r\n        \r\n\r\n        this.model.load(); \r\n    }\r\n\r\n    _onSubmitForm(res){\r\n\r\n        \r\n        if(res.name==='success' || res.name==='ok'){\r\n\r\n            this._curInfo = {}\r\n            \r\n            this.setState({\r\n                isOpenForm:false,\r\n                typeAction:'',\r\n                receiptType:'',\r\n                status:res.name\r\n            });\r\n \r\n         }\r\n    }\r\n\r\n    _doOpenModalPost(){\r\n        this.setState({\r\n            typeAction:'post',\r\n            isOpenForm:true\r\n        });\r\n\r\n    }\r\n\r\n    _doOpenModalUpdate(data){\r\n        \r\n        this._curInfo = data ; \r\n        this.setState({\r\n            typeAction:'put',\r\n            isOpenForm:true\r\n        });\r\n\r\n    }\r\n\r\n    componentWillReceiveProps(newProps){\r\n        \r\n        this.grid.rowData = newProps[MODE]['list'] || [] ;  \r\n        // CONNECT REDUX STATE \r\n        this._whereStateChange(newProps[MODE]['state']);\r\n\r\n\r\n    }\r\n\r\n    componentDidMount(){\r\n        \r\n        this.model.initData();\r\n\r\n\r\n    }\r\n\r\n    /* WHERE*/\r\n    _whereStateChange(newState){\r\n        this.setState(Object.assign(this.state,newState));\r\n    }\r\n\r\n    render() {\r\n        return (\r\n            <div  hidden={  this.props.onTab === this.state.tab ? false : true }  className=\"animated fadeIn\" style={{padding:10}}> \r\n\r\n                <MyForm \r\n\r\n                    typeAction={this.state.typeAction}\r\n                    model={this.model}\r\n\r\n                    width=\"45%\"\r\n                    isOpen={this.state.isOpenForm}\r\n                    onToggle={(isOpen)=>{ this.setState({isOpenForm:isOpen})  }}\r\n                    data={this._curInfo}\r\n\r\n                    onSubmitForm={ (res)=>{ this._onSubmitForm(res) }}\r\n\r\n                />\r\n                <BenGrid\r\n\r\n                    height='77.5vh'\r\n                    gridID=\"id\"\r\n                    onBtnEdit={ this._doOpenModalUpdate }\r\n                    onBtnAdd={this._doOpenModalPost}   \r\n                    rowSelection='single'\r\n                    formStatus={ this.state.status }\r\n                    isRightTool={ true }\r\n                        \r\n\r\n                    nextColums={ this.grid.colums }\r\n                    rowData={this.grid.rowData}\r\n                    model={ this.model }\r\n\r\n                    customButton = {\r\n                        <ButtonExpand style={{borderRight:0}}  icon=\"fa-filter\">\r\n                          <FormGroup>\r\n                            <Label> Cấp bậc </Label>\r\n                            <SelectList name=\"Tất Cả\" onChange={(e)=>{ this._onChange('job_level',e.target.value) }}  rows={ JOB_LEVELS } />\r\n\r\n                          </FormGroup>\r\n                          <FormGroup>\r\n                            <Label> Loại hình  </Label>\r\n                            <SelectList name=\"Tất Cả\" onChange={(e)=>{ this._onChange('job_type',e.target.value) }}  rows={ JOB_TYPES } />\r\n                            \r\n                          </FormGroup>\r\n                          \r\n\r\n                      </ButtonExpand>\r\n                    }\r\n\r\n                        \r\n                />\r\n            </div>\r\n        );\r\n    }\r\n}\r\n\r\nconst mapStateToProps = (state) => {\r\n    return {\r\n        [MODE]: state[MODE]\r\n    }\r\n}\r\nexport default connect(mapStateToProps)(MyEmployee);\r\n"]},"metadata":{},"sourceType":"module"}