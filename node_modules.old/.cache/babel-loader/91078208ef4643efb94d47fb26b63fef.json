{"ast":null,"code":"import _defineProperty from \"D:\\\\actions\\\\st_frontend\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/defineProperty\";\nimport _classCallCheck from \"D:\\\\actions\\\\st_frontend\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"D:\\\\actions\\\\st_frontend\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createClass\";\nimport { detectForm } from '../../../../hook/before';\nimport error from '../../../../hook/after/error';\n\nvar formController =\n/*#__PURE__*/\nfunction () {\n  function formController(model) {\n    var dispatcher = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : null;\n\n    _classCallCheck(this, formController);\n\n    this.active = false;\n    /* FOR OPEN MODAL */\n\n    this.state = {\n      typeAction: '',\n      onAction: '',\n      status: ''\n    };\n    this.model = model;\n    this.dispatcher = dispatcher;\n  }\n\n  _createClass(formController, [{\n    key: \"_stateDataTemp\",\n    value: function _stateDataTemp() {\n      return {\n        code: '',\n        name: '',\n        decription: '',\n        color_code: 'rgba(30,49,121,1)',\n        ref_price: 0\n      };\n    }\n  }, {\n    key: \"onSubmit\",\n    value: function onSubmit() {\n      var _this = this;\n\n      var typeAction = this.state.typeAction;\n      /* PUT - POST */\n\n      /* HOOKED detectForm before save data*/\n      // -->\n\n      var fields = ['code', 'name', 'ref_price'];\n\n      if (detectForm(fields, this.data) === '') {\n        this.model.axios(typeAction, this.data, function (res) {\n          // -->\n          _this._whereStateChange({\n            onAction: 'onSubmit',\n            status: res.name\n          });\n\n          window.setTimeout(function () {\n            res.name === 'success' ? _this.toggle() : error(_this.model.model);\n          }, 1000);\n        });\n      }\n    }\n  }, {\n    key: \"onChange\",\n    value: function onChange(name, value) {\n      Object.assign(this.data, _defineProperty({}, name, value)); //this.data[name] = e.target.value;\n      // --> initial HOW -> WHERE\n\n      this.processForm(name, value);\n    }\n    /* START : HOW */\n\n  }, {\n    key: \"open\",\n    value: function open(typeAction, info) {\n      //const {temp} = info || FORM_TEMP ;\n      this.data = info || this._stateDataTemp();\n      this.active = true;\n\n      this._whereStateChange({\n        typeAction: typeAction,\n        onAction: 'open',\n        status: 'opened'\n      });\n    }\n  }, {\n    key: \"processForm\",\n    value: function processForm(name, e) {\n      //-->\n      this._whereStateChange({\n        onAction: 'processForm'\n      });\n    }\n  }, {\n    key: \"toggle\",\n    value: function toggle() {\n      this.active = !this.active; // -->\n\n      this._whereStateChange({\n        onAction: 'toggle_modal',\n        status: 'closed'\n      });\n    }\n    /* START : WHERE */\n\n  }, {\n    key: \"_whereStateChange\",\n    value: function _whereStateChange() {\n      var newState = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n\n      switch (newState) {\n        case 'onSubmit':\n          this.toggle();\n          break;\n\n        default:\n          Object.assign(this.state, newState);\n\n          if (this.dispatcher !== null) {\n            this.dispatcher({\n              type: 'STATE-' + this.model.model,\n              state: this.state\n            });\n          }\n\n          break;\n      }\n    }\n  }]);\n\n  return formController;\n}();\n\nexport default formController;","map":{"version":3,"sources":["D:/actions/st_frontend/src/pages/Customer/Setting/CusTypePage/formCtrl.js"],"names":["detectForm","error","formController","model","dispatcher","active","state","typeAction","onAction","status","code","name","decription","color_code","ref_price","fields","data","axios","res","_whereStateChange","window","setTimeout","toggle","value","Object","assign","processForm","info","_stateDataTemp","e","newState","type"],"mappings":";;;AAEA,SAASA,UAAT,QAA2B,yBAA3B;AACA,OAAOC,KAAP,MAAkB,8BAAlB;;IAEMC,c;;;AAEF,0BAAYC,KAAZ,EAAkC;AAAA,QAAhBC,UAAgB,uEAAL,IAAK;;AAAA;;AAChC,SAAKC,MAAL,GAAc,KAAd;AAAsB;;AAEtB,SAAKC,KAAL,GAAa;AACXC,MAAAA,UAAU,EAAC,EADA;AAEXC,MAAAA,QAAQ,EAAC,EAFE;AAGXC,MAAAA,MAAM,EAAC;AAHI,KAAb;AAMA,SAAKN,KAAL,GAAaA,KAAb;AACA,SAAKC,UAAL,GAAkBA,UAAlB;AAED;;;;qCAEe;AACd,aAAO;AACLM,QAAAA,IAAI,EAAC,EADA;AAELC,QAAAA,IAAI,EAAC,EAFA;AAGLC,QAAAA,UAAU,EAAC,EAHN;AAILC,QAAAA,UAAU,EAAC,mBAJN;AAKLC,QAAAA,SAAS,EAAC;AALL,OAAP;AAOD;;;+BAES;AAAA;;AAER,UAAMP,UAAU,GAAG,KAAKD,KAAL,CAAWC,UAA9B;AAA0C;;AAE1C;AACA;;AACA,UAAMQ,MAAM,GAAG,CACb,MADa,EACN,MADM,EACC,WADD,CAAf;;AAIA,UAAGf,UAAU,CAACe,MAAD,EAAQ,KAAKC,IAAb,CAAV,KAA+B,EAAlC,EAAqC;AAEjC,aAAKb,KAAL,CAAWc,KAAX,CAAiBV,UAAjB,EAA4B,KAAKS,IAAjC,EAAsC,UAACE,GAAD,EAAO;AAC3C;AACA,UAAA,KAAI,CAACC,iBAAL,CAAuB;AACrBX,YAAAA,QAAQ,EAAC,UADY;AAErBC,YAAAA,MAAM,EAACS,GAAG,CAACP;AAFU,WAAvB;;AAKAS,UAAAA,MAAM,CAACC,UAAP,CAAkB,YAAI;AACpBH,YAAAA,GAAG,CAACP,IAAJ,KAAa,SAAb,GAA0B,KAAI,CAACW,MAAL,EAA1B,GAA0CrB,KAAK,CAAC,KAAI,CAACE,KAAL,CAAWA,KAAZ,CAA/C;AACD,WAFD,EAEE,IAFF;AAID,SAXD;AAYH;AAEF;;;6BAEQQ,I,EAAMY,K,EAAM;AACnBC,MAAAA,MAAM,CAACC,MAAP,CAAc,KAAKT,IAAnB,sBAA2BL,IAA3B,EAAiCY,KAAjC,GADmB,CAEnB;AACA;;AACA,WAAKG,WAAL,CAAiBf,IAAjB,EAAsBY,KAAtB;AAED;AAED;;;;yBACKhB,U,EAAYoB,I,EAAK;AAEpB;AACA,WAAKX,IAAL,GAAYW,IAAI,IAAI,KAAKC,cAAL,EAApB;AACA,WAAKvB,MAAL,GAAc,IAAd;;AAEA,WAAKc,iBAAL,CAAuB;AACrBZ,QAAAA,UAAU,EAACA,UADU;AAErBC,QAAAA,QAAQ,EAAC,MAFY;AAGrBC,QAAAA,MAAM,EAAC;AAHc,OAAvB;AAMD;;;gCAEWE,I,EAAKkB,C,EAAE;AAChB;AACA,WAAKV,iBAAL,CAAuB;AACrBX,QAAAA,QAAQ,EAAC;AADY,OAAvB;AAKF;;;6BAGO;AAEN,WAAKH,MAAL,GAAc,CAAC,KAAKA,MAApB,CAFM,CAGN;;AACA,WAAKc,iBAAL,CAAuB;AACrBX,QAAAA,QAAQ,EAAC,cADY;AAErBC,QAAAA,MAAM,EAAC;AAFc,OAAvB;AAMD;AAED;;;;wCAC8B;AAAA,UAAZqB,QAAY,uEAAH,EAAG;;AAE5B,cAAOA,QAAP;AACE,aAAK,UAAL;AACE,eAAKR,MAAL;AACF;;AAEA;AAEEE,UAAAA,MAAM,CAACC,MAAP,CAAc,KAAKnB,KAAnB,EAAyBwB,QAAzB;;AACA,cAAG,KAAK1B,UAAL,KAAkB,IAArB,EAA0B;AACxB,iBAAKA,UAAL,CAAgB;AACd2B,cAAAA,IAAI,EAAC,WAAS,KAAK5B,KAAL,CAAWA,KADX;AAEdG,cAAAA,KAAK,EAAC,KAAKA;AAFG,aAAhB;AAID;;AAEH;AAfF;AAkBD;;;;;;AAOL,eAAeJ,cAAf","sourcesContent":["\r\n\r\nimport { detectForm } from '../../../../hook/before';\r\nimport error from '../../../../hook/after/error'; \r\n\r\nclass formController {\r\n\r\n    constructor(model,dispatcher=null){\r\n      this.active = false ; /* FOR OPEN MODAL */\r\n\r\n      this.state = {\r\n        typeAction:'',\r\n        onAction:'',\r\n        status:''\r\n      }\r\n\r\n      this.model = model ;\r\n      this.dispatcher = dispatcher; \r\n\r\n    }\r\n\r\n    _stateDataTemp(){\r\n      return {\r\n        code:'',\r\n        name:'',\r\n        decription:'', \r\n        color_code:'rgba(30,49,121,1)',\r\n        ref_price:0\r\n      }\r\n    }\r\n\r\n    onSubmit(){\r\n\r\n      const typeAction = this.state.typeAction; /* PUT - POST */\r\n\r\n      /* HOOKED detectForm before save data*/\r\n      // -->\r\n      const fields = [\r\n        'code','name','ref_price'\r\n      ];\r\n\r\n      if(detectForm(fields,this.data)===''){\r\n\r\n          this.model.axios(typeAction,this.data,(res)=>{\r\n            // -->\r\n            this._whereStateChange({\r\n              onAction:'onSubmit',\r\n              status:res.name\r\n            });\r\n\r\n            window.setTimeout(()=>{\r\n              res.name === 'success' ?  this.toggle() : error(this.model.model) ;\r\n            },1000); \r\n\r\n          })\r\n      }\r\n\r\n    }\r\n\r\n    onChange(name, value){\r\n      Object.assign(this.data,{ [name]:value});\r\n      //this.data[name] = e.target.value;\r\n      // --> initial HOW -> WHERE\r\n      this.processForm(name,value);\r\n\r\n    }\r\n\r\n    /* START : HOW */\r\n    open(typeAction, info){\r\n\r\n      //const {temp} = info || FORM_TEMP ;\r\n      this.data = info || this._stateDataTemp() ;\r\n      this.active = true ;\r\n\r\n      this._whereStateChange({\r\n        typeAction:typeAction,\r\n        onAction:'open',\r\n        status:'opened'\r\n      });\r\n\r\n    }\r\n\r\n    processForm(name,e){\r\n       //-->\r\n       this._whereStateChange({\r\n         onAction:'processForm'\r\n\r\n       });\r\n\r\n    }\r\n\r\n\r\n    toggle(){\r\n\r\n      this.active = !this.active;\r\n      // -->\r\n      this._whereStateChange({\r\n        onAction:'toggle_modal',\r\n        status:'closed'\r\n      });\r\n\r\n\r\n    }\r\n\r\n    /* START : WHERE */\r\n    _whereStateChange(newState={}){\r\n\r\n      switch(newState){\r\n        case 'onSubmit' :\r\n          this.toggle() ; \r\n        break ;\r\n\r\n        default:\r\n\r\n          Object.assign(this.state,newState);\r\n          if(this.dispatcher!==null){\r\n            this.dispatcher({\r\n              type:'STATE-'+this.model.model,\r\n              state:this.state\r\n            })\r\n          }\r\n\r\n        break ;\r\n      }\r\n\r\n    }\r\n\r\n    \r\n\r\n\r\n}\r\n\r\nexport default formController;\r\n"]},"metadata":{},"sourceType":"module"}