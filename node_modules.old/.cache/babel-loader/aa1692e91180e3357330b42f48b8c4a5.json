{"ast":null,"code":"import _defineProperty from \"D:\\\\actions\\\\st_frontend\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/defineProperty\";\nimport _classCallCheck from \"D:\\\\actions\\\\st_frontend\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"D:\\\\actions\\\\st_frontend\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createClass\";\nimport { detectForm } from '../../../../hook/before';\nimport error from '../../../../hook/after/error';\n\nvar formController =\n/*#__PURE__*/\nfunction () {\n  function formController(model) {\n    var dispatcher = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : null;\n\n    _classCallCheck(this, formController);\n\n    this.active = false;\n    /* FOR OPEN MODAL */\n\n    this.state = {\n      typeAction: '',\n      onAction: '',\n      status: ''\n    };\n    this.model = model;\n    this.dispatcher = dispatcher;\n  }\n\n  _createClass(formController, [{\n    key: \"_stateDataTemp\",\n    value: function _stateDataTemp() {\n      return {\n        name: '',\n        sort: 0\n      };\n    }\n  }, {\n    key: \"onSubmit\",\n    value: function onSubmit() {\n      var _this = this;\n\n      var typeAction = this.state.typeAction;\n      /* PUT - POST */\n\n      /* HOOKED detectForm before save data*/\n      // -->\n\n      var fields = ['name'];\n\n      if (detectForm(fields, this.data) === '') {\n        this.model.axios(typeAction, this.data, function (res) {\n          // -->\n          _this._whereStateChange({\n            onAction: 'onSubmit',\n            status: res.name\n          });\n        });\n      }\n    }\n  }, {\n    key: \"onChange\",\n    value: function onChange(name, e) {\n      Object.assign(this.data, _defineProperty({}, name, e.target.value)); //this.data[name] = e.target.value;\n      // --> initial HOW -> WHERE\n\n      this.processForm(name, e);\n    }\n    /* START : HOW */\n\n  }, {\n    key: \"open\",\n    value: function open(typeAction, info) {\n      //const {temp} = info || FORM_TEMP ;\n      this.data = info || this._stateDataTemp();\n      this.active = true;\n\n      this._whereStateChange({\n        typeAction: typeAction,\n        onAction: 'open',\n        status: 'opened'\n      });\n    }\n  }, {\n    key: \"processForm\",\n    value: function processForm(name, e) {\n      //-->\n      this._whereStateChange({\n        onAction: 'processForm'\n      });\n    }\n  }, {\n    key: \"toggle\",\n    value: function toggle() {\n      this.active = !this.active; // -->\n\n      this._whereStateChange({\n        onAction: 'toggle_modal'\n      });\n    }\n    /* START : WHERE */\n\n  }, {\n    key: \"_whereStateChange\",\n    value: function _whereStateChange() {\n      var _this2 = this;\n\n      var newState = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n      Object.assign(this.state, newState);\n\n      if (this.dispatcher !== null) {\n        this.dispatcher({\n          type: 'STATE-' + this.model.model,\n          state: this.state\n        });\n      }\n\n      window.setTimeout(function () {\n        newState.status === 'success' ? _this2.toggle() : error(_this2.model.model);\n      }, 1000);\n    }\n  }]);\n\n  return formController;\n}();\n\nexport default formController;","map":{"version":3,"sources":["D:/actions/st_frontend/src/pages/Order/Setting/categoryPage/formCtrl.js"],"names":["detectForm","error","formController","model","dispatcher","active","state","typeAction","onAction","status","name","sort","fields","data","axios","res","_whereStateChange","e","Object","assign","target","value","processForm","info","_stateDataTemp","newState","type","window","setTimeout","toggle"],"mappings":";;;AACA,SAASA,UAAT,QAA2B,yBAA3B;AACA,OAAOC,KAAP,MAAkB,8BAAlB;;IAGMC,c;;;AAEF,0BAAYC,KAAZ,EAAkC;AAAA,QAAhBC,UAAgB,uEAAL,IAAK;;AAAA;;AAChC,SAAKC,MAAL,GAAc,KAAd;AAAsB;;AAEtB,SAAKC,KAAL,GAAa;AACXC,MAAAA,UAAU,EAAC,EADA;AAEXC,MAAAA,QAAQ,EAAC,EAFE;AAGXC,MAAAA,MAAM,EAAC;AAHI,KAAb;AAMA,SAAKN,KAAL,GAAaA,KAAb;AACA,SAAKC,UAAL,GAAkBA,UAAlB;AAED;;;;qCAEe;AACd,aAAO;AACLM,QAAAA,IAAI,EAAC,EADA;AAELC,QAAAA,IAAI,EAAC;AAFA,OAAP;AAID;;;+BAES;AAAA;;AAER,UAAMJ,UAAU,GAAG,KAAKD,KAAL,CAAWC,UAA9B;AAA0C;;AAE1C;AACA;;AACA,UAAMK,MAAM,GAAG,CACb,MADa,CAAf;;AAIA,UAAGZ,UAAU,CAACY,MAAD,EAAQ,KAAKC,IAAb,CAAV,KAA+B,EAAlC,EAAqC;AAGjC,aAAKV,KAAL,CAAWW,KAAX,CAAiBP,UAAjB,EAA4B,KAAKM,IAAjC,EAAsC,UAACE,GAAD,EAAO;AAC3C;AACA,UAAA,KAAI,CAACC,iBAAL,CAAuB;AACrBR,YAAAA,QAAQ,EAAC,UADY;AAErBC,YAAAA,MAAM,EAACM,GAAG,CAACL;AAFU,WAAvB;AAKD,SAPD;AAQH;AAEF;;;6BAEQA,I,EAAMO,C,EAAE;AACfC,MAAAA,MAAM,CAACC,MAAP,CAAc,KAAKN,IAAnB,sBAA2BH,IAA3B,EAAiCO,CAAC,CAACG,MAAF,CAASC,KAA1C,GADe,CAGf;AACA;;AACA,WAAKC,WAAL,CAAiBZ,IAAjB,EAAsBO,CAAtB;AAED;AAED;;;;yBACKV,U,EAAYgB,I,EAAK;AAEpB;AACA,WAAKV,IAAL,GAAYU,IAAI,IAAI,KAAKC,cAAL,EAApB;AACA,WAAKnB,MAAL,GAAc,IAAd;;AAEA,WAAKW,iBAAL,CAAuB;AACrBT,QAAAA,UAAU,EAACA,UADU;AAErBC,QAAAA,QAAQ,EAAC,MAFY;AAGrBC,QAAAA,MAAM,EAAC;AAHc,OAAvB;AAMD;;;gCAEWC,I,EAAKO,C,EAAE;AAChB;AACA,WAAKD,iBAAL,CAAuB;AACrBR,QAAAA,QAAQ,EAAC;AADY,OAAvB;AAKF;;;6BAGO;AAEN,WAAKH,MAAL,GAAc,CAAC,KAAKA,MAApB,CAFM,CAGN;;AACA,WAAKW,iBAAL,CAAuB;AACrBR,QAAAA,QAAQ,EAAC;AADY,OAAvB;AAID;AAED;;;;wCAC8B;AAAA;;AAAA,UAAZiB,QAAY,uEAAH,EAAG;AAE5BP,MAAAA,MAAM,CAACC,MAAP,CAAc,KAAKb,KAAnB,EAAyBmB,QAAzB;;AACA,UAAG,KAAKrB,UAAL,KAAkB,IAArB,EAA0B;AACxB,aAAKA,UAAL,CAAgB;AACdsB,UAAAA,IAAI,EAAC,WAAS,KAAKvB,KAAL,CAAWA,KADX;AAEdG,UAAAA,KAAK,EAAC,KAAKA;AAFG,SAAhB;AAID;;AAEDqB,MAAAA,MAAM,CAACC,UAAP,CAAkB,YAAI;AACpBH,QAAAA,QAAQ,CAAChB,MAAT,KAAoB,SAApB,GAAgC,MAAI,CAACoB,MAAL,EAAhC,GAAgD5B,KAAK,CAAC,MAAI,CAACE,KAAL,CAAWA,KAAZ,CAArD;AACD,OAFD,EAEE,IAFF;AAID;;;;;;AAQL,eAAeD,cAAf","sourcesContent":["\r\nimport { detectForm } from '../../../../hook/before';\r\nimport error from '../../../../hook/after/error' ; \r\n\r\n\r\nclass formController {\r\n\r\n    constructor(model,dispatcher=null){\r\n      this.active = false ; /* FOR OPEN MODAL */\r\n\r\n      this.state = {\r\n        typeAction:'',\r\n        onAction:'',\r\n        status:''\r\n      }\r\n\r\n      this.model = model ;\r\n      this.dispatcher = dispatcher; \r\n\r\n    }\r\n\r\n    _stateDataTemp(){\r\n      return {\r\n        name:'',\r\n        sort:0\r\n      }\r\n    }\r\n\r\n    onSubmit(){\r\n\r\n      const typeAction = this.state.typeAction; /* PUT - POST */\r\n\r\n      /* HOOKED detectForm before save data*/\r\n      // -->\r\n      const fields = [\r\n        'name'\r\n      ]; \r\n\r\n      if(detectForm(fields,this.data)===''){\r\n\r\n          \r\n          this.model.axios(typeAction,this.data,(res)=>{\r\n            // -->\r\n            this._whereStateChange({\r\n              onAction:'onSubmit',\r\n              status:res.name\r\n            });\r\n            \r\n          })\r\n      }\r\n\r\n    }\r\n\r\n    onChange(name, e){\r\n      Object.assign(this.data,{ [name]:e.target.value});\r\n\r\n      //this.data[name] = e.target.value;\r\n      // --> initial HOW -> WHERE\r\n      this.processForm(name,e);\r\n\r\n    }\r\n\r\n    /* START : HOW */\r\n    open(typeAction, info){\r\n\r\n      //const {temp} = info || FORM_TEMP ;\r\n      this.data = info || this._stateDataTemp() ;\r\n      this.active = true ;\r\n\r\n      this._whereStateChange({\r\n        typeAction:typeAction,\r\n        onAction:'open',\r\n        status:'opened'\r\n      });\r\n\r\n    }\r\n\r\n    processForm(name,e){\r\n       //-->\r\n       this._whereStateChange({\r\n         onAction:'processForm'\r\n\r\n       });\r\n\r\n    }\r\n\r\n\r\n    toggle(){\r\n\r\n      this.active = !this.active;\r\n      // -->\r\n      this._whereStateChange({\r\n        onAction:'toggle_modal'\r\n      })\r\n    \r\n    }\r\n\r\n    /* START : WHERE */\r\n    _whereStateChange(newState={}){\r\n      \r\n      Object.assign(this.state,newState);\r\n      if(this.dispatcher!==null){\r\n        this.dispatcher({\r\n          type:'STATE-'+this.model.model,\r\n          state:this.state\r\n        })\r\n      }\r\n      \r\n      window.setTimeout(()=>{\r\n        newState.status === 'success' ? this.toggle() : error(this.model.model)\r\n      },1000)\r\n\r\n    }\r\n\r\n\r\n    \r\n\r\n\r\n}\r\n\r\nexport default formController;\r\n"]},"metadata":{},"sourceType":"module"}