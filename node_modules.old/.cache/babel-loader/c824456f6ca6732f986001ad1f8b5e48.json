{"ast":null,"code":"import _defineProperty from \"D:\\\\actions\\\\st_frontend\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/defineProperty\";\nimport _regeneratorRuntime from \"D:\\\\actions\\\\st_frontend\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/regenerator\";\nimport _asyncToGenerator from \"D:\\\\actions\\\\st_frontend\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/asyncToGenerator\";\nimport _classCallCheck from \"D:\\\\actions\\\\st_frontend\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"D:\\\\actions\\\\st_frontend\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"D:\\\\actions\\\\st_frontend\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"D:\\\\actions\\\\st_frontend\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"D:\\\\actions\\\\st_frontend\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/inherits\";\nimport _assertThisInitialized from \"D:\\\\actions\\\\st_frontend\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/assertThisInitialized\";\nvar _jsxFileName = \"D:\\\\actions\\\\st_frontend\\\\src\\\\pages\\\\Profile\\\\index.js\";\n// HOOKS \nimport detectForm from '../../hook/before/detectform';\nimport doUpdateModelInfo from '../../hook/ultil/doUpdateModelInfo';\nimport doLogin from '../../hook/ultil/doLogin';\nimport React, { Component } from 'react';\nimport { connect } from 'react-redux';\nimport { Row, Col, Button, FormGroup, Input, InputGroup, InputGroupAddon, InputGroupText } from 'reactstrap';\nimport BenTabs from '../../components/BenTabs';\nimport ButtonUploadImage from '../../components/ButtonUploadImage';\nimport BenMessage from '../../components/BenMessage';\n\nvar Profile =\n/*#__PURE__*/\nfunction (_Component) {\n  _inherits(Profile, _Component);\n\n  function Profile(props) {\n    var _this;\n\n    _classCallCheck(this, Profile);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(Profile).call(this, props));\n    _this.state = {\n      data: {\n        name: '',\n        photoURL: '',\n        phone: '',\n        email: ''\n      },\n      data_pass: {\n        pre_password: '',\n        new_password: '',\n        rep_password: ''\n      },\n      onTab: 'info',\n      tabs: [{\n        icon: 'fa fa-user',\n        code: 'info',\n        name: 'Thông tin'\n      }, {\n        icon: 'fa fa-lock',\n        code: 'password',\n        name: 'Mật khẩu'\n      }]\n    };\n    _this._updateUserInfo = _this._updateUserInfo.bind(_assertThisInitialized(_assertThisInitialized(_this)));\n    _this._submitChangePassword = _this._submitChangePassword.bind(_assertThisInitialized(_assertThisInitialized(_this)));\n    return _this;\n  }\n\n  _createClass(Profile, [{\n    key: \"_submitChangePassword\",\n    value: function () {\n      var _submitChangePassword2 = _asyncToGenerator(\n      /*#__PURE__*/\n      _regeneratorRuntime.mark(function _callee() {\n        var fields, checkPrePass, msg, data, res;\n        return _regeneratorRuntime.wrap(function _callee$(_context) {\n          while (1) {\n            switch (_context.prev = _context.next) {\n              case 0:\n                fields = ['pre_password', 'new_password', 'rep_password'];\n\n                if (!(detectForm(fields, this.state.data_pass) === '')) {\n                  _context.next = 20;\n                  break;\n                }\n\n                _context.next = 4;\n                return doLogin(window.USERINFO.email, this.state.data_pass['pre_password']);\n\n              case 4:\n                checkPrePass = _context.sent;\n                msg = '';\n\n                if (!(checkPrePass.token !== 'no-key')) {\n                  _context.next = 18;\n                  break;\n                }\n\n                if (!(this.state.data_pass['new_password'] === this.state.data_pass['rep_password'])) {\n                  _context.next = 15;\n                  break;\n                }\n\n                data = {\n                  id: window.USERINFO.id,\n                  password: this.state.data_pass['rep_password']\n                };\n                _context.next = 11;\n                return doUpdateModelInfo('users', data);\n\n              case 11:\n                res = _context.sent;\n                msg = res.name === 'success' ? 'Đã đổi mật khẩu thành công !' : res.message;\n                _context.next = 16;\n                break;\n\n              case 15:\n                msg = 'Mật khẩu mới không khớp';\n\n              case 16:\n                _context.next = 19;\n                break;\n\n              case 18:\n                msg = 'Mật khẩu cũ không đúng';\n\n              case 19:\n                if (msg !== '') {\n                  BenMessage({\n                    title: 'Thông báo',\n                    message: msg\n                  });\n                }\n\n              case 20:\n              case \"end\":\n                return _context.stop();\n            }\n          }\n        }, _callee, this);\n      }));\n\n      function _submitChangePassword() {\n        return _submitChangePassword2.apply(this, arguments);\n      }\n\n      return _submitChangePassword;\n    }()\n  }, {\n    key: \"_updateUserInfo\",\n    value: function () {\n      var _updateUserInfo2 = _asyncToGenerator(\n      /*#__PURE__*/\n      _regeneratorRuntime.mark(function _callee2() {\n        var fields, res, userInfo;\n        return _regeneratorRuntime.wrap(function _callee2$(_context2) {\n          while (1) {\n            switch (_context2.prev = _context2.next) {\n              case 0:\n                fields = ['name', 'phone', 'email'];\n\n                if (!(detectForm(fields, this.state.data) === '')) {\n                  _context2.next = 7;\n                  break;\n                }\n\n                _context2.next = 4;\n                return doUpdateModelInfo('users', this.state.data);\n\n              case 4:\n                res = _context2.sent;\n                userInfo = Object.assign(this.props.users.info, this.state.data);\n                this.props.saveUserInfo(userInfo);\n\n              case 7:\n              case \"end\":\n                return _context2.stop();\n            }\n          }\n        }, _callee2, this);\n      }));\n\n      function _updateUserInfo() {\n        return _updateUserInfo2.apply(this, arguments);\n      }\n\n      return _updateUserInfo;\n    }()\n  }, {\n    key: \"_onUploaded\",\n    value: function _onUploaded(res) {\n      if (res.success) {\n        var info = this.state.data;\n        Object.assign(info, {\n          photoURL: res.data.link\n        });\n        this.setState({\n          data: info\n        });\n      }\n    }\n  }, {\n    key: \"_onChangeUserPass\",\n    value: function _onChangeUserPass(field, value) {\n      this.setState({\n        data: Object.assign(this.state.data_pass, _defineProperty({}, field, value))\n      });\n    }\n  }, {\n    key: \"_onChangeUserInfo\",\n    value: function _onChangeUserInfo(field, value) {\n      this.setState({\n        data: Object.assign(this.state.data, _defineProperty({}, field, value))\n      });\n    }\n  }, {\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      var userInfo = this.props.users.info;\n      this.setState({\n        data: {\n          id: userInfo.id,\n          name: userInfo.name,\n          photoURL: userInfo.photoURL || '',\n          phone: userInfo.phone,\n          email: userInfo.email\n        }\n      });\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this2 = this;\n\n      return React.createElement(\"div\", {\n        className: \"animated fadeIn\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 168\n        },\n        __self: this\n      }, React.createElement(\"main\", {\n        className: \"div-main\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 169\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        style: {\n          width: '70%',\n          margin: 'auto'\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 171\n        },\n        __self: this\n      }, React.createElement(BenTabs, {\n        onChangeTab: function onChangeTab(code) {\n          _this2.setState({\n            onTab: code\n          });\n        },\n        tabs: this.state.tabs,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 176\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        style: {\n          padding: 40\n        },\n        className: \"tab-pane  \".concat(this.state.onTab === 'info' ? 'active' : '', \" \"),\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 181\n        },\n        __self: this\n      }, React.createElement(FormGroup, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 182\n        },\n        __self: this\n      }, React.createElement(Row, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 183\n        },\n        __self: this\n      }, React.createElement(Col, {\n        md: 3,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 184\n        },\n        __self: this\n      }, React.createElement(ButtonUploadImage, {\n        onUploaded: function onUploaded(res) {\n          _this2._onUploaded(res);\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 185\n        },\n        __self: this\n      })), React.createElement(Col, {\n        md: 6,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 187\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        style: {\n          width: 90,\n          height: 90,\n          border: '1px dashed #aaa'\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 188\n        },\n        __self: this\n      }, React.createElement(\"img\", {\n        style: {\n          maxHeight: 90,\n          position: 'absolute'\n        },\n        src: this.state.data.photoURL,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 193\n        },\n        __self: this\n      }))))), React.createElement(FormGroup, {\n        style: {\n          marginTop: 30\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 199\n        },\n        __self: this\n      }, React.createElement(Row, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 200\n        },\n        __self: this\n      }, React.createElement(Col, {\n        md: 4,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 201\n        },\n        __self: this\n      }, React.createElement(\"label\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 202\n        },\n        __self: this\n      }, \" H\\u1ECD & T\\xEAn \"), React.createElement(InputGroup, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 203\n        },\n        __self: this\n      }, React.createElement(InputGroupAddon, {\n        addonType: \"prepend\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 204\n        },\n        __self: this\n      }, React.createElement(InputGroupText, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 205\n        },\n        __self: this\n      }, \" \", React.createElement(\"i\", {\n        className: \"fa fa-user\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 205\n        },\n        __self: this\n      }), \" \")), React.createElement(Input, {\n        id: \"name\",\n        defaultValue: this.state.data.name,\n        onChange: function onChange(e) {\n          _this2._onChangeUserInfo('name', e.target.value);\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 207\n        },\n        __self: this\n      }))), React.createElement(Col, {\n        md: 4,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 212\n        },\n        __self: this\n      }, React.createElement(\"label\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 213\n        },\n        __self: this\n      }, \" S\\u1ED1 \\u0110T \"), React.createElement(InputGroup, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 214\n        },\n        __self: this\n      }, React.createElement(InputGroupAddon, {\n        addonType: \"prepend\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 215\n        },\n        __self: this\n      }, React.createElement(InputGroupText, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 216\n        },\n        __self: this\n      }, \" \", React.createElement(\"i\", {\n        className: \"fa fa-phone\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 216\n        },\n        __self: this\n      }), \" \")), React.createElement(Input, {\n        id: \"phone\",\n        defaultValue: this.state.data.phone,\n        onChange: function onChange(e) {\n          _this2._onChangeUserInfo('phone', e.target.value);\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 218\n        },\n        __self: this\n      }))), React.createElement(Col, {\n        md: 4,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 222\n        },\n        __self: this\n      }, React.createElement(\"label\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 223\n        },\n        __self: this\n      }, \" E-mail \"), React.createElement(InputGroup, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 224\n        },\n        __self: this\n      }, React.createElement(InputGroupAddon, {\n        addonType: \"prepend\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 225\n        },\n        __self: this\n      }, React.createElement(InputGroupText, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 226\n        },\n        __self: this\n      }, \" \", React.createElement(\"i\", {\n        className: \"fa fa-envelope\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 226\n        },\n        __self: this\n      }), \" \")), React.createElement(Input, {\n        id: \"email\",\n        defaultValue: this.state.data.email,\n        onChange: function onChange(e) {\n          _this2._onChangeUserInfo('email', e.target.value);\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 228\n        },\n        __self: this\n      })))), React.createElement(Row, {\n        style: {\n          marginTop: 60\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 236\n        },\n        __self: this\n      }, React.createElement(Col, {\n        md: 4,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 237\n        },\n        __self: this\n      }, React.createElement(Button, {\n        onClick: this._updateUserInfo,\n        className: \"btn btn-normal bg-green\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 238\n        },\n        __self: this\n      }, \" \", React.createElement(\"i\", {\n        className: \"fa  fa-chevron-circle-right mr-5\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 238\n        },\n        __self: this\n      }), \" C\\u1EA5p nh\\u1EADt \"), React.createElement(\"span\", {\n        className: \"text-red ml-10 form-err \",\n        id: \"form-err\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 239\n        },\n        __self: this\n      }))))), React.createElement(\"div\", {\n        style: {\n          padding: 40\n        },\n        className: \"tab-pane  \".concat(this.state.onTab === 'password' ? 'active' : '', \" \"),\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 246\n        },\n        __self: this\n      }, React.createElement(FormGroup, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 247\n        },\n        __self: this\n      }, React.createElement(Row, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 248\n        },\n        __self: this\n      }, React.createElement(Col, {\n        md: 4,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 249\n        },\n        __self: this\n      }, React.createElement(\"label\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 250\n        },\n        __self: this\n      }, \"  M\\u1EADt kh\\u1EA9u hi\\u1EC7n t\\u1EA1i \"), React.createElement(InputGroup, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 251\n        },\n        __self: this\n      }, React.createElement(InputGroupAddon, {\n        addonType: \"prepend\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 252\n        },\n        __self: this\n      }, React.createElement(InputGroupText, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 253\n        },\n        __self: this\n      }, \" \", React.createElement(\"i\", {\n        className: \"fa fa-info\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 253\n        },\n        __self: this\n      }), \" \")), React.createElement(Input, {\n        id: \"pre_password\",\n        type: \"password\",\n        onChange: function onChange(e) {\n          _this2._onChangeUserPass('pre_password', e.target.value);\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 255\n        },\n        __self: this\n      })))), React.createElement(Row, {\n        style: {\n          marginTop: 30\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 264\n        },\n        __self: this\n      }, React.createElement(Col, {\n        md: 4,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 265\n        },\n        __self: this\n      }, React.createElement(\"label\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 266\n        },\n        __self: this\n      }, \"  M\\u1EADt kh\\u1EA9u m\\u1EDBi \"), React.createElement(InputGroup, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 267\n        },\n        __self: this\n      }, React.createElement(InputGroupAddon, {\n        addonType: \"prepend\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 268\n        },\n        __self: this\n      }, React.createElement(InputGroupText, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 269\n        },\n        __self: this\n      }, \" \", React.createElement(\"i\", {\n        className: \"fa  fa-key\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 269\n        },\n        __self: this\n      }), \" \")), React.createElement(Input, {\n        id: \"new_password\",\n        type: \"password\",\n        onChange: function onChange(e) {\n          _this2._onChangeUserPass('new_password', e.target.value);\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 271\n        },\n        __self: this\n      })))), React.createElement(Row, {\n        style: {\n          marginTop: 30\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 280\n        },\n        __self: this\n      }, React.createElement(Col, {\n        md: 4,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 281\n        },\n        __self: this\n      }, React.createElement(\"label\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 282\n        },\n        __self: this\n      }, \"  Nh\\u1EADp l\\u1EA1i m\\u1EADt kh\\u1EA9u m\\u1EDBi \"), React.createElement(InputGroup, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 283\n        },\n        __self: this\n      }, React.createElement(InputGroupAddon, {\n        addonType: \"prepend\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 284\n        },\n        __self: this\n      }, React.createElement(InputGroupText, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 285\n        },\n        __self: this\n      }, \" \", React.createElement(\"i\", {\n        className: \"fa  fa-key\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 285\n        },\n        __self: this\n      }), \" \")), React.createElement(Input, {\n        id: \"rep_password\",\n        type: \"password\",\n        onChange: function onChange(e) {\n          _this2._onChangeUserPass('rep_password', e.target.value);\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 287\n        },\n        __self: this\n      })))), React.createElement(Row, {\n        style: {\n          marginTop: 30\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 296\n        },\n        __self: this\n      }, React.createElement(Col, {\n        md: 4,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 297\n        },\n        __self: this\n      }, React.createElement(Button, {\n        onClick: this._submitChangePassword,\n        className: \"btn btn-normal bg-green\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 298\n        },\n        __self: this\n      }, React.createElement(\"i\", {\n        className: \"fa  fa-chevron-circle-right mr-5\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 299\n        },\n        __self: this\n      }), \" C\\u1EADp nh\\u1EADt\"), React.createElement(\"span\", {\n        className: \" text-red form-err\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 301\n        },\n        __self: this\n      })))))))));\n    }\n  }]);\n\n  return Profile;\n}(Component);\n\nvar mapStateToProps = function mapStateToProps(state) {\n  return {\n    users: state.users\n  };\n};\n\nvar mapDispatchToProps = function mapDispatchToProps(dispatch) {\n  return {\n    saveUserInfo: function saveUserInfo(info) {\n      dispatch({\n        type: 'SAVE_USER',\n        info: info\n      });\n    },\n    saveUserRoles: function saveUserRoles(roles) {\n      dispatch({\n        type: 'SAVE_USER_ROLE',\n        userRoles: roles\n      });\n    }\n  };\n};\n\nexport default connect(mapStateToProps, mapDispatchToProps)(Profile);","map":{"version":3,"sources":["D:/actions/st_frontend/src/pages/Profile/index.js"],"names":["detectForm","doUpdateModelInfo","doLogin","React","Component","connect","Row","Col","Button","FormGroup","Input","InputGroup","InputGroupAddon","InputGroupText","BenTabs","ButtonUploadImage","BenMessage","Profile","props","state","data","name","photoURL","phone","email","data_pass","pre_password","new_password","rep_password","onTab","tabs","icon","code","_updateUserInfo","bind","_submitChangePassword","fields","window","USERINFO","checkPrePass","msg","token","id","password","res","message","title","userInfo","Object","assign","users","info","saveUserInfo","success","link","setState","field","value","width","margin","padding","_onUploaded","height","border","maxHeight","position","marginTop","e","_onChangeUserInfo","target","_onChangeUserPass","mapStateToProps","mapDispatchToProps","dispatch","type","saveUserRoles","roles","userRoles"],"mappings":";;;;;;;;;;AAAA;AACA,OAAOA,UAAP,MAAuB,8BAAvB;AACA,OAAOC,iBAAP,MAA8B,oCAA9B;AACA,OAAOC,OAAP,MAAoB,0BAApB;AAEA,OAAOC,KAAP,IAAgBC,SAAhB,QAAiC,OAAjC;AACA,SAASC,OAAT,QAAwB,aAAxB;AAEA,SAASC,GAAT,EAAcC,GAAd,EAAmBC,MAAnB,EAA2BC,SAA3B,EAAsCC,KAAtC,EAA6CC,UAA7C,EAAwDC,eAAxD,EAAyEC,cAAzE,QAAgG,YAAhG;AAEA,OAAOC,OAAP,MAAoB,0BAApB;AACA,OAAOC,iBAAP,MAA8B,oCAA9B;AACA,OAAOC,UAAP,MAAuB,6BAAvB;;IAGMC,O;;;;;AAGJ,mBAAYC,KAAZ,EAAkB;AAAA;;AAAA;;AAEhB,iFAAMA,KAAN;AAEA,UAAKC,KAAL,GAAa;AAEXC,MAAAA,IAAI,EAAC;AACHC,QAAAA,IAAI,EAAC,EADF;AAEHC,QAAAA,QAAQ,EAAC,EAFN;AAGHC,QAAAA,KAAK,EAAC,EAHH;AAIHC,QAAAA,KAAK,EAAC;AAJH,OAFM;AASXC,MAAAA,SAAS,EAAC;AACRC,QAAAA,YAAY,EAAC,EADL;AAERC,QAAAA,YAAY,EAAC,EAFL;AAGRC,QAAAA,YAAY,EAAC;AAHL,OATC;AAeXC,MAAAA,KAAK,EAAC,MAfK;AAgBXC,MAAAA,IAAI,EAAC,CACH;AAAEC,QAAAA,IAAI,EAAC,YAAP;AAAoBC,QAAAA,IAAI,EAAC,MAAzB;AAAgCX,QAAAA,IAAI,EAAC;AAArC,OADG,EAEH;AAAEU,QAAAA,IAAI,EAAC,YAAP;AAAoBC,QAAAA,IAAI,EAAC,UAAzB;AAAoCX,QAAAA,IAAI,EAAC;AAAzC,OAFG;AAhBM,KAAb;AAuBA,UAAKY,eAAL,GAAuB,MAAKA,eAAL,CAAqBC,IAArB,uDAAvB;AACA,UAAKC,qBAAL,GAA6B,MAAKA,qBAAL,CAA2BD,IAA3B,uDAA7B;AA5BgB;AA8BjB;;;;;;;;;;;;;AAKOE,gBAAAA,M,GAAS,CAAC,cAAD,EAAgB,cAAhB,EAA+B,cAA/B,C;;sBAIZpC,UAAU,CAACoC,MAAD,EAAQ,KAAKjB,KAAL,CAAWM,SAAnB,CAAV,KAA0C,E;;;;;;uBAEfvB,OAAO,CAACmC,MAAM,CAACC,QAAP,CAAgBd,KAAjB,EAAuB,KAAKL,KAAL,CAAWM,SAAX,CAAqB,cAArB,CAAvB,C;;;AAA7Bc,gBAAAA,Y;AACFC,gBAAAA,G,GAAM,E;;sBAGPD,YAAY,CAACE,KAAb,KAAqB,Q;;;;;sBAEnB,KAAKtB,KAAL,CAAWM,SAAX,CAAqB,cAArB,MAAuC,KAAKN,KAAL,CAAWM,SAAX,CAAqB,cAArB,C;;;;;AAClCL,gBAAAA,I,GAAO;AACXsB,kBAAAA,EAAE,EAACL,MAAM,CAACC,QAAP,CAAgBI,EADR;AAEXC,kBAAAA,QAAQ,EAAC,KAAKxB,KAAL,CAAWM,SAAX,CAAqB,cAArB;AAFE,iB;;uBAKMxB,iBAAiB,CAAC,OAAD,EAASmB,IAAT,C;;;AAA9BwB,gBAAAA,G;AACNJ,gBAAAA,GAAG,GAAII,GAAG,CAACvB,IAAJ,KAAa,SAAb,GAAyB,8BAAzB,GAA0DuB,GAAG,CAACC,OAArE;;;;;AAMAL,gBAAAA,GAAG,GAAG,yBAAN;;;;;;;AAIFA,gBAAAA,GAAG,GAAG,wBAAN;;;AAGF,oBAAGA,GAAG,KAAG,EAAT,EAAY;AACVxB,kBAAAA,UAAU,CAAC;AACT8B,oBAAAA,KAAK,EAAC,WADG;AAETD,oBAAAA,OAAO,EAACL;AAFC,mBAAD,CAAV;AAID;;;;;;;;;;;;;;;;;;;;;;;;;;;AAOGJ,gBAAAA,M,GAAS,CAAC,MAAD,EAAQ,OAAR,EAAgB,OAAhB,C;;sBACZpC,UAAU,CAACoC,MAAD,EAAQ,KAAKjB,KAAL,CAAWC,IAAnB,CAAV,KAAqC,E;;;;;;uBAEnBnB,iBAAiB,CAAC,OAAD,EAAS,KAAKkB,KAAL,CAAWC,IAApB,C;;;AAA9BwB,gBAAAA,G;AACAG,gBAAAA,Q,GAAYC,MAAM,CAACC,MAAP,CAAc,KAAK/B,KAAL,CAAWgC,KAAX,CAAiBC,IAA/B,EAAoC,KAAKhC,KAAL,CAAWC,IAA/C,C;AAElB,qBAAKF,KAAL,CAAWkC,YAAX,CAAwBL,QAAxB;;;;;;;;;;;;;;;;;;gCAOQH,G,EAAI;AAEd,UAAGA,GAAG,CAACS,OAAP,EAAe;AAEb,YAAIF,IAAI,GAAG,KAAKhC,KAAL,CAAWC,IAAtB;AACA4B,QAAAA,MAAM,CAACC,MAAP,CAAcE,IAAd,EAAmB;AACjB7B,UAAAA,QAAQ,EAACsB,GAAG,CAACxB,IAAJ,CAASkC;AADD,SAAnB;AAGA,aAAKC,QAAL,CAAc;AACZnC,UAAAA,IAAI,EAAC+B;AADO,SAAd;AAKD;AAEF;;;sCAEiBK,K,EAAMC,K,EAAM;AAC5B,WAAKF,QAAL,CAAc;AACZnC,QAAAA,IAAI,EAAC4B,MAAM,CAACC,MAAP,CAAc,KAAK9B,KAAL,CAAWM,SAAzB,sBACF+B,KADE,EACKC,KADL;AADO,OAAd;AAKD;;;sCAEiBD,K,EAAMC,K,EAAM;AAE5B,WAAKF,QAAL,CAAc;AACZnC,QAAAA,IAAI,EAAC4B,MAAM,CAACC,MAAP,CAAc,KAAK9B,KAAL,CAAWC,IAAzB,sBACFoC,KADE,EACKC,KADL;AADO,OAAd;AAMD;;;wCAEkB;AACjB,UAAMV,QAAQ,GAAG,KAAK7B,KAAL,CAAWgC,KAAX,CAAiBC,IAAlC;AAEA,WAAKI,QAAL,CAAc;AACZnC,QAAAA,IAAI,EAAC;AACHsB,UAAAA,EAAE,EAACK,QAAQ,CAACL,EADT;AAEHrB,UAAAA,IAAI,EAAC0B,QAAQ,CAAC1B,IAFX;AAGHC,UAAAA,QAAQ,EAACyB,QAAQ,CAACzB,QAAT,IAAqB,EAH3B;AAIHC,UAAAA,KAAK,EAACwB,QAAQ,CAACxB,KAJZ;AAKHC,UAAAA,KAAK,EAACuB,QAAQ,CAACvB;AALZ;AADO,OAAd;AAWD;;;6BAGO;AAAA;;AAIN,aACE;AAAK,QAAA,SAAS,EAAC,iBAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SACE;AAAM,QAAA,SAAS,EAAC,UAAhB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SAEI;AAAK,QAAA,KAAK,EAAE;AACVkC,UAAAA,KAAK,EAAC,KADI;AAEVC,UAAAA,MAAM,EAAC;AAFG,SAAZ;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SAKI,oBAAC,OAAD;AACA,QAAA,WAAW,EAAE,qBAAC3B,IAAD,EAAQ;AAAE,UAAA,MAAI,CAACuB,QAAL,CAAc;AAAC1B,YAAAA,KAAK,EAACG;AAAP,WAAd;AAA6B,SADpD;AAEA,QAAA,IAAI,EAAG,KAAKb,KAAL,CAAWW,IAFlB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SAKA;AAAK,QAAA,KAAK,EAAE;AAAC8B,UAAAA,OAAO,EAAC;AAAT,SAAZ;AAA0B,QAAA,SAAS,sBAAkB,KAAKzC,KAAL,CAAWU,KAAX,KAAmB,MAAnB,GAA0B,QAA1B,GAAmC,EAArD,MAAnC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SACE,oBAAC,SAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SACE,oBAAC,GAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SACE,oBAAC,GAAD;AAAK,QAAA,EAAE,EAAE,CAAT;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SACE,oBAAC,iBAAD;AAAmB,QAAA,UAAU,EAAE,oBAACe,GAAD,EAAO;AAAE,UAAA,MAAI,CAACiB,WAAL,CAAiBjB,GAAjB;AAAuB,SAA/D;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,QADF,CADF,EAIE,oBAAC,GAAD;AAAK,QAAA,EAAE,EAAE,CAAT;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SACI;AAAK,QAAA,KAAK,EAAE;AACRc,UAAAA,KAAK,EAAE,EADC;AACEI,UAAAA,MAAM,EAAE,EADV;AAERC,UAAAA,MAAM,EAAC;AAFC,SAAZ;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SAKI;AAAK,QAAA,KAAK,EAAE;AAACC,UAAAA,SAAS,EAAE,EAAZ;AAAeC,UAAAA,QAAQ,EAAE;AAAzB,SAAZ;AAAkD,QAAA,GAAG,EAAG,KAAK9C,KAAL,CAAWC,IAAX,CAAgBE,QAAxE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,QALJ,CADJ,CAJF,CADF,CADF,EAkBE,oBAAC,SAAD;AAAW,QAAA,KAAK,EAAE;AAAC4C,UAAAA,SAAS,EAAC;AAAX,SAAlB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SACE,oBAAC,GAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SACE,oBAAC,GAAD;AAAK,QAAA,EAAE,EAAE,CAAT;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SACI;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,8BADJ,EAEI,oBAAC,UAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SACI,oBAAC,eAAD;AAAiB,QAAA,SAAS,EAAC,SAA3B;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SACE,oBAAC,cAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,cAAiB;AAAG,QAAA,SAAS,EAAC,YAAb;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,QAAjB,MADF,CADJ,EAII,oBAAC,KAAD;AAAO,QAAA,EAAE,EAAC,MAAV;AAAiB,QAAA,YAAY,EAAE,KAAK/C,KAAL,CAAWC,IAAX,CAAgBC,IAA/C;AAAqD,QAAA,QAAQ,EAAG,kBAAC8C,CAAD,EAAK;AAAE,UAAA,MAAI,CAACC,iBAAL,CAAuB,MAAvB,EAA8BD,CAAC,CAACE,MAAF,CAASZ,KAAvC;AAA+C,SAAtH;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,QAJJ,CAFJ,CADF,EAYE,oBAAC,GAAD;AAAK,QAAA,EAAE,EAAE,CAAT;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SACI;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,6BADJ,EAEI,oBAAC,UAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SACI,oBAAC,eAAD;AAAiB,QAAA,SAAS,EAAC,SAA3B;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SACE,oBAAC,cAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,cAAiB;AAAG,QAAA,SAAS,EAAC,aAAb;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,QAAjB,MADF,CADJ,EAII,oBAAC,KAAD;AAAO,QAAA,EAAE,EAAC,OAAV;AAAkB,QAAA,YAAY,EAAE,KAAKtC,KAAL,CAAWC,IAAX,CAAgBG,KAAhD;AAAuD,QAAA,QAAQ,EAAG,kBAAC4C,CAAD,EAAK;AAAE,UAAA,MAAI,CAACC,iBAAL,CAAuB,OAAvB,EAA+BD,CAAC,CAACE,MAAF,CAASZ,KAAxC;AAAgD,SAAzH;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,QAJJ,CAFJ,CAZF,EAsBE,oBAAC,GAAD;AAAK,QAAA,EAAE,EAAE,CAAT;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SACI;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBADJ,EAEI,oBAAC,UAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SACI,oBAAC,eAAD;AAAiB,QAAA,SAAS,EAAC,SAA3B;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SACE,oBAAC,cAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,cAAiB;AAAG,QAAA,SAAS,EAAC,gBAAb;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,QAAjB,MADF,CADJ,EAII,oBAAC,KAAD;AAAO,QAAA,EAAE,EAAC,OAAV;AAAkB,QAAA,YAAY,EAAE,KAAKtC,KAAL,CAAWC,IAAX,CAAgBI,KAAhD;AAAuD,QAAA,QAAQ,EAAG,kBAAC2C,CAAD,EAAK;AAAE,UAAA,MAAI,CAACC,iBAAL,CAAuB,OAAvB,EAA+BD,CAAC,CAACE,MAAF,CAASZ,KAAxC;AAAgD,SAAzH;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,QAJJ,CAFJ,CAtBF,CADF,EAqCE,oBAAC,GAAD;AAAK,QAAA,KAAK,EAAE;AAACS,UAAAA,SAAS,EAAC;AAAX,SAAZ;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SACG,oBAAC,GAAD;AAAK,QAAA,EAAE,EAAE,CAAT;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SACI,oBAAC,MAAD;AAAQ,QAAA,OAAO,EAAG,KAAKjC,eAAvB;AAAyC,QAAA,SAAS,EAAC,yBAAnD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,cAA8E;AAAG,QAAA,SAAS,EAAC,kCAAb;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,QAA9E,yBADJ,EAEI;AAAM,QAAA,SAAS,EAAC,0BAAhB;AAA2C,QAAA,EAAE,EAAC,UAA9C;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,QAFJ,CADH,CArCF,CAlBF,CALA,EAsEA;AAAK,QAAA,KAAK,EAAE;AAAC2B,UAAAA,OAAO,EAAC;AAAT,SAAZ;AAA0B,QAAA,SAAS,sBAAkB,KAAKzC,KAAL,CAAWU,KAAX,KAAmB,UAAnB,GAA8B,QAA9B,GAAuC,EAAzD,MAAnC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SACI,oBAAC,SAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SACE,oBAAC,GAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SACG,oBAAC,GAAD;AAAK,QAAA,EAAE,EAAE,CAAT;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SACG;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oDADH,EAEG,oBAAC,UAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SACE,oBAAC,eAAD;AAAiB,QAAA,SAAS,EAAC,SAA3B;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SACE,oBAAC,cAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,cAAiB;AAAG,QAAA,SAAS,EAAC,YAAb;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,QAAjB,MADF,CADF,EAIE,oBAAC,KAAD;AACM,QAAA,EAAE,EAAC,cADT;AAEM,QAAA,IAAI,EAAC,UAFX;AAGM,QAAA,QAAQ,EAAG,kBAACsC,CAAD,EAAK;AAAE,UAAA,MAAI,CAACG,iBAAL,CAAuB,cAAvB,EAAsCH,CAAC,CAACE,MAAF,CAASZ,KAA/C;AAAuD,SAH/E;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,QAJF,CAFH,CADH,CADF,EAiBE,oBAAC,GAAD;AAAK,QAAA,KAAK,EAAE;AAACS,UAAAA,SAAS,EAAC;AAAX,SAAZ;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SACG,oBAAC,GAAD;AAAK,QAAA,EAAE,EAAE,CAAT;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SACG;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,0CADH,EAEG,oBAAC,UAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SACE,oBAAC,eAAD;AAAiB,QAAA,SAAS,EAAC,SAA3B;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SACE,oBAAC,cAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,cAAiB;AAAG,QAAA,SAAS,EAAC,YAAb;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,QAAjB,MADF,CADF,EAIE,oBAAC,KAAD;AACM,QAAA,EAAE,EAAC,cADT;AAEM,QAAA,IAAI,EAAC,UAFX;AAGM,QAAA,QAAQ,EAAG,kBAACC,CAAD,EAAK;AAAE,UAAA,MAAI,CAACG,iBAAL,CAAuB,cAAvB,EAAsCH,CAAC,CAACE,MAAF,CAASZ,KAA/C;AAAuD,SAH/E;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,QAJF,CAFH,CADH,CAjBF,EAiCE,oBAAC,GAAD;AAAK,QAAA,KAAK,EAAE;AAACS,UAAAA,SAAS,EAAC;AAAX,SAAZ;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SACG,oBAAC,GAAD;AAAK,QAAA,EAAE,EAAE,CAAT;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SACG;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,6DADH,EAEG,oBAAC,UAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SACE,oBAAC,eAAD;AAAiB,QAAA,SAAS,EAAC,SAA3B;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SACE,oBAAC,cAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,cAAiB;AAAG,QAAA,SAAS,EAAC,YAAb;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,QAAjB,MADF,CADF,EAIE,oBAAC,KAAD;AACM,QAAA,EAAE,EAAC,cADT;AAEM,QAAA,IAAI,EAAC,UAFX;AAGM,QAAA,QAAQ,EAAG,kBAACC,CAAD,EAAK;AAAE,UAAA,MAAI,CAACG,iBAAL,CAAuB,cAAvB,EAAsCH,CAAC,CAACE,MAAF,CAASZ,KAA/C;AAAuD,SAH/E;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,QAJF,CAFH,CADH,CAjCF,EAiDE,oBAAC,GAAD;AAAK,QAAA,KAAK,EAAE;AAACS,UAAAA,SAAS,EAAC;AAAX,SAAZ;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SACI,oBAAC,GAAD;AAAK,QAAA,EAAE,EAAE,CAAT;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SACE,oBAAC,MAAD;AAAQ,QAAA,OAAO,EAAE,KAAK/B,qBAAtB;AAA8C,QAAA,SAAS,EAAC,yBAAxD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SACE;AAAG,QAAA,SAAS,EAAC,kCAAb;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,QADF,wBADF,EAIE;AAAM,QAAA,SAAS,EAAC,oBAAhB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,QAJF,CADJ,CAjDF,CADJ,CAtEA,CALJ,CAFJ,CADF,CADF;AAqJD;;;;EA5SmB/B,S;;AAgTtB,IAAMmE,eAAe,GAAG,SAAlBA,eAAkB,CAACpD,KAAD,EAAW;AACjC,SAAO;AACL+B,IAAAA,KAAK,EAAE/B,KAAK,CAAC+B;AADR,GAAP;AAGD,CAJD;;AAKA,IAAMsB,kBAAkB,GAAG,SAArBA,kBAAqB,CAAAC,QAAQ,EAAI;AACrC,SAAO;AACLrB,IAAAA,YAAY,EAAE,sBAACD,IAAD,EAAU;AACtBsB,MAAAA,QAAQ,CAAC;AACPC,QAAAA,IAAI,EAAC,WADE;AAEPvB,QAAAA,IAAI,EAACA;AAFE,OAAD,CAAR;AAID,KANI;AAOLwB,IAAAA,aAAa,EAAC,uBAACC,KAAD,EAAS;AACrBH,MAAAA,QAAQ,CAAC;AACPC,QAAAA,IAAI,EAAC,gBADE;AAEPG,QAAAA,SAAS,EAACD;AAFH,OAAD,CAAR;AAID;AAZI,GAAP;AAcD,CAfD;;AAkBA,eAAevE,OAAO,CAACkE,eAAD,EAAiBC,kBAAjB,CAAP,CAA4CvD,OAA5C,CAAf","sourcesContent":["// HOOKS \r\nimport detectForm from '../../hook/before/detectform';\r\nimport doUpdateModelInfo from '../../hook/ultil/doUpdateModelInfo';\r\nimport doLogin from '../../hook/ultil/doLogin';\r\n\r\nimport React, { Component } from 'react';\r\nimport { connect } from 'react-redux';\r\n\r\nimport { Row, Col, Button, FormGroup, Input, InputGroup,InputGroupAddon, InputGroupText  } from 'reactstrap';\r\n\r\nimport BenTabs from '../../components/BenTabs';\r\nimport ButtonUploadImage from '../../components/ButtonUploadImage';\r\nimport BenMessage from '../../components/BenMessage';\r\n\r\n\r\nclass Profile extends Component{\r\n\r\n\r\n  constructor(props){\r\n\r\n    super(props);\r\n\r\n    this.state = {\r\n      \r\n      data:{\r\n        name:'',\r\n        photoURL:'',\r\n        phone:'',\r\n        email:''\r\n      },\r\n\r\n      data_pass:{\r\n        pre_password:'',\r\n        new_password:'',\r\n        rep_password:''\r\n      },\r\n\r\n      onTab:'info',\r\n      tabs:[\r\n        { icon:'fa fa-user',code:'info',name:'Thông tin' },\r\n        { icon:'fa fa-lock',code:'password',name:'Mật khẩu' }\r\n      ]\r\n    }\r\n\r\n\r\n    this._updateUserInfo = this._updateUserInfo.bind(this);\r\n    this._submitChangePassword = this._submitChangePassword.bind(this);\r\n\r\n  }\r\n\r\n  async _submitChangePassword(){\r\n\r\n    \r\n    const fields = ['pre_password','new_password','rep_password'];\r\n\r\n    \r\n\r\n    if(detectForm(fields,this.state.data_pass)===''){\r\n\r\n      const checkPrePass =  await doLogin(window.USERINFO.email,this.state.data_pass['pre_password']);\r\n      let msg = '';\r\n\r\n\r\n      if(checkPrePass.token!=='no-key'){\r\n        \r\n        if(this.state.data_pass['new_password']===this.state.data_pass['rep_password']){\r\n          const data = {\r\n            id:window.USERINFO.id,\r\n            password:this.state.data_pass['rep_password']\r\n          }\r\n  \r\n          const res = await  doUpdateModelInfo('users',data);\r\n          msg =  res.name === 'success' ? 'Đã đổi mật khẩu thành công !' : res.message\r\n          \r\n\r\n\r\n        }else{\r\n          \r\n          msg = 'Mật khẩu mới không khớp';\r\n          \r\n        }\r\n      }else{\r\n        msg = 'Mật khẩu cũ không đúng'\r\n      }\r\n\r\n      if(msg!==''){\r\n        BenMessage({\r\n          title:'Thông báo',\r\n          message:msg\r\n        });\r\n      }\r\n      \r\n      \r\n    }\r\n  }\r\n  async _updateUserInfo(){\r\n    \r\n    const fields = ['name','phone','email'];\r\n    if(detectForm(fields,this.state.data)===''){\r\n      \r\n      const res = await  doUpdateModelInfo('users',this.state.data);\r\n      const userInfo =  Object.assign(this.props.users.info,this.state.data);\r\n      \r\n      this.props.saveUserInfo(userInfo);\r\n      \r\n\r\n\r\n    }\r\n\r\n  }\r\n  _onUploaded(res){\r\n    \r\n    if(res.success){\r\n      \r\n      let info = this.state.data;\r\n      Object.assign(info,{\r\n        photoURL:res.data.link\r\n      });\r\n      this.setState({\r\n        data:info\r\n      });\r\n\r\n\r\n    }\r\n    \r\n  }\r\n\r\n  _onChangeUserPass(field,value){\r\n    this.setState({\r\n      data:Object.assign(this.state.data_pass,{\r\n        [field]:value\r\n      })\r\n    })\r\n  }\r\n\r\n  _onChangeUserInfo(field,value){\r\n    \r\n    this.setState({\r\n      data:Object.assign(this.state.data,{\r\n        [field]:value\r\n      })\r\n    })\r\n    \r\n  }\r\n\r\n  componentDidMount(){\r\n    const userInfo = this.props.users.info\r\n    \r\n    this.setState({\r\n      data:{\r\n        id:userInfo.id,\r\n        name:userInfo.name,\r\n        photoURL:userInfo.photoURL || '',\r\n        phone:userInfo.phone,\r\n        email:userInfo.email\r\n      }\r\n    });\r\n\r\n\r\n  }\r\n  \r\n\r\n  render(){\r\n\r\n    \r\n    \r\n    return (  \r\n      <div className=\"animated fadeIn\">\r\n        <main className=\"div-main\">\r\n\r\n            <div style={{\r\n              width:'70%',\r\n              margin:'auto',\r\n            }}>\r\n\r\n                <BenTabs \r\n                onChangeTab={(code)=>{ this.setState({onTab:code}) }} \r\n                tabs={ this.state.tabs }\r\n              >\r\n\r\n                <div style={{padding:40}} className={  `tab-pane  ${ this.state.onTab==='info'?'active':'' } ` }>\r\n                  <FormGroup>\r\n                    <Row>\r\n                      <Col md={3}>\r\n                        <ButtonUploadImage onUploaded={(res)=>{ this._onUploaded(res) }} />\r\n                      </Col>\r\n                      <Col md={6}>\r\n                          <div style={{\r\n                              width: 90,height: 90,\r\n                              border:'1px dashed #aaa',\r\n          \r\n                            }}>\r\n                              <img style={{maxHeight: 90,position: 'absolute'}} src={ this.state.data.photoURL } />\r\n                          </div>\r\n                      </Col>\r\n                    </Row>\r\n                  </FormGroup>\r\n                  \r\n                  <FormGroup style={{marginTop:30}}>\r\n                    <Row>\r\n                      <Col md={4}>\r\n                          <label> Họ & Tên </label>    \r\n                          <InputGroup>\r\n                              <InputGroupAddon addonType=\"prepend\">\r\n                                <InputGroupText> <i className=\"fa fa-user\"></i> </InputGroupText>\r\n                              </InputGroupAddon>\r\n                              <Input id=\"name\" defaultValue={this.state.data.name} onChange={ (e)=>{ this._onChangeUserInfo('name',e.target.value) }} />\r\n                                 \r\n                          </InputGroup>\r\n                                  \r\n                      </Col>\r\n                      <Col md={4}>\r\n                          <label> Số ĐT </label>    \r\n                          <InputGroup>\r\n                              <InputGroupAddon addonType=\"prepend\">\r\n                                <InputGroupText> <i className=\"fa fa-phone\"></i> </InputGroupText>\r\n                              </InputGroupAddon>\r\n                              <Input id=\"phone\" defaultValue={this.state.data.phone} onChange={ (e)=>{ this._onChangeUserInfo('phone',e.target.value) }} />\r\n                                 \r\n                          </InputGroup>\r\n                      </Col>\r\n                      <Col md={4}>\r\n                          <label> E-mail </label>    \r\n                          <InputGroup>\r\n                              <InputGroupAddon addonType=\"prepend\">\r\n                                <InputGroupText> <i className=\"fa fa-envelope\"></i> </InputGroupText>\r\n                              </InputGroupAddon>\r\n                              <Input id=\"email\" defaultValue={this.state.data.email} onChange={ (e)=>{ this._onChangeUserInfo('email',e.target.value) }} />\r\n                                 \r\n                          </InputGroup>\r\n                      </Col>\r\n                      \r\n                      \r\n                    </Row>\r\n\r\n                    <Row style={{marginTop:60}}>\r\n                       <Col md={4}>\r\n                           <Button onClick={ this._updateUserInfo } className=\"btn btn-normal bg-green\"> <i className=\"fa  fa-chevron-circle-right mr-5\"></i> Cấp nhật </Button> \r\n                           <span className=\"text-red ml-10 form-err \" id=\"form-err\"></span>\r\n                       </Col>     \r\n                    </Row>\r\n                  </FormGroup>\r\n\r\n                </div>\r\n\r\n                <div style={{padding:40}} className={  `tab-pane  ${ this.state.onTab==='password'?'active':'' } ` }>\r\n                    <FormGroup>\r\n                      <Row>\r\n                         <Col md={4}>\r\n                            <label>  Mật khẩu hiện tại </label>\r\n                            <InputGroup>\r\n                              <InputGroupAddon addonType=\"prepend\">\r\n                                <InputGroupText> <i className=\"fa fa-info\"></i> </InputGroupText>\r\n                              </InputGroupAddon>\r\n                              <Input \r\n                                    id=\"pre_password\" \r\n                                    type=\"password\" \r\n                                    onChange={ (e)=>{ this._onChangeUserPass('pre_password',e.target.value) }} \r\n                              />\r\n                          </InputGroup>\r\n                         </Col>  \r\n                      </Row>\r\n                      \r\n                      <Row style={{marginTop:30}}>\r\n                         <Col md={4}>\r\n                            <label>  Mật khẩu mới </label>\r\n                            <InputGroup>\r\n                              <InputGroupAddon addonType=\"prepend\">\r\n                                <InputGroupText> <i className=\"fa  fa-key\"></i> </InputGroupText>\r\n                              </InputGroupAddon>\r\n                              <Input \r\n                                    id=\"new_password\" \r\n                                    type=\"password\" \r\n                                    onChange={ (e)=>{ this._onChangeUserPass('new_password',e.target.value) }} \r\n                              />\r\n                          </InputGroup>\r\n                         </Col>\r\n                      </Row>\r\n\r\n                      <Row style={{marginTop:30}}>\r\n                         <Col md={4}>\r\n                            <label>  Nhập lại mật khẩu mới </label>\r\n                            <InputGroup>\r\n                              <InputGroupAddon addonType=\"prepend\">\r\n                                <InputGroupText> <i className=\"fa  fa-key\"></i> </InputGroupText>\r\n                              </InputGroupAddon>\r\n                              <Input \r\n                                    id=\"rep_password\" \r\n                                    type=\"password\" \r\n                                    onChange={ (e)=>{ this._onChangeUserPass('rep_password',e.target.value) }} \r\n                              />\r\n                          </InputGroup>\r\n                         </Col>\r\n                      </Row>\r\n                       \r\n                      <Row style={{marginTop:30}}>\r\n                          <Col md={4}>\r\n                            <Button onClick={this._submitChangePassword}  className=\"btn btn-normal bg-green\" >\r\n                              <i className=\"fa  fa-chevron-circle-right mr-5\"></i> Cập nhật \r\n                            </Button>\r\n                            <span className=\" text-red form-err\"></span>\r\n                          </Col>\r\n                      </Row>\r\n                      \r\n\r\n                    </FormGroup>\r\n                </div>\r\n\r\n                \r\n              </BenTabs>\r\n              \r\n            </div>\r\n        </main>\r\n      </div>\r\n    )\r\n  }\r\n}\r\n\r\n\r\nconst mapStateToProps = (state) => {\r\n  return {\r\n    users: state.users\r\n  }\r\n}\r\nconst mapDispatchToProps = dispatch => {\r\n  return {\r\n    saveUserInfo: (info) => {\r\n      dispatch({\r\n        type:'SAVE_USER',\r\n        info:info\r\n      });\r\n    },\r\n    saveUserRoles:(roles)=>{\r\n      dispatch({\r\n        type:'SAVE_USER_ROLE',\r\n        userRoles:roles\r\n      })\r\n    }\r\n  }\r\n}\r\n\r\n\r\nexport default connect(mapStateToProps,mapDispatchToProps)(Profile);\r\n"]},"metadata":{},"sourceType":"module"}