{"ast":null,"code":"import _defineProperty from \"D:\\\\actions\\\\st_frontend\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/defineProperty\";\nimport _regeneratorRuntime from \"D:\\\\actions\\\\st_frontend\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/regenerator\";\nimport _asyncToGenerator from \"D:\\\\actions\\\\st_frontend\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/asyncToGenerator\";\nimport _objectSpread from \"D:\\\\actions\\\\st_frontend\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/objectSpread\";\nimport _classCallCheck from \"D:\\\\actions\\\\st_frontend\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"D:\\\\actions\\\\st_frontend\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"D:\\\\actions\\\\st_frontend\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"D:\\\\actions\\\\st_frontend\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"D:\\\\actions\\\\st_frontend\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/inherits\";\nimport _assertThisInitialized from \"D:\\\\actions\\\\st_frontend\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/assertThisInitialized\";\nvar _jsxFileName = \"D:\\\\actions\\\\st_frontend\\\\src\\\\pages\\\\Order\\\\_S\\\\index.js\";\nimport { ORDER_STATUS } from '../../../config/app.config';\nimport { PAYMENT_TYPES_DECO } from '../../../config/payment.type'; // HOOKS \n\nimport doGetModelInfo from '../../../hook/ultil/doGetModelInfo';\n/* OBJECT - PLUGIN*/\n\nimport Model from '../../../model/model'; // HOOK ULTI \n\nimport moment from 'moment';\nimport React, { Component } from 'react';\nimport { ButtonGroup, FormGroup, Input, Label } from 'reactstrap';\nimport { connect } from 'react-redux';\nimport { Link } from 'react-router-dom';\nimport numeral from 'numeral';\n/* MODAL FORM & CTRL */\n\nimport MyForm from './Form';\nimport ProgressForm from './ProgressForm';\nimport DeleteForm from './DeleteForm';\nimport ReceiptForm from './ReceiptForm';\nimport CashFlowForm from './CashflowForm';\nimport PrintForm from './PrintForm';\n/*INCLUDE OTHER COMPONENT*/\n\nimport { BenGrid } from '../../../components/BenGrid2';\nimport ButtonExpand from '../../../components/ButtonExpand';\nimport ButtonExpandList from '../../../components/ButtonExpandList';\nimport BenMessage from '../../../components/BenMessage';\nimport SelectList from '../../../components/SelectList';\nimport SelectListModelCode from '../../../components/SelectListModelCode';\nimport RankDatePicker from '../../../components/RankDatePicker';\nvar MODE = 'orders';\nvar WAREHOUSE_RECEIPT = 'warehouse_receipts';\nvar BILLS = 'bills';\n\nvar OrderView =\n/*#__PURE__*/\nfunction (_Component) {\n  _inherits(OrderView, _Component);\n\n  function OrderView(props) {\n    var _this;\n\n    _classCallCheck(this, OrderView);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(OrderView).call(this, props));\n    _this._curInfo = {};\n    _this._companyInfo = {};\n    _this.state = {\n      typeAction: '',\n      onAction: '',\n      status: '',\n      isOpenForm: false,\n      isOpenProgressForm: false,\n      isOpenDeleteForm: false,\n      isOpenReceiptForm: false,\n      isOpenPrintForm: false,\n      isOpenCashflowForm: false,\n      defaultStatusType: 2,\n      // 0 : BAO GIA - 1 DON HANG - 2 : TAT CA\n      type: '',\n      // ORDER TYPE : QUOTATION - ORDER FOR RENDER PRINT FORM\n      actions: [{\n        code: 'update',\n        icon: 'fa-pencil',\n        name: 'Cập nhật báo giá'\n      }, {\n        code: 'remove',\n        icon: 'fa-trash',\n        name: 'Huỷ báo giá',\n        active: true\n      }, {\n        code: 'progress',\n        icon: 'icon icon-fire',\n        name: 'Xử lý tiến trình'\n      }, {\n        code: 'out_stock',\n        icon: 'fa-truck',\n        name: 'Tạo phiếu xuất kho'\n      }, {\n        code: 'income',\n        icon: 'fa-heart',\n        name: 'Tạo phiếu thu'\n      }, {\n        code: 'view-quotation',\n        icon: 'fa-search',\n        name: 'Xem Báo Giá'\n      }, {\n        code: 'view-order',\n        icon: 'fa-search',\n        name: 'Xem Đơn hàng'\n      }]\n    };\n    _this.grid = {\n      colums: [{\n        headerName: \"Mã KH\",\n        field: \"customer_code\",\n        width: 150,\n        cellRenderer: function cellRenderer(params) {\n          return \"<span class=\\\"badge bg-green\\\"> <i class=\\\"fa fa-user mr-5\\\"></i> \".concat(params.value, \" </span>\");\n        }\n      }, {\n        headerName: \"Mã\",\n        field: \"code\",\n        width: 150,\n        cellRenderer: function cellRenderer(params) {\n          var code = params.data.code_pi !== null ? params.data.code_pi : params.value;\n          return \"<span  style=\\\"background:\".concat(ORDER_STATUS[params.data.status]['color'], \"; color:#fff \\\"class=\\\"badge text-uppercase\\\"> \").concat(code, \" </span>\");\n        }\n      }, {\n        headerName: \"Trạng thái\",\n        field: \"status\",\n        width: 140,\n        cellRenderer: function cellRenderer(params) {\n          return \"\\n              <span style=\\\"background:\".concat(ORDER_STATUS[params.value]['color'], \"; color:#fff \\\" class=\\\"badge\\\"> \").concat(ORDER_STATUS[params.value]['name'], \" </span>\\n            \");\n        }\n      }, {\n        headerName: \"Hạn mức\",\n        field: \"payment_code\",\n        width: 120,\n        cellRenderer: function cellRenderer(params) {\n          //params.data.payment_type\n          return \" \".concat(PAYMENT_TYPES_DECO[params.data.payment_type], \"  <span class=\\\"text-uppercase ml-5\\\"> \").concat(params.value, \" </span>\");\n        }\n      }, {\n        headerName: \"Ngày tạo \",\n        field: \"date_created\",\n        width: 120,\n        cellRenderer: function cellRenderer(params) {\n          var humanDate = moment(params.value).format('YYYY-MM-DD');\n          return \"\\n            \".concat(humanDate, \"\\n          \");\n        }\n      }, {\n        headerName: \"Ngày xuất kho\",\n        field: \"date_out\",\n        width: 155,\n        cellRenderer: function cellRenderer(params) {\n          var humanDate = params.value === null ? '<i class=\"fa fa-clock-o\"></i>' : moment(params.value).format('YYYY-MM-DD');\n          return \"\\n            \".concat(humanDate, \"\\n          \");\n        }\n      }, {\n        headerName: \"Ngày kết thúc\",\n        field: \"date_finish\",\n        width: 155,\n        cellRenderer: function cellRenderer(params) {\n          var humanDate = params.value === null ? '<i class=\"fa fa-clock-o\"></i>' : moment(params.value).format('YYYY-MM-DD');\n          return \"\\n            \".concat(humanDate, \"\\n          \");\n        }\n      }, {\n        headerName: \"Tiền đơn hàng\",\n        field: \"total_sum\",\n        width: 150,\n        cellRenderer: function cellRenderer(params) {\n          return numeral(params.value).format('0,0') + ' đ';\n        }\n      }, {\n        headerName: \"+VAT\",\n        field: \"vat\",\n        width: 90\n      }, {\n        headerName: \"Tiền sau thuế\",\n        field: \"total_sum_vat\",\n        width: 171,\n        cellRenderer: function cellRenderer(params) {\n          return numeral(params.value).format('0,0') + ' đ';\n        }\n      }, {\n        headerName: \"Đã thanh toán\",\n        field: \"total_bill\",\n        width: 171,\n        cellRenderer: function cellRenderer(params) {\n          return params.value;\n        }\n      }, {\n        headerName: \"Phụ trách\",\n        field: \"belong_user\",\n        width: 140,\n        cellRenderer: function cellRenderer(params) {\n          return \"<span class=\\\"badge bg-green\\\"> <i class=\\\"fa fa-user mr-5\\\"></i> \".concat(params.value, \" </span>\");\n        }\n      }],\n      rowData: []\n    };\n\n    _this._setup();\n\n    _this._onFormSubmit = _this._onFormSubmit.bind(_assertThisInitialized(_assertThisInitialized(_this)));\n    _this._onProgressFormSubmit = _this._onProgressFormSubmit.bind(_assertThisInitialized(_assertThisInitialized(_this)));\n    _this._onDeleteFormSubmit = _this._onDeleteFormSubmit.bind(_assertThisInitialized(_assertThisInitialized(_this)));\n    return _this;\n  }\n\n  _createClass(OrderView, [{\n    key: \"_setup\",\n    value: function _setup() {\n      this.model = new Model(MODE, this.props.dispatch);\n      this.mWarehousrReceipt = new Model(WAREHOUSE_RECEIPT, this.props.dispatch);\n      this.mBills = new Model(BILLS, this.props.dispatch);\n    }\n  }, {\n    key: \"_load\",\n    value: function _load() {\n      var status_type = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : 0;\n      this.model.set('paginate', {\n        status_type: status_type\n      });\n      this.model.load();\n    }\n  }, {\n    key: \"_loadWithDate\",\n    value: function _loadWithDate(jsonDate) {\n      var formatDate = {\n        start: moment(jsonDate.start).format('YYYY-MM-DD'),\n        end: moment(jsonDate.end).format('YYYY-MM-DD')\n      };\n      this.model.set('paginate', _objectSpread({}, formatDate));\n\n      this._load(this.state.defaultStatusType);\n    }\n  }, {\n    key: \"componentDidMount\",\n    value: function () {\n      var _componentDidMount = _asyncToGenerator(\n      /*#__PURE__*/\n      _regeneratorRuntime.mark(function _callee() {\n        var resComInfo;\n        return _regeneratorRuntime.wrap(function _callee$(_context) {\n          while (1) {\n            switch (_context.prev = _context.next) {\n              case 0:\n                this._load(this.state.defaultStatusType); // GET COMPANY INFO\n\n\n                _context.next = 3;\n                return doGetModelInfo('companies', window.USERINFO.company_id);\n\n              case 3:\n                resComInfo = _context.sent;\n\n                if (resComInfo.name === 'success') {\n                  this._companyInfo = resComInfo.data;\n                }\n\n              case 5:\n              case \"end\":\n                return _context.stop();\n            }\n          }\n        }, _callee, this);\n      }));\n\n      function componentDidMount() {\n        return _componentDidMount.apply(this, arguments);\n      }\n\n      return componentDidMount;\n    }()\n  }, {\n    key: \"componentWillReceiveProps\",\n    value: function componentWillReceiveProps(newProps) {\n      this.grid.rowData = newProps[MODE]['list'];\n\n      this._whereStateChange(newProps[MODE]['state']);\n    }\n    /* HOW */\n\n  }, {\n    key: \"_callAction\",\n    value: function () {\n      var _callAction2 = _asyncToGenerator(\n      /*#__PURE__*/\n      _regeneratorRuntime.mark(function _callee2(item) {\n        return _regeneratorRuntime.wrap(function _callee2$(_context2) {\n          while (1) {\n            switch (_context2.prev = _context2.next) {\n              case 0:\n                //const eventClick = new Event('click');\n                document.querySelector('body').click();\n\n                if (!(JSON.stringify(this._curInfo) !== '{}')) {\n                  _context2.next = 21;\n                  break;\n                }\n\n                _context2.t0 = item.code;\n                _context2.next = _context2.t0 === 'update' ? 5 : _context2.t0 === 'remove' ? 7 : _context2.t0 === 'progress' ? 9 : _context2.t0 === 'out_stock' ? 11 : _context2.t0 === 'view-quotation' ? 13 : _context2.t0 === 'view-order' ? 15 : _context2.t0 === 'income' ? 17 : 19;\n                break;\n\n              case 5:\n                this._doOpenModalUpdate();\n\n                return _context2.abrupt(\"break\", 19);\n\n              case 7:\n                this.setState({\n                  isOpenDeleteForm: true\n                });\n                return _context2.abrupt(\"break\", 19);\n\n              case 9:\n                this.setState({\n                  isOpenProgressForm: true\n                });\n                return _context2.abrupt(\"break\", 19);\n\n              case 11:\n                this.setState({\n                  isOpenReceiptForm: true\n                });\n                return _context2.abrupt(\"break\", 19);\n\n              case 13:\n                this.setState({\n                  isOpenPrintForm: true,\n                  type: 'quotation_temp'\n                });\n                return _context2.abrupt(\"break\", 19);\n\n              case 15:\n                if (this._curInfo.code_pi !== null) {\n                  this.setState({\n                    isOpenPrintForm: true,\n                    type: 'order_temp'\n                  });\n                } else {\n                  BenMessage({\n                    message: 'Đơn hàng này chưa được xác nhận'\n                  });\n                }\n\n                return _context2.abrupt(\"break\", 19);\n\n              case 17:\n                this.setState({\n                  isOpenCashflowForm: true\n                });\n                return _context2.abrupt(\"break\", 19);\n\n              case 19:\n                _context2.next = 22;\n                break;\n\n              case 21:\n                BenMessage({\n                  title: 'Thông báo',\n                  message: 'Vui lòng chọn chọn dữ liệu cần xử lý '\n                });\n\n              case 22:\n              case \"end\":\n                return _context2.stop();\n            }\n          }\n        }, _callee2, this);\n      }));\n\n      function _callAction(_x) {\n        return _callAction2.apply(this, arguments);\n      }\n\n      return _callAction;\n    }()\n  }, {\n    key: \"_doOpenModalUpdate\",\n    value: function _doOpenModalUpdate(data) {\n      //this._curInfo = data ;\n      this.setState({\n        isOpenForm: true\n      });\n    }\n    /* WHEN*/\n\n    /* WHERE*/\n\n  }, {\n    key: \"_whereStateChange\",\n    value: function _whereStateChange(newState) {\n      this.setState(Object.assign(this.state, newState));\n    }\n  }, {\n    key: \"_onDeleteFormSubmit\",\n    value: function _onDeleteFormSubmit(res) {\n      this._curInfo = res.data;\n      var isOpen = res.name === 'success' || res.name === 'ok' ? false : true;\n      this.setState({\n        status: res.name,\n        isOpenDeleteForm: isOpen\n      });\n    }\n  }, {\n    key: \"_onProgressFormSubmit\",\n    value: function _onProgressFormSubmit(res) {\n      // update curent info\n      this._curInfo = res.data;\n      var isOpen = res.name === 'success' || res.name === 'ok' ? false : true;\n      this.setState({\n        status: res.name,\n        isOpenDeleteForm: isOpen\n      });\n    }\n  }, {\n    key: \"_onFormSubmit\",\n    value: function _onFormSubmit(status) {\n      var isOpen = status === 'success' || status === 'ok' ? false : true;\n      this.setState({\n        status: status,\n        isOpenForm: isOpen\n      });\n    }\n  }, {\n    key: \"_onSubmitCashFlowForm\",\n    value: function _onSubmitCashFlowForm(res) {\n      var _this2 = this;\n\n      if (res.name === 'success' || res.name === 'ok') {\n        var isOpen = res.name === 'success' || res.name === 'ok' ? false : true;\n        var is_finish_bill = res.data.is_finish_bill;\n        this.setState({\n          status: false,\n          isOpenCashflowForm: isOpen\n        }); // UPDATE STATUS PROCESS \n\n        if (is_finish_bill === 'yes') {\n          var data = {\n            id: this._curInfo.id,\n            status: parseInt(this._curInfo.status) + 1\n          };\n          this.model.putCustom('progress', data, function (res2) {\n            if (res.name === 'success' || res.name === 'ok') {\n              _this2._onProgressFormSubmit(res2);\n            }\n          });\n        }\n      }\n    }\n  }, {\n    key: \"_onSubmitReceiptForm\",\n    value: function _onSubmitReceiptForm(res) {\n      var _this3 = this;\n\n      //this._curInfo = res.data;\n      var isOpen = res.name === 'success' || res.name === 'ok' ? false : true;\n      this.setState({\n        status: res.name,\n        isOpenReceiptForm: isOpen\n      });\n      var data = {\n        id: this._curInfo.id,\n        status: parseInt(this._curInfo.status) + 1\n      };\n      this.model.putCustom('progress', data, function (res2) {\n        if (res.name === 'success' || res.name === 'ok') {\n          _this3._onProgressFormSubmit(res2);\n        }\n      });\n    }\n  }, {\n    key: \"_onChange\",\n    value: function _onChange(field, value) {\n      if (value !== '') {\n        this.model.set('paginate', _defineProperty({}, field, value));\n      } else {\n        this.model.remove(field);\n      }\n\n      this.model.load();\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this4 = this;\n\n      var FORM_NAME = this._curInfo.status_type === 0 ? React.createElement(\"span\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 457\n        },\n        __self: this\n      }, \" B\\xE1o gi\\xE1 : \", React.createElement(\"span\", {\n        className: \"text-uppercase\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 457\n        },\n        __self: this\n      }, \" \", this._curInfo.code, \" \"), \" \") : React.createElement(\"span\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 458\n        },\n        __self: this\n      }, \" \\u0110\\u01A1n h\\xE0ng : \", React.createElement(\"span\", {\n        className: \"text-uppercase\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 458\n        },\n        __self: this\n      }, \" \", this._curInfo.code_pi, \" \"), \" \");\n      return React.createElement(\"div\", {\n        className: \"animated fadeIn\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 461\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"blank-app\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 462\n        },\n        __self: this\n      }, React.createElement(\"main\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 463\n        },\n        __self: this\n      }, React.createElement(PrintForm, {\n        width: \"72%\",\n        type: this.state.type,\n        isOpen: this.state.isOpenPrintForm,\n        onToggle: function onToggle(isOpen) {\n          _this4.setState({\n            isOpenPrintForm: isOpen\n          });\n        },\n        data: this._curInfo,\n        companyInfo: this._companyInfo,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 464\n        },\n        __self: this\n      }), React.createElement(CashFlowForm, {\n        width: \"45%\",\n        isOpen: this.state.isOpenCashflowForm,\n        onToggle: function onToggle(isOpen) {\n          _this4.setState({\n            isOpenCashflowForm: isOpen\n          });\n        },\n        model: this.mBills,\n        data: this._curInfo,\n        receiptType: \"pt\",\n        typeAction: \"post\",\n        onSubmitForm: function onSubmitForm(res) {\n          _this4._onSubmitCashFlowForm(res);\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 475\n        },\n        __self: this\n      }), React.createElement(ReceiptForm, {\n        width: \"72%\",\n        isOpen: this.state.isOpenReceiptForm,\n        onToggle: function onToggle(isOpen) {\n          _this4.setState({\n            isOpenReceiptForm: isOpen\n          });\n        },\n        model: this.mWarehousrReceipt,\n        data: this._curInfo,\n        receiptType: \"out\",\n        typeAction: \"post\",\n        onSubmitForm: function onSubmitForm(res) {\n          _this4._onSubmitReceiptForm(res);\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 486\n        },\n        __self: this\n      }), React.createElement(ProgressForm, {\n        name: \"Ti\\u1EBFn tr\\xECnh\",\n        isOpen: this.state.isOpenProgressForm,\n        onToggle: function onToggle(isOpen) {\n          _this4.setState({\n            isOpenProgressForm: isOpen\n          });\n        },\n        onSubmit: this._onProgressFormSubmit,\n        model: this.model,\n        data: this._curInfo,\n        width: \"40%\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 499\n        },\n        __self: this\n      }), React.createElement(DeleteForm, {\n        name: \"C\\u1EA3nh b\\xE1o\",\n        isOpen: this.state.isOpenDeleteForm,\n        onToggle: function onToggle(isOpen) {\n          _this4.setState({\n            isOpenDeleteForm: isOpen\n          });\n        },\n        onSubmit: this._onDeleteFormSubmit,\n        model: this.model,\n        data: this._curInfo,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 511\n        },\n        __self: this\n      }), React.createElement(MyForm, {\n        width: \"90%\",\n        name: FORM_NAME,\n        data: this._curInfo,\n        isOpen: this.state.isOpenForm,\n        onToggle: function onToggle(isOpen) {\n          _this4.setState({\n            isOpenForm: isOpen\n          });\n        },\n        model: this.model,\n        onSubmit: this._onFormSubmit,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 522\n        },\n        __self: this\n      }), React.createElement(BenGrid, {\n        onBtnEdit: function onBtnEdit(data) {\n          _this4._doOpenModalUpdate(data);\n        },\n        onCellSelected: function onCellSelected(json) {\n          _this4._curInfo = json;\n        },\n        gridID: \"id\",\n        rowSelection: \"single\",\n        isRightTool: true,\n        height: \"78vh\",\n        nextColums: this.grid.colums,\n        rowData: this.grid.rowData,\n        model: this.model,\n        formStatus: this.state.status,\n        customButton: React.createElement(ButtonGroup, {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 557\n          },\n          __self: this\n        }, React.createElement(Link, {\n          className: \"btn btn-normal\",\n          style: {\n            borderRadius: 0\n          },\n          to: \"/order/add\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 560\n          },\n          __self: this\n        }, \" \", React.createElement(\"i\", {\n          className: \"fa fa-plus-circle\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 560\n          },\n          __self: this\n        }), \" T\\u1EA1o b\\xE1o gi\\xE1 \"), React.createElement(ButtonExpandList, {\n          onSelected: function onSelected(item) {\n            _this4._callAction(item);\n          },\n          data: this.state.actions,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 562\n          },\n          __self: this\n        }), React.createElement(Input, {\n          defaultValue: this.state.defaultStatusType,\n          onChange: function onChange(e) {\n            _this4._load(e.target.value);\n          },\n          style: {\n            marginRight: 10,\n            borderRadius: 0,\n            backgroundColor: '#F5F6F7'\n          },\n          type: \"select\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 565\n          },\n          __self: this\n        }, React.createElement(\"option\", {\n          value: \"2\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 568\n          },\n          __self: this\n        }, \" T\\u1EA5t c\\u1EA3 \"), React.createElement(\"option\", {\n          value: \"0\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 569\n          },\n          __self: this\n        }, \" Qu\\u1EA3n l\\xFD b\\xE1o gi\\xE1 \"), React.createElement(\"option\", {\n          value: \"1\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 570\n          },\n          __self: this\n        }, \" Qu\\u1EA3n l\\xFD \\u0111\\u01A1n H\\xE0ng \")), React.createElement(RankDatePicker, {\n          onChange: function onChange(state) {\n            _this4._loadWithDate(state);\n          },\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 573\n          },\n          __self: this\n        }), React.createElement(ButtonExpand, {\n          style: {\n            borderRight: 0\n          },\n          icon: \"fa-filter\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 576\n          },\n          __self: this\n        }, React.createElement(FormGroup, {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 577\n          },\n          __self: this\n        }, React.createElement(Label, {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 578\n          },\n          __self: this\n        }, \" Tr\\u1EA1ng th\\xE1i \"), React.createElement(SelectList, {\n          name: \"T\\u1EA5t C\\u1EA3\",\n          onChange: function onChange(e) {\n            _this4._onChange('status', e.target.value);\n          },\n          rows: ORDER_STATUS,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 579\n          },\n          __self: this\n        })), React.createElement(FormGroup, {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 581\n          },\n          __self: this\n        }, React.createElement(Label, {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 582\n          },\n          __self: this\n        }, \" H\\u1EA1n m\\u1EE9c  \"), React.createElement(SelectListModelCode, {\n          onChange: function onChange(e) {\n            _this4._onChange('payment_code', e.target.value);\n          },\n          name: \"T\\u1EA5t C\\u1EA3\",\n          strModel: \"payments\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 583\n          },\n          __self: this\n        })))),\n        displayBtn: [],\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 538\n        },\n        __self: this\n      }))));\n    }\n  }]);\n\n  return OrderView;\n}(Component);\n\nfunction mapStateToProps(state) {\n  return _defineProperty({}, MODE, state[MODE]);\n}\n\nexport default connect(mapStateToProps)(OrderView);","map":{"version":3,"sources":["D:/actions/st_frontend/src/pages/Order/_S/index.js"],"names":["ORDER_STATUS","PAYMENT_TYPES_DECO","doGetModelInfo","Model","moment","React","Component","ButtonGroup","FormGroup","Input","Label","connect","Link","numeral","MyForm","ProgressForm","DeleteForm","ReceiptForm","CashFlowForm","PrintForm","BenGrid","ButtonExpand","ButtonExpandList","BenMessage","SelectList","SelectListModelCode","RankDatePicker","MODE","WAREHOUSE_RECEIPT","BILLS","OrderView","props","_curInfo","_companyInfo","state","typeAction","onAction","status","isOpenForm","isOpenProgressForm","isOpenDeleteForm","isOpenReceiptForm","isOpenPrintForm","isOpenCashflowForm","defaultStatusType","type","actions","code","icon","name","active","grid","colums","headerName","field","width","cellRenderer","params","value","data","code_pi","payment_type","humanDate","format","rowData","_setup","_onFormSubmit","bind","_onProgressFormSubmit","_onDeleteFormSubmit","model","dispatch","mWarehousrReceipt","mBills","status_type","set","load","jsonDate","formatDate","start","end","_load","window","USERINFO","company_id","resComInfo","newProps","_whereStateChange","item","document","querySelector","click","JSON","stringify","_doOpenModalUpdate","setState","message","title","newState","Object","assign","res","isOpen","is_finish_bill","id","parseInt","putCustom","res2","remove","FORM_NAME","_onSubmitCashFlowForm","_onSubmitReceiptForm","json","borderRadius","_callAction","e","target","marginRight","backgroundColor","_loadWithDate","borderRight","_onChange","mapStateToProps"],"mappings":"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","sourcesContent":["\r\nimport { ORDER_STATUS } from '../../../config/app.config'; \r\nimport { PAYMENT_TYPES_DECO } from '../../../config/payment.type'; \r\n\r\n// HOOKS \r\nimport doGetModelInfo from '../../../hook/ultil/doGetModelInfo'; \r\n\r\n /* OBJECT - PLUGIN*/ \r\nimport Model from '../../../model/model';\r\n\r\n// HOOK ULTI \r\nimport moment from 'moment';\r\n\r\n\r\nimport React, { Component } from 'react';\r\nimport { ButtonGroup, FormGroup, Input, Label } from 'reactstrap'; \r\n\r\n\r\n\r\nimport { connect } from 'react-redux';\r\nimport { Link } from 'react-router-dom' ; \r\n\r\nimport numeral from 'numeral' ; \r\n\r\n\r\n/* MODAL FORM & CTRL */\r\nimport MyForm from './Form';\r\nimport ProgressForm from './ProgressForm' ; \r\nimport DeleteForm from './DeleteForm'; \r\nimport ReceiptForm from './ReceiptForm' ; \r\nimport CashFlowForm from './CashflowForm';\r\n\r\n\r\nimport PrintForm from './PrintForm'; \r\n\r\n\r\n/*INCLUDE OTHER COMPONENT*/\r\nimport { BenGrid } from '../../../components/BenGrid2';\r\nimport ButtonExpand from '../../../components/ButtonExpand';\r\n\r\nimport ButtonExpandList from '../../../components/ButtonExpandList'; \r\nimport BenMessage from '../../../components/BenMessage' ; \r\n\r\n\r\nimport SelectList from '../../../components/SelectList'; \r\nimport SelectListModelCode from '../../../components/SelectListModelCode';\r\nimport RankDatePicker from '../../../components/RankDatePicker' ; \r\n\r\n\r\n\r\nconst MODE = 'orders';\r\nconst WAREHOUSE_RECEIPT = 'warehouse_receipts';\r\nconst BILLS = 'bills';\r\n\r\n\r\n\r\n\r\nclass OrderView extends Component{\r\n\r\n  _curInfo = {}\r\n  _companyInfo = {}\r\n\r\n  constructor(props){\r\n    super(props);\r\n\r\n    this.state = {\r\n\r\n      typeAction:'',\r\n      onAction:'',\r\n      status:'',\r\n\r\n      isOpenForm:false, \r\n      isOpenProgressForm:false,\r\n      isOpenDeleteForm:false,\r\n      isOpenReceiptForm:false,\r\n      isOpenPrintForm:false,\r\n      isOpenCashflowForm: false,\r\n\r\n      defaultStatusType:2, // 0 : BAO GIA - 1 DON HANG - 2 : TAT CA\r\n      \r\n      type:'', // ORDER TYPE : QUOTATION - ORDER FOR RENDER PRINT FORM\r\n\r\n      actions:[\r\n        {code:'update',icon:'fa-pencil',name:'Cập nhật báo giá'},\r\n        {code:'remove',icon:'fa-trash',name:'Huỷ báo giá',active:true},\r\n        {code:'progress',icon:'icon icon-fire',name:'Xử lý tiến trình'},\r\n        \r\n        {code:'out_stock', icon:'fa-truck',name:'Tạo phiếu xuất kho'},\r\n        {code:'income',icon:'fa-heart',name:'Tạo phiếu thu'},\r\n\r\n        {code:'view-quotation',icon:'fa-search',name:'Xem Báo Giá'},\r\n        {code:'view-order',icon:'fa-search',name:'Xem Đơn hàng'}\r\n        \r\n        \r\n      ]  \r\n    }\r\n\r\n    \r\n\r\n    this.grid = {\r\n      colums:[\r\n        {headerName: \"Mã KH\", field: \"customer_code\",width:150,\r\n          cellRenderer(params){\r\n\r\n            return `<span class=\"badge bg-green\"> <i class=\"fa fa-user mr-5\"></i> ${params.value} </span>`;\r\n          }\r\n        },\r\n        {headerName: \"Mã\", field: \"code\",width:150,\r\n          cellRenderer(params){\r\n\r\n            const code = params.data.code_pi !== null ? params.data.code_pi : params.value;\r\n            return `<span  style=\"background:${ ORDER_STATUS[params.data.status]['color'] }; color:#fff \"class=\"badge text-uppercase\"> ${ code } </span>`\r\n          }\r\n        },\r\n        {headerName: \"Trạng thái\", field: \"status\",width:140,\r\n          cellRenderer(params){\r\n            return `\r\n              <span style=\"background:${ ORDER_STATUS[params.value]['color'] }; color:#fff \" class=\"badge\"> ${ORDER_STATUS[params.value]['name']} </span>\r\n            `\r\n          }\r\n        },\r\n        {headerName: \"Hạn mức\", field: \"payment_code\",width:120,\r\n          cellRenderer(params){\r\n            //params.data.payment_type\r\n            \r\n            return ` ${ PAYMENT_TYPES_DECO[params.data.payment_type] }  <span class=\"text-uppercase ml-5\"> ${ params.value } </span>` \r\n          }\r\n        },\r\n        {headerName: \"Ngày tạo \", field: \"date_created\",width:120,  \r\n          \r\n          cellRenderer(params){\r\n            const humanDate = moment(params.value).format('YYYY-MM-DD')\r\n            return `\r\n            ${ humanDate }\r\n          `\r\n          }\r\n        },\r\n        {headerName: \"Ngày xuất kho\", field: \"date_out\",width:155,\r\n\r\n          cellRenderer(params){\r\n            const humanDate =   params.value ===null ? '<i class=\"fa fa-clock-o\"></i>': moment(params.value).format('YYYY-MM-DD') ; \r\n\r\n            return `\r\n            ${ humanDate }\r\n          `\r\n          }\r\n        },\r\n\r\n        {headerName: \"Ngày kết thúc\", field: \"date_finish\",width:155,\r\n\r\n          cellRenderer(params){\r\n            const humanDate =   params.value ===null ? '<i class=\"fa fa-clock-o\"></i>': moment(params.value).format('YYYY-MM-DD') ; \r\n\r\n            return `\r\n            ${ humanDate }\r\n          `\r\n          }\r\n        },  \r\n\r\n        \r\n        {headerName: \"Tiền đơn hàng\", field: \"total_sum\",width:150,\r\n\r\n          cellRenderer(params){\r\n\r\n              return numeral(params.value).format('0,0')+' đ';\r\n          }\r\n        },\r\n\r\n        {\r\n          headerName:\"+VAT\", field:\"vat\",width:90\r\n        },\r\n\r\n\r\n        {headerName: \"Tiền sau thuế\", field: \"total_sum_vat\",width:171,\r\n\r\n          cellRenderer(params){\r\n\r\n            return numeral(params.value).format('0,0')+' đ';\r\n          }\r\n        },\r\n\r\n        {headerName: \"Đã thanh toán\", field: \"total_bill\",width:171,\r\n\r\n          cellRenderer(params){\r\n\r\n              return params.value;\r\n          }\r\n        },\r\n        {\r\n          headerName:\"Phụ trách\",field:\"belong_user\",width:140,\r\n            cellRenderer(params){\r\n              return `<span class=\"badge bg-green\"> <i class=\"fa fa-user mr-5\"></i> ${ params.value } </span>`\r\n            }\r\n        }\r\n        \r\n\r\n      \r\n      ],\r\n      rowData: []\r\n    }\r\n\r\n    this._setup();\r\n    this._onFormSubmit = this._onFormSubmit.bind(this);\r\n    this._onProgressFormSubmit = this._onProgressFormSubmit.bind(this); \r\n    this._onDeleteFormSubmit = this._onDeleteFormSubmit.bind(this);\r\n    \r\n    \r\n  }\r\n\r\n  _setup(){\r\n\r\n    this.model = new Model(MODE,this.props.dispatch);\r\n    this.mWarehousrReceipt = new Model(WAREHOUSE_RECEIPT,this.props.dispatch); \r\n    this.mBills = new Model(BILLS,this.props.dispatch); \r\n        \r\n    \r\n    \r\n  }\r\n\r\n\r\n  _load(status_type=0){\r\n    this.model.set('paginate',{\r\n      status_type:status_type\r\n    });\r\n    this.model.load();\r\n  }\r\n\r\n  _loadWithDate(jsonDate){  \r\n\r\n    const formatDate = {\r\n      start: moment(jsonDate.start).format('YYYY-MM-DD'),\r\n      end:moment(jsonDate.end).format('YYYY-MM-DD')\r\n    }\r\n    this.model.set('paginate',{\r\n      ...formatDate\r\n    });\r\n\r\n    this._load(this.state.defaultStatusType);\r\n  }\r\n  \r\n\r\n  async componentDidMount(){\r\n\r\n    this._load(this.state.defaultStatusType); \r\n\r\n    // GET COMPANY INFO\r\n    const resComInfo = await doGetModelInfo('companies', window.USERINFO.company_id );\r\n    if(resComInfo.name==='success'){\r\n      this._companyInfo = resComInfo.data;\r\n    }\r\n    \r\n  }\r\n\r\n  componentWillReceiveProps(newProps){\r\n    \r\n    this.grid.rowData = newProps[MODE]['list'];\r\n    this._whereStateChange(newProps[MODE]['state']);\r\n    \r\n  }\r\n\r\n  /* HOW */\r\n    \r\n  async _callAction(item){\r\n    \r\n    //const eventClick = new Event('click');\r\n    document.querySelector('body').click();\r\n    \r\n    \r\n    if(JSON.stringify(this._curInfo)!=='{}'){\r\n\r\n      \r\n      switch(item.code){\r\n\r\n        case 'update':\r\n          this._doOpenModalUpdate() ; \r\n        break;\r\n\r\n        case 'remove':\r\n           this.setState({\r\n             isOpenDeleteForm:true\r\n           });\r\n           \r\n        break ;\r\n\r\n        case 'progress':\r\n           this.setState({\r\n             isOpenProgressForm:true\r\n           }); \r\n        break ;\r\n\r\n        case 'out_stock':\r\n           this.setState({\r\n             isOpenReceiptForm:true\r\n           });\r\n        break ; \r\n\r\n        case 'view-quotation':\r\n           this.setState({\r\n             isOpenPrintForm:true,\r\n             type:'quotation_temp'\r\n           }); \r\n        break ;\r\n\r\n        case 'view-order':\r\n\r\n           \r\n           if(this._curInfo.code_pi !== null){\r\n              this.setState({\r\n                isOpenPrintForm:true,\r\n                type:'order_temp'\r\n              });\r\n           }else{  BenMessage({message:'Đơn hàng này chưa được xác nhận'}) }\r\n\r\n\r\n        break ;\r\n\r\n\r\n        case 'income':\r\n           this.setState({\r\n             isOpenCashflowForm:true\r\n           });\r\n\r\n        break; \r\n  \r\n      }\r\n    }else{ \r\n        BenMessage({\r\n          title:'Thông báo',\r\n          message:'Vui lòng chọn chọn dữ liệu cần xử lý '\r\n        }) ;\r\n    }\r\n  }\r\n  \r\n  _doOpenModalUpdate(data){\r\n    //this._curInfo = data ;\r\n    this.setState({\r\n      isOpenForm:true\r\n    });\r\n   \r\n  }\r\n\r\n \r\n\r\n  /* WHEN*/\r\n  \r\n  /* WHERE*/\r\n  _whereStateChange(newState){\r\n    this.setState(Object.assign(this.state,newState));\r\n  }\r\n\r\n  _onDeleteFormSubmit(res){\r\n    this._curInfo = res.data; \r\n    const isOpen = res.name === 'success' || res.name === 'ok' ? false : true ;\r\n    \r\n    this.setState({\r\n      status:res.name,\r\n      isOpenDeleteForm:isOpen\r\n    });\r\n  }\r\n  _onProgressFormSubmit(res){\r\n    \r\n    // update curent info\r\n    this._curInfo = res.data; \r\n    const isOpen = res.name === 'success' || res.name === 'ok' ? false : true ;\r\n    \r\n    this.setState({\r\n      status:res.name,\r\n      isOpenDeleteForm:isOpen\r\n    });\r\n\r\n\r\n  }\r\n  _onFormSubmit(status){\r\n\r\n    const isOpen = status === 'success' || status ==='ok' ? false : true;\r\n    this.setState({\r\n      status:status,\r\n      isOpenForm:isOpen\r\n    });\r\n\r\n  }  \r\n\r\n  _onSubmitCashFlowForm(res){\r\n\r\n      if(res.name==='success' || res.name === 'ok'){\r\n\r\n        const isOpen = res.name === 'success' || res.name ==='ok' ? false : true;\r\n\r\n        const is_finish_bill = res.data.is_finish_bill ; \r\n        \r\n        this.setState({\r\n            status:false,\r\n            isOpenCashflowForm:isOpen\r\n        });\r\n\r\n        // UPDATE STATUS PROCESS \r\n        if(is_finish_bill==='yes'){\r\n          \r\n          const data = {\r\n            id:this._curInfo.id,\r\n            status: parseInt(this._curInfo.status) + 1\r\n          }\r\n  \r\n          this.model.putCustom('progress',data,(res2)=>{\r\n              \r\n              if(res.name === 'success' || res.name==='ok'){\r\n                  this._onProgressFormSubmit(res2);\r\n              }\r\n  \r\n          });\r\n        }\r\n\r\n\r\n\r\n      }\r\n      \r\n  }\r\n  _onSubmitReceiptForm(res){\r\n        \r\n      //this._curInfo = res.data;\r\n      const isOpen = res.name === 'success' || res.name ==='ok' ? false : true;\r\n      \r\n      this.setState({\r\n          status:res.name,\r\n          isOpenReceiptForm:isOpen,\r\n      });\r\n\r\n      const data = {\r\n          id:this._curInfo.id,\r\n          status: parseInt(this._curInfo.status) + 1\r\n      }\r\n\r\n      this.model.putCustom('progress',data,(res2)=>{\r\n          \r\n          if(res.name === 'success' || res.name==='ok'){\r\n              this._onProgressFormSubmit(res2);\r\n          }\r\n\r\n      });\r\n        \r\n  }\r\n  \r\n  _onChange(field,value){\r\n    \r\n    if(value!==''){\r\n      this.model.set('paginate',{\r\n        [field]:value\r\n      });\r\n    }else{ this.model.remove(field) }\r\n\r\n    this.model.load(); \r\n  }\r\n  \r\n  render(){ \r\n\r\n    const FORM_NAME  = this._curInfo.status_type === 0 ?  \r\n          <span> Báo giá : <span className='text-uppercase'> { this._curInfo.code } </span> </span> \r\n        : <span> Đơn hàng : <span className='text-uppercase'> { this._curInfo.code_pi } </span> </span> \r\n    \r\n    return (\r\n      <div className=\"animated fadeIn\">\r\n        <div className=\"blank-app\">\r\n            <main>\r\n                <PrintForm width=\"72%\" \r\n                  type={this.state.type}\r\n                  isOpen={ this.state.isOpenPrintForm }\r\n                  onToggle={(isOpen)=>{ this.setState({isOpenPrintForm:isOpen}) }}\r\n                  data={this._curInfo}\r\n\r\n                  companyInfo = {this._companyInfo}\r\n\r\n                />\r\n                \r\n\r\n                <CashFlowForm  \r\n                  width=\"45%\"\r\n                  isOpen={this.state.isOpenCashflowForm}\r\n                  onToggle={(isOpen)=>{ this.setState({isOpenCashflowForm:isOpen}) }}\r\n                  model={ this.mBills }\r\n                  data={ this._curInfo }\r\n                  receiptType=\"pt\"\r\n                  typeAction=\"post\"\r\n                  onSubmitForm={(res)=>{   this._onSubmitCashFlowForm(res) }}\r\n\r\n                />\r\n                <ReceiptForm \r\n                  width=\"72%\"\r\n                  isOpen={this.state.isOpenReceiptForm}\r\n                  onToggle={(isOpen)=>{ this.setState({isOpenReceiptForm:isOpen}) }}\r\n                  model={this.mWarehousrReceipt}\r\n                  data={this._curInfo}\r\n                  receiptType='out'\r\n                  typeAction='post'\r\n\r\n                  onSubmitForm={ (res)=>{  this._onSubmitReceiptForm(res) }}\r\n\r\n\r\n                />\r\n                <ProgressForm \r\n\r\n                  name=\"Tiến trình\" \r\n                  isOpen={ this.state.isOpenProgressForm } \r\n                  onToggle={(isOpen)=>{ this.setState({isOpenProgressForm:isOpen}) }}\r\n                  onSubmit={ this._onProgressFormSubmit }\r\n\r\n                  model={this.model}\r\n                  data={ this._curInfo }\r\n                  width='40%'\r\n\r\n                />\r\n                <DeleteForm  \r\n                  name=\"Cảnh báo\"\r\n                  isOpen={ this.state.isOpenDeleteForm }\r\n                  onToggle={(isOpen)=>{ this.setState({isOpenDeleteForm:isOpen}) }}\r\n                  onSubmit={ this._onDeleteFormSubmit }\r\n\r\n                  model={this.model}\r\n                  data={this._curInfo}\r\n\r\n\r\n                />\r\n                <MyForm\r\n\r\n                  width='90%'\r\n                  name={ FORM_NAME }\r\n                  data={ this._curInfo }\r\n                  \r\n                  isOpen={this.state.isOpenForm}\r\n\r\n                  onToggle={(isOpen)=>{ this.setState({isOpenForm:isOpen}) }}\r\n\r\n                  model={this.model}\r\n\r\n                  onSubmit={ this._onFormSubmit }\r\n                  \r\n                />\r\n\r\n                <BenGrid\r\n\r\n                  onBtnEdit={(data)=>{ this._doOpenModalUpdate(data)  }}\r\n                  \r\n\r\n                  onCellSelected={(json)=>{ this._curInfo = json  }}\r\n\r\n                  gridID='id'\r\n                  rowSelection='single'\r\n\r\n                  isRightTool={ true }\r\n                  height=\"78vh\"\r\n\r\n                  nextColums={ this.grid.colums }\r\n                  rowData={this.grid.rowData}\r\n                  model={ this.model }\r\n                  formStatus={ this.state.status }\r\n                  \r\n                  customButton={\r\n                    <ButtonGroup>\r\n\r\n                        \r\n                        <Link className=\"btn btn-normal\" style={{borderRadius:0}} to=\"/order/add\"> <i className=\"fa fa-plus-circle\"></i> Tạo báo giá </Link>\r\n                        \r\n                        <ButtonExpandList onSelected={(item)=>{  this._callAction(item) }} data={ this.state.actions } />\r\n                        \r\n\r\n                        <Input \r\n                            defaultValue={ this.state.defaultStatusType } \r\n                            onChange={(e)=>{ this._load(e.target.value) }} style={{marginRight:10, borderRadius:0, backgroundColor:'#F5F6F7'}} type=\"select\">\r\n                            <option value=\"2\"> Tất cả </option>\r\n                            <option value=\"0\"> Quản lý báo giá </option>\r\n                            <option value=\"1\"> Quản lý đơn Hàng </option>\r\n                        </Input>\r\n\r\n                        <RankDatePicker onChange={(state)=>{ this._loadWithDate(state) }} />\r\n                        \r\n\r\n                        <ButtonExpand style={{borderRight:0}}  icon=\"fa-filter\">\r\n                            <FormGroup>\r\n                              <Label> Trạng thái </Label>\r\n                              <SelectList name=\"Tất Cả\" onChange={(e)=>{ this._onChange('status',e.target.value) }}  rows={ ORDER_STATUS } />\r\n                            </FormGroup>\r\n                            <FormGroup>\r\n                              <Label> Hạn mức  </Label>\r\n                              <SelectListModelCode onChange={(e)=>{ this._onChange( 'payment_code',e.target.value)  }}  name=\"Tất Cả\" strModel='payments' />\r\n                            </FormGroup>\r\n                            \r\n\r\n                        </ButtonExpand>\r\n                        \r\n                    </ButtonGroup>\r\n                    \r\n                  }\r\n\r\n                  displayBtn = {[]}\r\n                />    \r\n            </main>\r\n        </div>\r\n      </div>\r\n    )\r\n  }\r\n}\r\n\r\n\r\nfunction mapStateToProps(state){\r\n  return {\r\n     [MODE]:state[MODE]\r\n  }\r\n}\r\n\r\nexport default connect(mapStateToProps)(OrderView);\r\n"]},"metadata":{},"sourceType":"module"}