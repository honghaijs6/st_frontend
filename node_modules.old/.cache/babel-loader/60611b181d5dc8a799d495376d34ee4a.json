{"ast":null,"code":"import _classCallCheck from \"D:\\\\actions\\\\st_frontend\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"D:\\\\actions\\\\st_frontend\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"D:\\\\actions\\\\st_frontend\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"D:\\\\actions\\\\st_frontend\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"D:\\\\actions\\\\st_frontend\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/inherits\";\nvar _jsxFileName = \"D:\\\\actions\\\\st_frontend\\\\src\\\\pages\\\\iservice\\\\tickets\\\\PrintForm.js\";\n// HOOKS \nimport { N2T } from '../../../hook/ultil/N2T';\nimport doPrint from '../../../hook/ultil/doPrint';\nimport React from 'react';\nimport numeral from 'numeral';\nimport moment from 'moment';\nimport ViewModal from '../../../components/ViewModal';\n\nvar PrintForm =\n/*#__PURE__*/\nfunction (_React$Component) {\n  _inherits(PrintForm, _React$Component);\n\n  function PrintForm(props) {\n    var _this;\n\n    _classCallCheck(this, PrintForm);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(PrintForm).call(this, props));\n    _this.state = {};\n    return _this;\n  } // USING FOR REDER BASIC\n\n\n  _createClass(PrintForm, [{\n    key: \"_renderBodyCart\",\n    value: function _renderBodyCart(cart) {\n      var html = \"\";\n      cart.map(function (item, index) {\n        var price = item.price.replace(/,/g, '');\n        var total = parseInt(price) * parseInt(item.amount);\n        var stt = index + 1;\n        html += \"\\n                <tr class=\\\"record-item\\\">\\n                    <td class=\\\"text-center item\\\" style=\\\"vertical-align:middle\\\">\\n                        \".concat(stt, \"\\n                    </td>\\n                    \\n                    <td class=\\\"text-center item\\\" style=\\\"vertical-align:middle\\\" >\\n                        \").concat(item.code, \"\\n                    </td>\\n                    <td class=\\\"item-pro-desc item\\\" style=\\\"word-wrap:break-word;\\\">\\n                       \").concat(item.name, \"\\n                    </td>\\n\\n                    <td class=\\\"text-center item\\\" style=\\\"vertical-align:middle\\\">\\n                        \").concat(item.unit || '', \"\\n                    </td>\\n                    \\n                    <td class=\\\"text-center item\\\" style=\\\"vertical-align:middle\\\">\\n                        \").concat(item.amount, \"\\n                    </td>\\n                    \\n                    <td class=\\\"text-center item\\\" style=\\\"vertical-align:middle\\\">\\n                        \").concat(numeral(item.price).format('0,0'), \"\\n                    </td>\\n                    <td class=\\\"text-center item\\\" style=\\\"vertical-align:middle\\\">\\n                        \").concat(numeral(price).format('0,0'), \"\\n                    </td>\\n                    \\n                    \\n\\n                </tr>\\n            \");\n      });\n      return html;\n    }\n  }, {\n    key: \"_sumCart\",\n    value: function _sumCart(cart) {\n      var sum = 0;\n      cart.map(function (item) {\n        var price = item.price.replace(/,/g, '');\n        var total = parseInt(price) * parseInt(item.amount);\n        sum += total;\n      });\n      return sum;\n    }\n  }, {\n    key: \"_formatHtml\",\n    value: function _formatHtml(data, companyInfo) {\n      var HTML = \"\";\n\n      if (JSON.stringify(data) !== '{}') {\n        if (JSON.stringify(companyInfo) !== '{}') {\n          HTML = companyInfo.iservice_temp;\n          HTML = HTML.replace(/{{COMPANY_LOGO}}/g, companyInfo['logo']);\n          HTML = HTML.replace(/{{COMPANY_NAME}}/g, companyInfo['name']);\n          HTML = HTML.replace(/{{COMPANY_ADDRESS}}/g, companyInfo['address']);\n          HTML = HTML.replace(/{{COMPANY_TAXNO}}/g, companyInfo['tax_no']);\n          HTML = HTML.replace(/{{COMPANY_PHONE}}/g, companyInfo['phone']);\n          HTML = HTML.replace(/{{COMPANY_WEBSITE}}/g, companyInfo['website']);\n          HTML = HTML.replace(/{{COMPANY_EMAIL}}/g, companyInfo['email']);\n          console.log(data); // CUSTOMER INFO \n\n          var cusInfo = JSON.parse(data.customer_info);\n          HTML = HTML.replace(/{{CUSTOMER_NAME}}/g, cusInfo['name']);\n          HTML = HTML.replace(/{{CUSTOMER_ADDRESS}}/g, cusInfo['address_delivery']);\n          HTML = HTML.replace(/{{CUSTOMER_PHONE}}/g, cusInfo['phone']);\n          HTML = HTML.replace(/{{CUSTOMER_EMAIL}}/g, cusInfo['email']);\n          HTML = HTML.replace(/{{CUSTOMER_RECEIVER}}/g, cusInfo['contact_name']);\n          HTML = HTML.replace(/{{CUSTOMER_RECEIVER}}/g, cusInfo['contact_name']);\n          HTML = HTML.replace(/{{CUSTOMER_TAXNO}}/g, cusInfo['tax_no']); // TICKET INFO \n\n          HTML = HTML.replace(/{{ORDER_CODE_PI}}/g, data.ref_code);\n          HTML = HTML.replace(/{{DATE_ARRIVED}}/g, moment(data.date_arrived).format('YYYY-MM-DD'));\n          HTML = HTML.replace(/{{TIME_ARRIVED}}/g, moment(data.date_arrived).format('HH:MM'));\n          HTML = HTML.replace(/{{CREATOR_CODE}}/g, data.creator_code);\n          HTML = HTML.replace(/{{SERVICE_CODE}}/g, data.code);\n          var cart = data.cart !== null ? JSON.parse(data.cart) : [];\n          var temp = data.cart !== null ? HTML = HTML.replace(/{{ORDER_RECORDS}}/g, this._renderBodyCart(JSON.parse(data.cart))) : '';\n          HTML = HTML.replace(/{{ORDER_AMOUNT}}/g, numeral(this._sumCart(cart)).format('0,0'));\n          HTML = HTML.replace(/{{ORDER_AMOUNT_TAX}}/g, numeral(parseFloat(data.vat) / 100 * this._sumCart(cart)).format('0,0'));\n\n          var ORDER_SUM = this._sumCart(cart) + parseFloat(data.vat) / 100 * this._sumCart(cart);\n\n          HTML = HTML.replace(/{{ORDER_SUM}}/g, numeral(ORDER_SUM).format('0,0'));\n          HTML = HTML.replace(/{{ORDER_SUM_TEXT}}/g, N2T(ORDER_SUM)); // TICKET FOOTER\n\n          HTML = HTML.replace(/{{BELONG_USER}}/g, data.belong_user);\n          HTML = HTML.replace(/{{CONTENT_ISSUES}}/g, data.content_issue);\n          HTML = HTML.replace(/{{CONTENT_SOLVED}}/g, data.timeline_replies || ''); // BARCODE ;\n\n          HTML = HTML.replace(/{{BARCODE}}/g, \"<img style=\\\"height:60px\\\" src=\\\"https://barcode.tec-it.com/barcode.ashx?data=\".concat(data.code.toUpperCase(), \"\\\"/>\"));\n        }\n      }\n\n      return HTML;\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this2 = this;\n\n      var data = this.props.data;\n\n      var HTML = this._formatHtml(data, this.props.companyInfo);\n\n      return React.createElement(ViewModal, Object.assign({\n        name: 'Print'\n      }, this.props, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 156\n        },\n        __self: this\n      }), React.createElement(\"div\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 157\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        style: {\n          padding: 10\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 158\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"btn-group\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 159\n        },\n        __self: this\n      }, React.createElement(\"a\", {\n        onClick: function onClick() {\n          doPrint(HTML);\n        },\n        className: \"btn btn-normal btn-sm\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 161\n        },\n        __self: this\n      }, \" \", React.createElement(\"i\", {\n        className: \"fa fa-print\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 161\n        },\n        __self: this\n      })))), React.createElement(\"div\", {\n        ref: function ref(el) {\n          return _this2.componentRef = el;\n        },\n        style: {\n          paddingTop: 30,\n          paddingBottom: 30\n        },\n        dangerouslySetInnerHTML: {\n          __html: HTML\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 167\n        },\n        __self: this\n      })));\n    }\n  }]);\n\n  return PrintForm;\n}(React.Component);\n\nexport default PrintForm;","map":{"version":3,"sources":["D:/actions/st_frontend/src/pages/iservice/tickets/PrintForm.js"],"names":["N2T","doPrint","React","numeral","moment","ViewModal","PrintForm","props","state","cart","html","map","item","index","price","replace","total","parseInt","amount","stt","code","name","unit","format","sum","data","companyInfo","HTML","JSON","stringify","iservice_temp","console","log","cusInfo","parse","customer_info","ref_code","date_arrived","creator_code","temp","_renderBodyCart","_sumCart","parseFloat","vat","ORDER_SUM","belong_user","content_issue","timeline_replies","toUpperCase","_formatHtml","padding","el","componentRef","paddingTop","paddingBottom","__html","Component"],"mappings":"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","sourcesContent":["\r\n// HOOKS \r\nimport {N2T} from '../../../hook/ultil/N2T';\r\nimport doPrint from '../../../hook/ultil/doPrint';\r\n\r\nimport React from 'react';\r\n\r\nimport numeral from 'numeral';\r\nimport moment from 'moment';\r\n\r\n\r\nimport ViewModal from '../../../components/ViewModal';\r\n\r\n\r\nclass PrintForm extends React.Component {\r\n\r\n    constructor(props) {\r\n        super(props);\r\n        this.state = {};\r\n    }   \r\n\r\n    // USING FOR REDER BASIC\r\n    _renderBodyCart(cart){\r\n        let html = ``;\r\n        \r\n\r\n        cart.map((item,index)=>{\r\n\r\n            const price = item.price.replace(/,/g,'');\r\n            const total = parseInt(price) * parseInt(item.amount);\r\n            const stt = index + 1; \r\n            \r\n            html += `\r\n                <tr class=\"record-item\">\r\n                    <td class=\"text-center item\" style=\"vertical-align:middle\">\r\n                        ${stt}\r\n                    </td>\r\n                    \r\n                    <td class=\"text-center item\" style=\"vertical-align:middle\" >\r\n                        ${ item.code }\r\n                    </td>\r\n                    <td class=\"item-pro-desc item\" style=\"word-wrap:break-word;\">\r\n                       ${item.name  }\r\n                    </td>\r\n\r\n                    <td class=\"text-center item\" style=\"vertical-align:middle\">\r\n                        ${ item.unit || '' }\r\n                    </td>\r\n                    \r\n                    <td class=\"text-center item\" style=\"vertical-align:middle\">\r\n                        ${ item.amount }\r\n                    </td>\r\n                    \r\n                    <td class=\"text-center item\" style=\"vertical-align:middle\">\r\n                        ${ numeral(item.price).format('0,0') }\r\n                    </td>\r\n                    <td class=\"text-center item\" style=\"vertical-align:middle\">\r\n                        ${ numeral(price).format('0,0') }\r\n                    </td>\r\n                    \r\n                    \r\n\r\n                </tr>\r\n            `\r\n        });\r\n\r\n        return html;\r\n    }\r\n\r\n    _sumCart(cart){\r\n        let sum = 0 ;\r\n        cart.map((item)=>{\r\n            const price = item.price.replace(/,/g,'');\r\n            const total = parseInt(price) * parseInt(item.amount);\r\n            sum += total;\r\n        });\r\n\r\n        return sum; \r\n    }\r\n    _formatHtml(data,companyInfo){\r\n\r\n        let HTML = ``;\r\n        if(JSON.stringify(data)!=='{}'){\r\n            if(JSON.stringify(companyInfo)!=='{}'){\r\n\r\n                HTML = companyInfo.iservice_temp ; \r\n\r\n                HTML = HTML.replace(/{{COMPANY_LOGO}}/g,companyInfo['logo']);\r\n                HTML = HTML.replace(/{{COMPANY_NAME}}/g,companyInfo['name']);\r\n                HTML = HTML.replace(/{{COMPANY_ADDRESS}}/g,companyInfo['address']);\r\n                HTML = HTML.replace(/{{COMPANY_TAXNO}}/g,companyInfo['tax_no']);\r\n                HTML = HTML.replace(/{{COMPANY_PHONE}}/g,companyInfo['phone']);\r\n                HTML = HTML.replace(/{{COMPANY_WEBSITE}}/g,companyInfo['website']);\r\n                HTML = HTML.replace(/{{COMPANY_EMAIL}}/g,companyInfo['email']);\r\n\r\n                console.log(data);\r\n\r\n                // CUSTOMER INFO \r\n                const cusInfo = JSON.parse(data.customer_info);\r\n                HTML = HTML.replace(/{{CUSTOMER_NAME}}/g,cusInfo['name']);\r\n                HTML = HTML.replace(/{{CUSTOMER_ADDRESS}}/g,cusInfo['address_delivery']);\r\n                HTML = HTML.replace(/{{CUSTOMER_PHONE}}/g,cusInfo['phone']);\r\n                HTML = HTML.replace(/{{CUSTOMER_EMAIL}}/g,cusInfo['email']);\r\n                HTML = HTML.replace(/{{CUSTOMER_RECEIVER}}/g,cusInfo['contact_name']);\r\n                HTML = HTML.replace(/{{CUSTOMER_RECEIVER}}/g,cusInfo['contact_name']);\r\n                HTML = HTML.replace(/{{CUSTOMER_TAXNO}}/g,cusInfo['tax_no']);\r\n\r\n                // TICKET INFO \r\n                HTML = HTML.replace(/{{ORDER_CODE_PI}}/g,data.ref_code);\r\n                HTML = HTML.replace(/{{DATE_ARRIVED}}/g,moment(data.date_arrived).format('YYYY-MM-DD'));\r\n                HTML = HTML.replace(/{{TIME_ARRIVED}}/g,moment(data.date_arrived).format('HH:MM'));\r\n                HTML = HTML.replace(/{{CREATOR_CODE}}/g, data.creator_code );\r\n                HTML = HTML.replace(/{{SERVICE_CODE}}/g, data.code );\r\n                \r\n                const cart = data.cart !== null ? JSON.parse(data.cart) : [];\r\n                const temp = data.cart !== null ? HTML = HTML.replace(/{{ORDER_RECORDS}}/g, this._renderBodyCart(JSON.parse(data.cart))  ) : '';    \r\n                HTML = HTML.replace(/{{ORDER_AMOUNT}}/g, numeral(this._sumCart(cart)).format('0,0') );\r\n                HTML = HTML.replace(/{{ORDER_AMOUNT_TAX}}/g, numeral((parseFloat(data.vat)/100 ) * this._sumCart(cart)).format('0,0') );\r\n\r\n                const ORDER_SUM = this._sumCart(cart) + ( parseFloat(data.vat)/100 * this._sumCart(cart) );\r\n                HTML = HTML.replace(/{{ORDER_SUM}}/g,numeral(ORDER_SUM).format('0,0') );\r\n                HTML = HTML.replace(/{{ORDER_SUM_TEXT}}/g, N2T(ORDER_SUM) );\r\n                \r\n                // TICKET FOOTER\r\n                HTML = HTML.replace(/{{BELONG_USER}}/g, data.belong_user );\r\n                HTML = HTML.replace(/{{CONTENT_ISSUES}}/g, data.content_issue );\r\n                HTML = HTML.replace(/{{CONTENT_SOLVED}}/g, data.timeline_replies || '' );\r\n                \r\n                // BARCODE ;\r\n                HTML = HTML.replace(/{{BARCODE}}/g, `<img style=\"height:60px\" src=\"https://barcode.tec-it.com/barcode.ashx?data=${ data.code.toUpperCase() }\"/>`);\r\n                \r\n                \r\n                \r\n                \r\n                \r\n\r\n\r\n            }\r\n        }\r\n\r\n\r\n\r\n        return HTML\r\n    }\r\n\r\n    \r\n    render() {\r\n\r\n        \r\n        const data = this.props.data;\r\n        const HTML = this._formatHtml(data,this.props.companyInfo);\r\n        \r\n        \r\n\r\n        return (\r\n            <ViewModal name={ 'Print' } {...this.props}  >\r\n                <div>\r\n                    <div style={{padding:10}}>\r\n                        <div className=\"btn-group\">\r\n\r\n                            <a onClick={()=>{ doPrint(HTML) }} className=\"btn btn-normal btn-sm\"> <i className=\"fa fa-print\"></i></a>\r\n\r\n                            \r\n                        </div>\r\n                        \r\n                    </div>\r\n                    <div    \r\n                        ref={el => (this.componentRef = el)}\r\n                        style={{\r\n                                paddingTop:30,\r\n                                paddingBottom:30\r\n                        }}\r\n                            dangerouslySetInnerHTML={{ __html: HTML  }} \r\n                    />\r\n                </div>\r\n            </ViewModal>\r\n        );\r\n    }\r\n}\r\n\r\nexport default PrintForm;\r\n"]},"metadata":{},"sourceType":"module"}