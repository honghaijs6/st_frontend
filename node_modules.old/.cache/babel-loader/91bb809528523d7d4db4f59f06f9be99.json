{"ast":null,"code":"import _regeneratorRuntime from \"D:\\\\actions\\\\st_frontend\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/regenerator\";\nimport _asyncToGenerator from \"D:\\\\actions\\\\st_frontend\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/asyncToGenerator\";\nimport _classCallCheck from \"D:\\\\actions\\\\st_frontend\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"D:\\\\actions\\\\st_frontend\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"D:\\\\actions\\\\st_frontend\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"D:\\\\actions\\\\st_frontend\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"D:\\\\actions\\\\st_frontend\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/inherits\";\nimport _assertThisInitialized from \"D:\\\\actions\\\\st_frontend\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/assertThisInitialized\";\nvar _jsxFileName = \"D:\\\\actions\\\\st_frontend\\\\src\\\\pages\\\\Customer\\\\Setting\\\\CusPointRulePage\\\\index.js\";\n\n/* HOOKS */\nimport { detectForm } from '../../../../hook/before';\nimport doUpdateModelInfo from '../../../../hook/ultil/doUpdateModelInfo';\nimport React, { Component } from 'react';\nimport { Row, Col, Label, Button, FormGroup, ButtonGroup } from 'reactstrap';\nimport SelectListModel from '../../../../components/SelectListModel';\nimport SelectListModelCode from '../../../../components/SelectListModelCode';\nimport InputNumeral from '../../../../components/InputNumeral';\n\nvar CusPointRulePage =\n/*#__PURE__*/\nfunction (_Component) {\n  _inherits(CusPointRulePage, _Component);\n\n  function CusPointRulePage(props) {\n    var _this;\n\n    _classCallCheck(this, CusPointRulePage);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(CusPointRulePage).call(this, props));\n    _this.state = {\n      typeAction: '',\n      onAction: '',\n      status: '',\n      tab: 'CusPointRulePage'\n    };\n    _this.data = {\n      min_total: 0,\n      max_total: 0,\n      level_id: '',\n      payment_code: '',\n      value: 0\n    };\n    _this._onSubmit = _this._onSubmit.bind(_assertThisInitialized(_assertThisInitialized(_this)));\n    return _this;\n  }\n\n  _createClass(CusPointRulePage, [{\n    key: \"_onSubmit\",\n    value: function () {\n      var _onSubmit2 = _asyncToGenerator(\n      /*#__PURE__*/\n      _regeneratorRuntime.mark(function _callee() {\n        var fields, res;\n        return _regeneratorRuntime.wrap(function _callee$(_context) {\n          while (1) {\n            switch (_context.prev = _context.next) {\n              case 0:\n                //alert(JSON.stringify(this.data));\n                fields = ['min_total', 'max_total', 'formula'];\n\n                if (!(detectForm(fields, this.data) === '')) {\n                  _context.next = 5;\n                  break;\n                }\n\n                _context.next = 4;\n                return doUpdateModelInfo('companies', {\n                  id: window.USERINFO.company_id,\n                  point_formula: this.data\n                });\n\n              case 4:\n                res = _context.sent;\n\n              case 5:\n              case \"end\":\n                return _context.stop();\n            }\n          }\n        }, _callee, this);\n      }));\n\n      function _onSubmit() {\n        return _onSubmit2.apply(this, arguments);\n      }\n\n      return _onSubmit;\n    }()\n  }, {\n    key: \"_onChange\",\n    value: function _onChange(name, value) {\n      this.data[name] = value;\n\n      this._whereStateChange({\n        onAction: 'onChange'\n      });\n    }\n    /* WHERE*/\n\n  }, {\n    key: \"_whereStateChange\",\n    value: function _whereStateChange(newState) {\n      this.setState(Object.assign(this.state, newState));\n    }\n  }, {\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      var formulaData = window.USERINFO.point_formula !== null ? JSON.parse(window.USERINFO.point_formula) : {};\n\n      if (JSON.stringify(formulaData) !== '{}') {\n        this.data = formulaData;\n        this.setState({\n          onAction: 'get_formula'\n        });\n      }\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this2 = this;\n\n      return React.createElement(\"div\", {\n        hidden: this.props.onTab === this.state.tab ? false : true,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 96\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        style: {\n          padding: 30\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 97\n        },\n        __self: this\n      }, React.createElement(\"h5\", {\n        className: \"font-12 text-uppercase txt-green\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 98\n        },\n        __self: this\n      }, \" Th\\xF4ng tin chung \"), React.createElement(Row, {\n        style: {\n          marginTop: 20\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 99\n        },\n        __self: this\n      }, React.createElement(Col, {\n        md: 3,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 100\n        },\n        __self: this\n      }, React.createElement(FormGroup, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 101\n        },\n        __self: this\n      }, React.createElement(Label, {\n        for: \"code\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 102\n        },\n        __self: this\n      }, \" Gi\\xE1 tr\\u1ECB \\u0111\\u01A1n h\\xE0ng (t\\u1ED1i thi\\u1EC3u) \", React.createElement(\"span\", {\n        className: \"text-danger\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 102\n        },\n        __self: this\n      }, \"*\")), React.createElement(InputNumeral, {\n        id: \"min_total\",\n        defaultValue: this.data.min_total,\n        onChange: function onChange(value) {\n          _this2._onChange('min_total', value);\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 103\n        },\n        __self: this\n      }))), React.createElement(Col, {\n        md: 3,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 106\n        },\n        __self: this\n      }, React.createElement(FormGroup, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 107\n        },\n        __self: this\n      }, React.createElement(Label, {\n        for: \"code\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 108\n        },\n        __self: this\n      }, \" Gi\\xE1 tr\\u1ECB \\u0111\\u01A1n h\\xE0ng (t\\u1ED1i \\u0111a) \", React.createElement(\"span\", {\n        className: \"text-danger\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 108\n        },\n        __self: this\n      }, \"*\")), React.createElement(InputNumeral, {\n        id: \"max_total\",\n        defaultValue: this.data.max_total,\n        onChange: function onChange(value) {\n          _this2._onChange('max_total', value);\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 109\n        },\n        __self: this\n      })))), React.createElement(Row, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 114\n        },\n        __self: this\n      }, React.createElement(Col, {\n        md: 3,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 115\n        },\n        __self: this\n      }, React.createElement(FormGroup, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 116\n        },\n        __self: this\n      }, React.createElement(Label, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 117\n        },\n        __self: this\n      }, \" \\xC1p d\\u1EE5ng cho kh\\xE1ch h\\xE0ng \"), React.createElement(SelectListModel, {\n        defaultValue: this.data.level_id,\n        onChange: function onChange(e) {\n          _this2._onChange('level_id', e.target.value);\n        },\n        strModel: \"levels\",\n        name: \"T\\u1EA5t c\\u1EA3\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 118\n        },\n        __self: this\n      }))), React.createElement(Col, {\n        md: 3,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 121\n        },\n        __self: this\n      }, React.createElement(FormGroup, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 122\n        },\n        __self: this\n      }, React.createElement(Label, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 123\n        },\n        __self: this\n      }, \" \\xC1p d\\u1EE5ng cho h\\u1EA1n m\\u1EE9c thanh to\\xE1n \"), React.createElement(SelectListModelCode, {\n        defaultValue: this.data.payment_code,\n        onChange: function onChange(e) {\n          _this2._onChange('payment_code', e.target.value);\n        },\n        strModel: \"payments\",\n        name: \"T\\u1EA5t c\\u1EA3\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 124\n        },\n        __self: this\n      })))), React.createElement(Row, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 129\n        },\n        __self: this\n      }, React.createElement(Col, {\n        md: 6,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 130\n        },\n        __self: this\n      }, React.createElement(FormGroup, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 131\n        },\n        __self: this\n      }, React.createElement(Label, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 132\n        },\n        __self: this\n      }, \" C\\xF4ng th\\u1EE9c \"), \" \", React.createElement(\"br\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 132\n        },\n        __self: this\n      }), React.createElement(ButtonGroup, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 133\n        },\n        __self: this\n      }, React.createElement(Button, {\n        disabled: true,\n        className: \"btn btn-success\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 134\n        },\n        __self: this\n      }, \" total_order_value /  \"), React.createElement(InputNumeral, {\n        defaultValue: this.data.value,\n        style: {\n          borderRadius: 0\n        },\n        id: \"formular\",\n        type: \"text\",\n        onChange: function onChange(value) {\n          _this2._onChange('value', value);\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 135\n        },\n        __self: this\n      }), React.createElement(Button, {\n        disabled: true,\n        className: \"btn btn-success\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 136\n        },\n        __self: this\n      }, \" = 1 \\u0111i\\u1EC3m  \"))))), React.createElement(Row, {\n        style: {\n          marginTop: 20\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 143\n        },\n        __self: this\n      }, React.createElement(Col, {\n        md: 3,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 144\n        },\n        __self: this\n      }, React.createElement(Button, {\n        onClick: this._onSubmit,\n        style: {\n          width: 120\n        },\n        className: \"btn btn-ubuntu\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 145\n        },\n        __self: this\n      }, \" C\\u1EADp nh\\u1EADt \"))), React.createElement(\"div\", {\n        style: {\n          position: 'relative',\n          bottom: -20,\n          marginTop: 30\n        },\n        className: \"form-err text-muted\",\n        id: \"form-err\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 150\n        },\n        __self: this\n      })));\n    }\n  }]);\n\n  return CusPointRulePage;\n}(Component);\n\nexport { CusPointRulePage as default };","map":{"version":3,"sources":["D:/actions/st_frontend/src/pages/Customer/Setting/CusPointRulePage/index.js"],"names":["detectForm","doUpdateModelInfo","React","Component","Row","Col","Label","Button","FormGroup","ButtonGroup","SelectListModel","SelectListModelCode","InputNumeral","CusPointRulePage","props","state","typeAction","onAction","status","tab","data","min_total","max_total","level_id","payment_code","value","_onSubmit","bind","fields","id","window","USERINFO","company_id","point_formula","res","name","_whereStateChange","newState","setState","Object","assign","formulaData","JSON","parse","stringify","onTab","padding","marginTop","_onChange","e","target","borderRadius","width","position","bottom"],"mappings":"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","sourcesContent":["\r\n/* HOOKS */\r\nimport { detectForm } from '../../../../hook/before' ; \r\nimport doUpdateModelInfo from '../../../../hook/ultil/doUpdateModelInfo' ; \r\n\r\nimport React, { Component } from 'react';\r\nimport {  Row, Col, Label, Button, FormGroup, ButtonGroup } from 'reactstrap';\r\n\r\n\r\n\r\nimport SelectListModel from '../../../../components/SelectListModel';\r\nimport SelectListModelCode from '../../../../components/SelectListModelCode';\r\n\r\nimport InputNumeral  from '../../../../components/InputNumeral'\r\n \r\n\r\n\r\nexport default class CusPointRulePage extends Component{\r\n\r\n  constructor(props){\r\n    super(props);\r\n\r\n    this.state = {\r\n      typeAction:'',\r\n      onAction:'',\r\n      status:'',\r\n\r\n      tab:'CusPointRulePage' , \r\n\r\n      \r\n    }\r\n\r\n    this.data = {\r\n      min_total:0,\r\n      max_total:0,\r\n      level_id:'',\r\n      payment_code:'',\r\n      value:0\r\n    }\r\n    \r\n    this._onSubmit = this._onSubmit.bind(this); \r\n\r\n  }\r\n \r\n  async _onSubmit(){\r\n    //alert(JSON.stringify(this.data));\r\n\r\n    const fields = ['min_total','max_total','formula'] ;\r\n\r\n    if(detectForm(fields,this.data)===''){\r\n      \r\n       //  CHECK VALUE FORMULA ; \r\n       const res =  await doUpdateModelInfo('companies',{\r\n         id:window.USERINFO.company_id, \r\n         point_formula:this.data\r\n       }) ; \r\n       \r\n\r\n    }\r\n\r\n  }\r\n\r\n  _onChange(name,value){\r\n    this.data[name] = value ; \r\n    this._whereStateChange({\r\n      onAction:'onChange'\r\n    });\r\n    \r\n\r\n  }\r\n\r\n  /* WHERE*/\r\n  _whereStateChange(newState){\r\n    this.setState(Object.assign(this.state,newState));\r\n  }\r\n\r\n  componentDidMount(){\r\n    const formulaData = window.USERINFO.point_formula !== null ? JSON.parse(window.USERINFO.point_formula)  : {};\r\n    \r\n    if(JSON.stringify(formulaData)!=='{}'){\r\n      this.data = formulaData ;\r\n      this.setState({\r\n        onAction:'get_formula'\r\n      });\r\n\r\n    }\r\n\r\n\r\n  }\r\n\r\n\r\n  render(){\r\n\r\n    \r\n    return(\r\n      <div hidden={  this.props.onTab === this.state.tab ? false : true }  >\r\n        <div style={{padding:30}}>\r\n           <h5 className=\"font-12 text-uppercase txt-green\"> Thông tin chung </h5>\r\n           <Row style={{marginTop:20}}>\r\n              <Col md={3}>\r\n                <FormGroup>\r\n                  <Label for=\"code\"> Giá trị đơn hàng (tối thiểu) <span className=\"text-danger\">*</span></Label>\r\n                  <InputNumeral id=\"min_total\" defaultValue={this.data.min_total} onChange={(value)=>{ this._onChange('min_total',value) }}  />\r\n                </FormGroup>\r\n              </Col>\r\n              <Col md={3}>\r\n                <FormGroup>\r\n                <Label for=\"code\"> Giá trị đơn hàng (tối đa) <span className=\"text-danger\">*</span></Label>\r\n                  <InputNumeral id=\"max_total\" defaultValue={this.data.max_total} onChange={(value)=>{ this._onChange('max_total',value) }} />\r\n\r\n                </FormGroup>\r\n              </Col>\r\n            </Row>\r\n            <Row>\r\n              <Col md={3}>\r\n                <FormGroup>\r\n                  <Label> Áp dụng cho khách hàng </Label>\r\n                  <SelectListModel defaultValue={this.data.level_id} onChange={(e)=>{  this._onChange('level_id',e.target.value) }} strModel=\"levels\" name=\"Tất cả\"  />\r\n                </FormGroup>\r\n              </Col>\r\n              <Col md={3}>\r\n                <FormGroup>\r\n                  <Label> Áp dụng cho hạn mức thanh toán </Label>\r\n                  <SelectListModelCode defaultValue={this.data.payment_code} onChange={(e)=>{ this._onChange('payment_code',e.target.value) }} strModel=\"payments\" name=\"Tất cả\" />\r\n                </FormGroup>\r\n              </Col>\r\n            </Row>\r\n\r\n            <Row>\r\n              <Col md={6}>\r\n                <FormGroup>\r\n                  <Label> Công thức </Label> <br></br>\r\n                  <ButtonGroup>\r\n                    <Button disabled className=\"btn btn-success\" > total_order_value /  </Button>\r\n                    <InputNumeral defaultValue={this.data.value} style={{borderRadius:0}} id=\"formular\" type=\"text\" onChange={(value)=>{ this._onChange('value',value) }} />\r\n                    <Button disabled className=\"btn btn-success\" > = 1 điểm  </Button>\r\n                  </ButtonGroup>\r\n                  \r\n                </FormGroup>\r\n              </Col>\r\n            </Row>\r\n\r\n            <Row style={{marginTop:20}}>\r\n              <Col md={3}>\r\n                <Button onClick={this._onSubmit} style={{width:120}} className=\"btn btn-ubuntu\"> Cập nhật </Button>\r\n              </Col>\r\n              \r\n            </Row>\r\n            \r\n            <div style={{position:'relative',bottom:-20,marginTop:30}}  className=\"form-err text-muted\" id=\"form-err\"></div>\r\n\r\n            \r\n\r\n        </div>  \r\n      </div>\r\n    )\r\n  }\r\n}\r\n"]},"metadata":{},"sourceType":"module"}