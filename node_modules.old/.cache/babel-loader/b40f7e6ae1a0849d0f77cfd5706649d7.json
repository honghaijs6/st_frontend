{"ast":null,"code":"import _defineProperty from \"D:\\\\actions\\\\st_frontend\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/defineProperty\";\nimport _classCallCheck from \"D:\\\\actions\\\\st_frontend\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"D:\\\\actions\\\\st_frontend\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"D:\\\\actions\\\\st_frontend\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"D:\\\\actions\\\\st_frontend\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"D:\\\\actions\\\\st_frontend\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/inherits\";\nimport _assertThisInitialized from \"D:\\\\actions\\\\st_frontend\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/assertThisInitialized\";\nvar _jsxFileName = \"D:\\\\actions\\\\st_frontend\\\\src\\\\pages\\\\Inventory\\\\Warehouse\\\\index.js\";\nimport Model from '../../../model/model'; // HOOKS \n\nimport moment from 'moment';\nimport React, { Component } from 'react';\nimport { connect } from 'react-redux';\nimport { BenGrid } from '../../../components/BenGrid2';\nimport MyForm from './Form';\nvar MODE = 'warehouses';\nvar MODE_NAME = 'Nhà kho';\n\nvar Warehouse =\n/*#__PURE__*/\nfunction (_Component) {\n  _inherits(Warehouse, _Component);\n\n  function Warehouse(props) {\n    var _this;\n\n    _classCallCheck(this, Warehouse);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(Warehouse).call(this, props));\n    _this._curInfo = {};\n    _this.state = {\n      typeAction: '',\n      onAction: '',\n      status: '',\n      isFormOpen: false\n    };\n    _this.grid = {\n      colums: [{\n        headerName: \"Mã Kho\",\n        field: \"code\",\n        width: 150,\n        cellRenderer: function cellRenderer(params) {\n          return \"<span class=\\\"badge bg-green text-uppercase\\\"> \".concat(params.value, \" </span>\");\n        }\n      }, {\n        headerName: \"Kho Hàng\",\n        field: \"name\",\n        width: 270\n      }, {\n        headerName: \"Địa chỉ\",\n        field: \"address\",\n        width: 400\n      }, {\n        headerName: \"Người liên hệ\",\n        field: \"contact_person\",\n        width: 220\n      }, {\n        headerName: \"SĐT\",\n        field: \"phone\",\n        width: 140\n      }, {\n        headerName: \"Người tạo\",\n        field: \"creator\",\n        width: 180\n      }, {\n        headerName: \"Ngày tạo\",\n        field: \"date_created\",\n        width: 140,\n        cellRenderer: function cellRenderer(params) {\n          var humanDate = params.value === null ? '<i class=\"fa fa-clock-o\"></i>' : moment(params.value).format('YYYY-MM-DD');\n          return \"\\n                \".concat(humanDate, \"\\n            \");\n        }\n      }, {\n        headerName: \"Điều chỉnh\",\n        field: \"date_modified\",\n        width: 140,\n        cellRenderer: function cellRenderer(params) {\n          var humanDate = params.value === null ? '<i class=\"fa fa-clock-o\"></i>' : moment(params.value).format('YYYY-MM-DD');\n          return \"\\n                \".concat(humanDate, \"\\n            \");\n        }\n      }],\n      rowData: []\n    };\n\n    _this._setup();\n\n    _this._doOpenModal = _this._doOpenModal.bind(_assertThisInitialized(_assertThisInitialized(_this)));\n    return _this;\n  }\n\n  _createClass(Warehouse, [{\n    key: \"_setup\",\n    value: function _setup() {\n      this.model = new Model(MODE, this.props.dispatch);\n    }\n  }, {\n    key: \"_doOpenModalUpdate\",\n    value: function _doOpenModalUpdate(data) {\n      this._curInfo = data;\n\n      this._whereStateChange({\n        typeAction: 'put',\n        isFormOpen: true\n      });\n    }\n  }, {\n    key: \"_doOpenModal\",\n    value: function _doOpenModal() {\n      this._whereStateChange({\n        typeAction: 'post',\n        isFormOpen: true\n      });\n    }\n  }, {\n    key: \"_onSubmitForm\",\n    value: function _onSubmitForm(res) {\n      var isOpen = res.name === 'success' || res.name === 'ok' ? false : true;\n      this.setState({\n        isFormOpen: isOpen,\n        typeAction: '',\n        status: res.name\n      });\n    }\n  }, {\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      // LOAD DATA HERE \n      this.model.load();\n    }\n  }, {\n    key: \"componentWillReceiveProps\",\n    value: function componentWillReceiveProps(newProps) {\n      this.grid.rowData = newProps[MODE]['list']; // CONNECT REDUX STATE \n\n      this._whereStateChange(newProps[MODE]['state']);\n    }\n  }, {\n    key: \"_whereStateChange\",\n    value: function _whereStateChange(newState) {\n      this.setState(Object.assign(this.state, newState));\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this2 = this;\n\n      return React.createElement(\"div\", {\n        className: \"animated fadeIn\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 146\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"blank-app\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 147\n        },\n        __self: this\n      }, React.createElement(MyForm, {\n        name: MODE_NAME,\n        width: \"41%\",\n        typeAction: this.state.typeAction,\n        isOpen: this.state.isFormOpen,\n        onToggle: function onToggle(isOpen) {\n          _this2.setState({\n            isFormOpen: isOpen,\n            typeAction: ''\n          });\n        },\n        model: this.model,\n        data: this._curInfo,\n        onSubmitForm: function onSubmitForm(res) {\n          _this2._onSubmitForm(res);\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 149\n        },\n        __self: this\n      }), React.createElement(BenGrid, {\n        onBtnEdit: function onBtnEdit(data) {\n          _this2._doOpenModalUpdate(data);\n        },\n        onBtnAdd: this._doOpenModal,\n        onCellSelected: function onCellSelected(json) {\n          _this2._curInfo = json;\n        },\n        gridID: \"id\",\n        rowSelection: \"single\",\n        isRightTool: true,\n        height: \"77.5vh\",\n        nextColums: this.grid.colums,\n        rowData: this.grid.rowData,\n        model: this.model,\n        formStatus: this.state.status,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 162\n        },\n        __self: this\n      })));\n    }\n  }]);\n\n  return Warehouse;\n}(Component);\n\nvar mapStateToProps = function mapStateToProps(state) {\n  return _defineProperty({}, MODE, state[MODE]);\n};\n\nexport default connect(mapStateToProps)(Warehouse);","map":{"version":3,"sources":["D:/actions/st_frontend/src/pages/Inventory/Warehouse/index.js"],"names":["Model","moment","React","Component","connect","BenGrid","MyForm","MODE","MODE_NAME","Warehouse","props","_curInfo","state","typeAction","onAction","status","isFormOpen","grid","colums","headerName","field","width","cellRenderer","params","value","humanDate","format","rowData","_setup","_doOpenModal","bind","model","dispatch","data","_whereStateChange","res","isOpen","name","setState","load","newProps","newState","Object","assign","_onSubmitForm","_doOpenModalUpdate","json","mapStateToProps"],"mappings":"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","sourcesContent":["import Model from '../../../model/model';\r\n\r\n// HOOKS \r\n\r\nimport moment from 'moment';\r\n\r\n\r\n\r\nimport React, { Component } from 'react';\r\nimport { connect } from 'react-redux'; \r\n\r\n\r\nimport { BenGrid } from '../../../components/BenGrid2';\r\n\r\nimport MyForm from './Form';\r\n\r\nconst MODE = 'warehouses';\r\nconst MODE_NAME = 'Nhà kho'; \r\n\r\nclass Warehouse extends Component {\r\n\r\n\r\n  _curInfo = {}\r\n\r\n  constructor(props){\r\n    super(props);\r\n\r\n    this.state = {\r\n      typeAction :'',\r\n      onAction:'',\r\n      status:'',\r\n\r\n      isFormOpen:false\r\n    }\r\n\r\n    this.grid = {\r\n        colums:[\r\n          {headerName: \"Mã Kho\", field: \"code\", width:150,\r\n            cellRenderer(params){\r\n                return `<span class=\"badge bg-green text-uppercase\"> ${ params.value } </span>` ;\r\n            }\r\n          },\r\n          {\r\n            headerName:\"Kho Hàng\",field:\"name\", width:270},\r\n          {\r\n              headerName:\"Địa chỉ\", field:\"address\", width:400\r\n          },\r\n\r\n          {\r\n            headerName:\"Người liên hệ\", field:\"contact_person\", width:220\r\n          },\r\n\r\n          {\r\n            headerName:\"SĐT\", field:\"phone\", width:140\r\n          },\r\n          \r\n        \r\n\r\n          {\r\n            headerName:\"Người tạo\", field:\"creator\",width:180\r\n          },\r\n          \r\n\r\n          {headerName: \"Ngày tạo\", field: \"date_created\",width:140,\r\n            cellRenderer(params){\r\n                const humanDate =   params.value ===null ? '<i class=\"fa fa-clock-o\"></i>': moment(params.value).format('YYYY-MM-DD') ; \r\n                return `\r\n                ${ humanDate }\r\n            `\r\n            }\r\n          },\r\n          {headerName: \"Điều chỉnh\", field: \"date_modified\",width:140,\r\n            cellRenderer(params){\r\n                const humanDate =   params.value ===null ? '<i class=\"fa fa-clock-o\"></i>': moment(params.value).format('YYYY-MM-DD') ; \r\n                return `\r\n                ${ humanDate }\r\n            `\r\n            }\r\n          },\r\n          \r\n\r\n          \r\n          \r\n        ],\r\n        rowData: []\r\n    }\r\n\r\n\r\n    this._setup();\r\n\r\n    this._doOpenModal = this._doOpenModal.bind(this); \r\n  }\r\n\r\n  _setup(){\r\n    this.model = new Model(MODE,this.props.dispatch); \r\n\r\n\r\n  }\r\n  _doOpenModalUpdate(data){\r\n    this._curInfo = data ; \r\n    this._whereStateChange({\r\n      typeAction:'put',\r\n      isFormOpen:true\r\n    });\r\n  }\r\n\r\n  _doOpenModal(){\r\n    \r\n    this._whereStateChange({\r\n      typeAction:'post',\r\n      isFormOpen:true\r\n    });\r\n\r\n  }\r\n\r\n  _onSubmitForm(res){\r\n    \r\n    const isOpen = res.name === 'success' || res.name === 'ok' ? false : true ;\r\n    this.setState({\r\n      isFormOpen:isOpen,\r\n      typeAction:'',\r\n      status:res.name\r\n    });\r\n\r\n  }\r\n\r\n  componentDidMount(){\r\n    // LOAD DATA HERE \r\n    this.model.load();\r\n  }\r\n\r\n  componentWillReceiveProps(newProps){\r\n    this.grid.rowData = newProps[MODE]['list'];\r\n    // CONNECT REDUX STATE \r\n    this._whereStateChange(newProps[MODE]['state']);\r\n    \r\n  }\r\n\r\n  _whereStateChange(newState){\r\n    this.setState(Object.assign(this.state,newState));\r\n  }\r\n  render() {\r\n\r\n    \r\n    return (\r\n      <div className=\"animated fadeIn\">\r\n        <div className=\"blank-app\">\r\n          \r\n              <MyForm \r\n                 name={ MODE_NAME }\r\n                 width='41%'\r\n                 \r\n                 typeAction={this.state.typeAction}\r\n                 isOpen={this.state.isFormOpen}\r\n                 onToggle={(isOpen)=>{ this.setState({isFormOpen:isOpen,typeAction:''}) }}\r\n                 model={ this.model }\r\n                 data={ this._curInfo }\r\n\r\n                 onSubmitForm={(res)=>{ this._onSubmitForm(res) }}\r\n\r\n              />\r\n              <BenGrid\r\n\r\n                  onBtnEdit={(data)=>{ this._doOpenModalUpdate(data)  }}\r\n                  onBtnAdd={ this._doOpenModal }\r\n                  onCellSelected={(json)=>{ this._curInfo = json  }}\r\n\r\n                  gridID='id'\r\n                  rowSelection='single'\r\n\r\n                  isRightTool={ true }\r\n                  height=\"77.5vh\"\r\n\r\n                  nextColums={ this.grid.colums }\r\n                  rowData={this.grid.rowData}\r\n                  model={ this.model }\r\n                  formStatus={ this.state.status }\r\n                  \r\n                  \r\n              />\r\n        </div>\r\n      </div>\r\n\r\n    ); \r\n  }\r\n}\r\n\r\nconst mapStateToProps = (state) => {\r\n  return {\r\n    [MODE]: state[MODE]\r\n  }\r\n}\r\n\r\nexport default connect(mapStateToProps)(Warehouse);\r\n\r\n\r\n"]},"metadata":{},"sourceType":"module"}