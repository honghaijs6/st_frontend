{"ast":null,"code":"import _regeneratorRuntime from \"D:\\\\actions\\\\st_frontend\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/regenerator\";\nimport _asyncToGenerator from \"D:\\\\actions\\\\st_frontend\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/asyncToGenerator\";\nimport _classCallCheck from \"D:\\\\actions\\\\st_frontend\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"D:\\\\actions\\\\st_frontend\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"D:\\\\actions\\\\st_frontend\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"D:\\\\actions\\\\st_frontend\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"D:\\\\actions\\\\st_frontend\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/inherits\";\nimport _assertThisInitialized from \"D:\\\\actions\\\\st_frontend\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/assertThisInitialized\";\nvar _jsxFileName = \"D:\\\\actions\\\\st_frontend\\\\src\\\\components\\\\InputSuggestOrder.js\";\nimport Model from '../model/model';\nimport doFindAll from '../hook/ultil/doFindAll';\nimport React, { Component } from 'react';\nimport { Input, ButtonGroup, Button } from 'reactstrap';\n\nvar InputSuggestOrder =\n/*#__PURE__*/\nfunction (_Component) {\n  _inherits(InputSuggestOrder, _Component);\n\n  function InputSuggestOrder(props) {\n    var _this;\n\n    _classCallCheck(this, InputSuggestOrder);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(InputSuggestOrder).call(this, props));\n    _this.state = {\n      display: 'none',\n      value: props.defaultValue || '',\n      rows: [],\n      selectedIndex: null,\n      strModel: 'orders',\n      code: props.code || 'code_pi' // field mặc định\n\n    };\n    _this._keyHandling = _this._keyHandling.bind(_assertThisInitialized(_assertThisInitialized(_this)));\n    return _this;\n  }\n\n  _createClass(InputSuggestOrder, [{\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      this.model = new Model('orders');\n      this.model.set('paginate', {\n        status_type: 1\n      });\n    }\n  }, {\n    key: \"_onChange\",\n    value: function () {\n      var _onChange2 = _asyncToGenerator(\n      /*#__PURE__*/\n      _regeneratorRuntime.mark(function _callee(key) {\n        var _this2 = this;\n\n        return _regeneratorRuntime.wrap(function _callee$(_context) {\n          while (1) {\n            switch (_context.prev = _context.next) {\n              case 0:\n                this.model.set('paginate', {\n                  key: key\n                });\n                this.model.fetch(function (res) {\n                  var data = res.data;\n\n                  _this2.setState({\n                    display: 'block',\n                    value: key,\n                    time: 0,\n                    selectedIndex: 0,\n                    rows: data.name === 'success' ? data.rows : []\n                  });\n                });\n\n              case 2:\n              case \"end\":\n                return _context.stop();\n            }\n          }\n        }, _callee, this);\n      }));\n\n      function _onChange(_x) {\n        return _onChange2.apply(this, arguments);\n      }\n\n      return _onChange;\n    }()\n  }, {\n    key: \"_keyHandling\",\n    value: function _keyHandling(e) {\n      var index = this.state.selectedIndex === null ? 0 : this.state.selectedIndex;\n\n      if (this.state.rows.length > 0) {\n        switch (e.keyCode) {\n          case 40:\n            // arrow down\n            index = index >= 5 ? 0 : index + 1;\n            index = this.state.rows.length === 1 ? 0 : index;\n            this.setState({\n              selectedIndex: index,\n              value: this.state.rows[index][this.state.code]\n            });\n            break;\n\n          case 38:\n            // arrow up\n            index = index <= 0 ? 5 : index - 1;\n            index = this.state.rows.length === 1 ? 0 : index;\n            this.setState({\n              selectedIndex: index,\n              value: this.state.rows[index][this.state.code]\n            });\n            break;\n\n          case 13:\n            index = this.state.rows.length === 1 ? 0 : index;\n\n            this._onSelected(this.state.rows[index]);\n\n            break;\n        }\n      }\n    }\n    /*componentWillUnmount(){\r\n        \r\n        window.removeEventListener(\"keyup\",this._keyHandling);\r\n        //document.querySelector(\"*\").removeEventListener(\"click\",()=>{});\r\n        }\r\n      componentDidMount(){\r\n          window.addEventListener(\"keyup\",this._keyHandling.bind(this));\r\n          document.querySelector(\"*\").addEventListener(\"click\",()=>{\r\n            this.setState({display:'none'});\r\n        });\r\n      }*/\n\n  }, {\n    key: \"_onSelected\",\n    value: function _onSelected(item) {\n      this.setState({\n        display: 'none',\n        value: item[this.state.code]\n      });\n\n      if (this.props.onSelected !== undefined) {\n        this.props.onSelected(item);\n      }\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this3 = this;\n\n      return React.createElement(\"div\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 135\n        },\n        __self: this\n      }, React.createElement(ButtonGroup, {\n        style: {\n          width: '100%'\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 136\n        },\n        __self: this\n      }, React.createElement(Input, {\n        onKeyUp: this._keyHandling,\n        id: this.props.id || 0,\n        placeholder: \"S\\u1ED1 inv...\",\n        style: {\n          borderRight: 0,\n          borderTopRightRadius: 0,\n          borderBottomRightRadius: 0,\n          width: '100%'\n        },\n        value: this.state.value,\n        onChange: function onChange(e) {\n          _this3._onChange(e.target.value);\n        },\n        type: \"text\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 137\n        },\n        __self: this\n      }), React.createElement(Button, {\n        disabled: true,\n        style: {\n          background: '#fff',\n          color: '#999'\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 152\n        },\n        __self: this\n      }, \" \", React.createElement(\"i\", {\n        className: \"fa fa-search\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 156\n        },\n        __self: this\n      }), \" \")), React.createElement(\"ul\", {\n        className: \"suggest-holder\",\n        style: {\n          display: this.state.display\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 163\n        },\n        __self: this\n      }, this.state.rows.map(function (item, index) {\n        var markSlected = index === _this3.state.selectedIndex ? 'active' : '';\n        return React.createElement(\"li\", {\n          className: markSlected,\n          onClick: function onClick() {\n            _this3._onSelected(item);\n          },\n          key: item.id,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 169\n          },\n          __self: this\n        }, \" \", item.code_pi, \" \");\n      })));\n    }\n  }]);\n\n  return InputSuggestOrder;\n}(Component);\n\nexport { InputSuggestOrder as default };","map":{"version":3,"sources":["D:/actions/st_frontend/src/components/InputSuggestOrder.js"],"names":["Model","doFindAll","React","Component","Input","ButtonGroup","Button","InputSuggestOrder","props","state","display","value","defaultValue","rows","selectedIndex","strModel","code","_keyHandling","bind","model","set","status_type","key","fetch","res","data","setState","time","name","e","index","length","keyCode","_onSelected","item","onSelected","undefined","width","id","borderRight","borderTopRightRadius","borderBottomRightRadius","_onChange","target","background","color","map","markSlected","code_pi"],"mappings":"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","sourcesContent":["\r\nimport Model from '../model/model';\r\n\r\n\r\nimport doFindAll from '../hook/ultil/doFindAll' ; \r\n\r\nimport React, { Component } from 'react';\r\nimport { Input, ButtonGroup, Button } from 'reactstrap';\r\n\r\n\r\n\r\nexport default class InputSuggestOrder extends Component{\r\n\r\n    \r\n    constructor(props){\r\n        super(props);\r\n\r\n        \r\n        this.state = {\r\n            display:'none',\r\n            value:props.defaultValue || '',\r\n            rows:[],\r\n            selectedIndex:null,  \r\n            strModel:'orders',\r\n            code:props.code || 'code_pi' // field mặc định\r\n        }\r\n\r\n        this._keyHandling = this._keyHandling.bind(this); \r\n    }\r\n\r\n    componentDidMount(){\r\n\r\n        this.model = new Model('orders');\r\n        this.model.set('paginate',{\r\n            status_type:1\r\n        });\r\n        \r\n    }\r\n    async _onChange(key){\r\n\r\n        this.model.set('paginate',{\r\n            key:key\r\n        });\r\n        this.model.fetch((res)=>{\r\n\r\n            const data = res.data ;\r\n\r\n            this.setState({\r\n                display:'block',\r\n                value:key,\r\n                time:0,\r\n                selectedIndex:0,\r\n                rows: data.name === 'success' ? data.rows : [] \r\n            });\r\n        });\r\n        \r\n    }\r\n    \r\n    \r\n\r\n    _keyHandling(e){\r\n        \r\n        let index = this.state.selectedIndex === null ? 0 : this.state.selectedIndex ; \r\n        if(this.state.rows.length>0){\r\n            switch(e.keyCode){\r\n                case 40: // arrow down\r\n                    \r\n                    \r\n                    index = index >= 5 ? 0 : index + 1 ; \r\n                    index = this.state.rows.length === 1 ? 0 : index; \r\n                    this.setState({\r\n                        selectedIndex:index,\r\n                        value:this.state.rows[index][this.state.code]\r\n                    });\r\n                    \r\n    \r\n                break ;\r\n                case 38: // arrow up\r\n                    index = index <= 0 ? 5 : index - 1 ; \r\n                    index = this.state.rows.length === 1 ? 0 : index; \r\n                    \r\n                    this.setState({\r\n                        selectedIndex:index,\r\n                        value:this.state.rows[index][this.state.code]\r\n                    });\r\n    \r\n                break ;\r\n                \r\n                case 13:\r\n                    index = this.state.rows.length === 1 ? 0 : index; \r\n                    this._onSelected(this.state.rows[index]);\r\n                break ;\r\n                \r\n            }\r\n        }\r\n       \r\n\r\n    }\r\n\r\n    /*componentWillUnmount(){\r\n        \r\n        window.removeEventListener(\"keyup\",this._keyHandling);\r\n        //document.querySelector(\"*\").removeEventListener(\"click\",()=>{});\r\n\r\n\r\n    }\r\n\r\n    componentDidMount(){\r\n\r\n        window.addEventListener(\"keyup\",this._keyHandling.bind(this));\r\n\r\n        document.querySelector(\"*\").addEventListener(\"click\",()=>{\r\n            this.setState({display:'none'});\r\n        });\r\n\r\n    }*/\r\n\r\n    _onSelected(item){\r\n        \r\n        this.setState({\r\n            display:'none',\r\n            value:item[this.state.code]\r\n        });\r\n\r\n        if(this.props.onSelected !== undefined){\r\n            this.props.onSelected(item);\r\n        }\r\n        \r\n    }\r\n\r\n\r\n    render(){ \r\n  \r\n        return(\r\n            <div>\r\n                <ButtonGroup style={{width:'100%'}}>\r\n                    <Input \r\n                        onKeyUp={ this._keyHandling } \r\n                        id={this.props.id || 0 } \r\n                        placeholder=\"Số inv...\" \r\n                        style={{\r\n                            borderRight:0,\r\n                            borderTopRightRadius:0,\r\n                            borderBottomRightRadius:0,\r\n                            width:'100%'\r\n                        }}\r\n                        value={this.state.value} \r\n                        onChange={(e)=>{ this._onChange(e.target.value) }}  \r\n                            \r\n                        type=\"text\" />\r\n\r\n                    <Button disabled style={{\r\n                        background:'#fff',\r\n                        color:'#999',\r\n                        \r\n                    }}> <i className=\"fa fa-search\"></i> </Button>\r\n\r\n                </ButtonGroup>\r\n                \r\n                \r\n\r\n                    \r\n                <ul className=\"suggest-holder\" style={{display:this.state.display}} >\r\n                    {\r\n                        this.state.rows.map((item,index)=>{\r\n\r\n                            const markSlected = index === this.state.selectedIndex ? 'active' : '' ; \r\n                            return( \r\n                                <li className={markSlected} onClick={ ()=>{ this._onSelected(item) } } key={item.id}> { item.code_pi } </li>\r\n                            )\r\n                        })\r\n                    }\r\n                </ul>\r\n                \r\n            </div>\r\n        )\r\n    }\r\n}"]},"metadata":{},"sourceType":"module"}