{"ast":null,"code":"import _defineProperty from \"D:\\\\actions\\\\st_frontend\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/defineProperty\";\nimport _classCallCheck from \"D:\\\\actions\\\\st_frontend\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"D:\\\\actions\\\\st_frontend\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"D:\\\\actions\\\\st_frontend\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"D:\\\\actions\\\\st_frontend\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"D:\\\\actions\\\\st_frontend\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/inherits\";\nimport _assertThisInitialized from \"D:\\\\actions\\\\st_frontend\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/assertThisInitialized\";\nvar _jsxFileName = \"D:\\\\actions\\\\st_frontend\\\\src\\\\pages\\\\Customer\\\\Setting\\\\CusOriginPage\\\\index.js\";\n\n/* OBJECT - PLUGIN*/\nimport Model from '../../../../model/model'; // HOOK ULTI  \n\nimport moment from 'moment';\nimport React, { Component } from 'react';\nimport { connect } from 'react-redux';\nimport { Button } from 'reactstrap';\n/* MODAL FORM & CTRL */\n\nimport MyForm from './Form';\nimport formCtrl from './formCtrl';\n/*INCLUDE OTHER COMPONENT*/\n\nimport { BenGrid } from '../../../../components/BenGrid2';\nvar MODE = 'customer_originals';\nvar MODE_TAB = 'CusOriginPage';\nvar MODE_NAME = 'Nguồn Khách Hàng';\n\nvar CusLevelPage =\n/*#__PURE__*/\nfunction (_Component) {\n  _inherits(CusLevelPage, _Component);\n\n  function CusLevelPage(props) {\n    var _this;\n\n    _classCallCheck(this, CusLevelPage);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(CusLevelPage).call(this, props));\n    _this._isData = false;\n    _this.state = {\n      typeAction: '',\n      // post - put - delete ...\n      onAction: '',\n      // string method\n      status: '',\n      // status\n      tab: MODE_TAB\n    };\n    _this.data = {};\n    _this.grid = {\n      colums: [{\n        headerName: \"Màu \",\n        field: \"color_code\",\n        width: 90,\n        cellRenderer: function cellRenderer(params) {\n          return \"<span class=\\\"badge\\\" style=\\\"background:\".concat(params.value, \"; color:\").concat(params.value, \"\\\">1111</span>\");\n        }\n      }, {\n        headerName: \"Mã \",\n        field: \"code\",\n        width: 140,\n        cellRenderer: function cellRenderer(params) {\n          return \"<span class=\\\"text-uppercase\\\"> \".concat(params.value, \" </span>\");\n        }\n      }, {\n        headerName: \"Tên \",\n        field: \"name\",\n        width: 320\n      }, {\n        headerName: \"Khách Hàng \",\n        field: \"total_customer\",\n        width: 140\n      }, {\n        headerName: \"Người tạo\",\n        field: \"creator\",\n        width: 200\n      }, {\n        headerName: \"Ngày tạo\",\n        field: \"date_created\",\n        width: 140,\n        cellRenderer: function cellRenderer(params) {\n          var humanDate = moment(params.value).format('YYYY-MM-DD');\n          return \"\\n             \".concat(humanDate, \"\\n           \");\n        }\n      }, {\n        headerName: \"Điều chỉnh\",\n        field: \"date_modified\",\n        width: 140,\n        cellRenderer: function cellRenderer(params) {\n          var humanDate = params.value !== null ? moment(params.value).format('YYYY-MM-DD') : '';\n          return \"\\n             \".concat(humanDate, \"\\n           \");\n        }\n      }],\n      rowData: []\n    };\n\n    _this._setup();\n\n    _this.onBtnNew = _this.onBtnNew.bind(_assertThisInitialized(_assertThisInitialized(_this)));\n    _this._doOpenModalUpdate = _this._doOpenModalUpdate.bind(_assertThisInitialized(_assertThisInitialized(_this)));\n    return _this;\n  }\n\n  _createClass(CusLevelPage, [{\n    key: \"_setup\",\n    value: function _setup() {\n      this.model = new Model(MODE, this.props.dispatch);\n      this.model.set('method', {\n        name: 'listAll',\n        params: 'all'\n      });\n      this.modal = new formCtrl(this.model, this.props.dispatch);\n    }\n    /* HOW */\n\n  }, {\n    key: \"resetGrid\",\n    value: function resetGrid() {\n      this.grid.rowData = this.data[MODE];\n\n      this._whereStateChange({\n        onAction: 'resetGrid'\n      });\n    }\n  }, {\n    key: \"_doOpenModalPost\",\n    value: function _doOpenModalPost() {\n      this.modal.open('post');\n\n      this._whereStateChange({\n        typeAction: 'post',\n        onAction: '_doOpenModalPost'\n      });\n    }\n  }, {\n    key: \"_doOpenModalUpdate\",\n    value: function _doOpenModalUpdate(data) {\n      this.modal.open('put', data);\n\n      this._whereStateChange({\n        typeAction: 'put',\n        onAction: '_doOpenModalUpdate'\n      });\n    }\n    /* END HOW*/\n\n    /* WHEN*/\n\n  }, {\n    key: \"onBtnNew\",\n    value: function onBtnNew() {\n      this._doOpenModalPost();\n    }\n  }, {\n    key: \"componentWillReceiveProps\",\n    value: function componentWillReceiveProps(newProps) {\n      if (!this._isData) {\n        this.model.initData();\n        this._isData = true;\n      }\n\n      this.data[MODE] = newProps[MODE]['list'] || [];\n      Object.assign(this.state, newProps[MODE]['state']);\n      this.resetGrid();\n    }\n    /* WHERE*/\n\n  }, {\n    key: \"_whereStateChange\",\n    value: function _whereStateChange(newState) {\n      this.setState(Object.assign(this.state, newState));\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      return React.createElement(\"div\", {\n        hidden: this.props.onTab === this.state.tab ? false : true,\n        style: {\n          padding: 10\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 171\n        },\n        __self: this\n      }, React.createElement(MyForm, {\n        name: MODE_NAME,\n        modal: this.modal,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 173\n        },\n        __self: this\n      }), React.createElement(BenGrid, {\n        height: \"78vh\",\n        gridID: \"id\",\n        formStatus: this.state.status,\n        rowSelection: \"single\",\n        onBtnEdit: this._doOpenModalUpdate,\n        onBtnAdd: this.onBtnNew,\n        isRightTool: true,\n        nextColums: this.grid.colums,\n        rowData: this.grid.rowData,\n        model: this.model,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 178\n        },\n        __self: this\n      }));\n    }\n  }]);\n\n  return CusLevelPage;\n}(Component);\n\nfunction mapStateToProps(state) {\n  return _defineProperty({}, MODE, state[MODE]);\n}\n\nexport default connect(mapStateToProps)(CusLevelPage);","map":{"version":3,"sources":["D:/actions/st_frontend/src/pages/Customer/Setting/CusOriginPage/index.js"],"names":["Model","moment","React","Component","connect","Button","MyForm","formCtrl","BenGrid","MODE","MODE_TAB","MODE_NAME","CusLevelPage","props","_isData","state","typeAction","onAction","status","tab","data","grid","colums","headerName","field","width","cellRenderer","params","value","humanDate","format","rowData","_setup","onBtnNew","bind","_doOpenModalUpdate","model","dispatch","set","name","modal","_whereStateChange","open","_doOpenModalPost","newProps","initData","Object","assign","resetGrid","newState","setState","onTab","padding","mapStateToProps"],"mappings":"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","sourcesContent":["/* OBJECT - PLUGIN*/\r\nimport Model from '../../../../model/model';\r\n// HOOK ULTI  \r\nimport moment from 'moment';\r\n\r\nimport React, { Component } from 'react';\r\nimport { connect } from 'react-redux';\r\n\r\n\r\nimport { Button } from 'reactstrap';\r\n\r\n\r\n/* MODAL FORM & CTRL */\r\nimport MyForm from './Form';\r\nimport formCtrl from './formCtrl';\r\n\r\n/*INCLUDE OTHER COMPONENT*/\r\nimport { BenGrid } from '../../../../components/BenGrid2';\r\n\r\nconst MODE = 'customer_originals';\r\nconst MODE_TAB = 'CusOriginPage';\r\nconst MODE_NAME = 'Nguồn Khách Hàng';\r\n\r\n\r\nclass CusLevelPage extends Component{\r\n\r\n  _isData = false;\r\n  constructor(props){\r\n    super(props);\r\n\r\n    this.state = {\r\n      typeAction:'', // post - put - delete ...\r\n      onAction:'', // string method\r\n      status:'', // status\r\n\r\n      tab:MODE_TAB\r\n      \r\n    }\r\n\r\n    this.data = {}\r\n\r\n    this.grid = {\r\n      colums:[\r\n\r\n        {headerName: \"Màu \", field: \"color_code\",width:90,\r\n          cellRenderer(params){\r\n\r\n            return `<span class=\"badge\" style=\"background:${ params.value }; color:${params.value}\">1111</span>`\r\n          }\r\n        },\r\n        {headerName: \"Mã \", field: \"code\",width:140,\r\n          cellRenderer(params){\r\n            return `<span class=\"text-uppercase\"> ${params.value} </span>`\r\n          }\r\n        },\r\n        \r\n        {headerName: \"Tên \", field: \"name\",width:320},\r\n        \r\n        {headerName: \"Khách Hàng \", field: \"total_customer\",width:140},\r\n        {headerName: \"Người tạo\", field: \"creator\",width:200},\r\n        {headerName: \"Ngày tạo\", field: \"date_created\",width:140,\r\n          \r\n          cellRenderer(params){\r\n\r\n            const humanDate = moment(params.value).format('YYYY-MM-DD')\r\n            return `\r\n             ${ humanDate }\r\n           `\r\n          }\r\n          \r\n        },\r\n        {headerName: \"Điều chỉnh\", field: \"date_modified\",width:140,\r\n          \r\n          cellRenderer(params){\r\n\r\n            const humanDate = params.value !== null ? moment(params.value).format('YYYY-MM-DD') : ''\r\n            return `\r\n             ${ humanDate }\r\n           `\r\n          }\r\n          \r\n        }\r\n\r\n      ],\r\n      rowData: []\r\n    }\r\n\r\n    this._setup();\r\n    this.onBtnNew = this.onBtnNew.bind(this)\r\n    this._doOpenModalUpdate = this._doOpenModalUpdate.bind(this);\r\n\r\n\r\n  }\r\n\r\n  _setup(){\r\n\r\n    this.model = new Model(MODE,this.props.dispatch);\r\n    this.model.set('method',{\r\n      name:'listAll',\r\n      params:'all'\r\n    });\r\n    \r\n    this.modal = new formCtrl(this.model,this.props.dispatch);\r\n    \r\n\r\n  }\r\n\r\n  /* HOW */\r\n  resetGrid(){\r\n      \r\n      this.grid.rowData = this.data[MODE];\r\n      this._whereStateChange({\r\n        onAction:'resetGrid'\r\n      });\r\n\r\n\r\n  }\r\n\r\n  _doOpenModalPost(){\r\n\r\n    this.modal.open('post');\r\n    this._whereStateChange({\r\n      typeAction:'post',\r\n      onAction:'_doOpenModalPost'\r\n    })\r\n\r\n  }\r\n  _doOpenModalUpdate(data){\r\n\r\n    \r\n    this.modal.open('put',data);\r\n    this._whereStateChange({\r\n      typeAction:'put',\r\n      onAction:'_doOpenModalUpdate'\r\n    })\r\n\r\n  }\r\n  /* END HOW*/\r\n\r\n  /* WHEN*/\r\n\r\n  onBtnNew(){\r\n    this._doOpenModalPost();\r\n  }\r\n  \r\n  componentWillReceiveProps(newProps){\r\n    \r\n    if(!this._isData){\r\n        this.model.initData(); \r\n        this._isData = true  ; \r\n    }\r\n\r\n    this.data[MODE] = newProps[MODE]['list'] || [] ;\r\n    Object.assign(this.state,newProps[MODE]['state']);\r\n\r\n\r\n    this.resetGrid();\r\n    \r\n  }\r\n  \r\n\r\n  /* WHERE*/\r\n  _whereStateChange(newState){\r\n    this.setState(Object.assign(this.state,newState));\r\n  }\r\n\r\n\r\n  render(){\r\n\r\n    return(\r\n      <div hidden={  this.props.onTab === this.state.tab ? false : true } style={{padding:10}} >\r\n\r\n          <MyForm\r\n            name={ MODE_NAME }\r\n            modal={this.modal}\r\n            \r\n          />\r\n          <BenGrid\r\n\r\n             height='78vh'\r\n             gridID='id'\r\n              \r\n             formStatus={this.state.status}\r\n             rowSelection='single'  \r\n             onBtnEdit={ this._doOpenModalUpdate }\r\n             onBtnAdd={ this.onBtnNew }\r\n             isRightTool={ true }\r\n\r\n             nextColums={ this.grid.colums }\r\n             rowData={this.grid.rowData}\r\n             model={ this.model }\r\n\r\n             \r\n          />\r\n      </div>\r\n    )\r\n  }\r\n}\r\n\r\nfunction mapStateToProps(state){\r\n  return {\r\n     [MODE]:state[MODE]\r\n  }\r\n}\r\n\r\n\r\nexport default connect(mapStateToProps)(CusLevelPage)"]},"metadata":{},"sourceType":"module"}