{"ast":null,"code":"import _classCallCheck from \"D:\\\\actions\\\\st_frontend\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"D:\\\\actions\\\\st_frontend\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"D:\\\\actions\\\\st_frontend\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"D:\\\\actions\\\\st_frontend\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"D:\\\\actions\\\\st_frontend\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/inherits\";\nvar _jsxFileName = \"D:\\\\actions\\\\st_frontend\\\\src\\\\pages\\\\pages\\\\DemoTicket\\\\Components\\\\RealtimeBox.js\";\nimport socket from '../../../../model/socket';\nimport React, { Component, StyleSheet } from 'react';\nimport { Row, Col } from 'reactstrap';\n\nvar RealtimeBox =\n/*#__PURE__*/\nfunction (_Component) {\n  _inherits(RealtimeBox, _Component);\n\n  function RealtimeBox(props) {\n    var _this;\n\n    _classCallCheck(this, RealtimeBox);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(RealtimeBox).call(this, props));\n    _this.state = {\n      activeTab: '1',\n      tabs: [{\n        icon: 'fa fa-list-alt',\n        code: '1',\n        name: 'Hoạt động'\n      }, {\n        icon: 'fa fa-bell-o',\n        code: '2',\n        name: 'Nhắc việc'\n      }, {\n        icon: 'fa fa-legal',\n        code: '3',\n        name: 'DS Phạt'\n      }],\n      logs: []\n    };\n    return _this;\n  }\n\n  _createClass(RealtimeBox, [{\n    key: \"_onChangeTab\",\n    value: function _onChangeTab(code) {\n      this.setState({\n        activeTab: code\n      });\n    }\n  }, {\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      this._iniSocket();\n    }\n  }, {\n    key: \"_iniSocket\",\n    value: function _iniSocket() {\n      var _this2 = this;\n\n      socket.client.service('coupons').on('logs', function (res) {\n        //const data = res.data;\n        var data = res.data;\n\n        if (data.length > 0) {\n          var logs = Object.assign([], _this2.state.logs);\n          logs.push(data[0]);\n\n          _this2.setState({\n            logs: logs\n          }, function () {\n            var scrollBox = document.getElementById('scroll-box');\n            scrollBox.scrollTop = scrollBox.scrollHeight;\n          });\n        }\n      });\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      return React.createElement(\"div\", {\n        className: \"box-realtime-activity\",\n        style: {\n          position: 'relative',\n          width: '95%',\n          top: 0\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 79\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"nav-tabs-custom\",\n        id: \"task-holder\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 80\n        },\n        __self: this\n      }, React.createElement(\"ul\", {\n        className: \"nav nav-tabs\",\n        style: {\n          borderBottom: '1px solid rgba(0,0,0,0.1)'\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 82\n        },\n        __self: this\n      }, React.createElement(\"li\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 83\n        },\n        __self: this\n      }, React.createElement(\"a\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 84\n        },\n        __self: this\n      }, \"  RealTime logs\"))), React.createElement(\"div\", {\n        id: \"scroll-box\",\n        className: \"slimScrollDiv\",\n        style: {\n          position: 'relative',\n          overflowY: 'auto',\n          width: 'auto',\n          height: '80vh'\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 89\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \" tab-pane chat active \",\n        id: \"chat-box\",\n        style: {\n          marginTop: 14,\n          marginLeft: 7\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 91\n        },\n        __self: this\n      }, this.state.logs.map(function (item) {\n        return React.createElement(\"div\", {\n          className: \"item\",\n          style: {\n            lineHeight: '8px',\n            paddingBottom: 10,\n            paddingTop: 10,\n            borderBottom: '1px solid #f0f0f0'\n          },\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 96\n          },\n          __self: this\n        }, React.createElement(\"div\", {\n          className: \"float-left\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 97\n          },\n          __self: this\n        }, React.createElement(\"label\", {\n          className: \"font-17 text-green\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 98\n          },\n          __self: this\n        }, \"C\\u1ED5ng : \", item.sn), React.createElement(\"span\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 101\n          },\n          __self: this\n        }, \"  @\", item.inoutstatus, \"    \"), React.createElement(\"br\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 102\n          },\n          __self: this\n        }), React.createElement(\"small\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 103\n          },\n          __self: this\n        }, React.createElement(\"i\", {\n          className: \"fa fa-ticket\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 103\n          },\n          __self: this\n        }), \" \", item.cardno), React.createElement(\"small\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 104\n          },\n          __self: this\n        }, \"- \", item.verifytype + ' - ' + item.event + ' - ' + item.eventaddr)), React.createElement(\"div\", {\n          className: \"float-right\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 109\n          },\n          __self: this\n        }, React.createElement(\"small\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 110\n          },\n          __self: this\n        }, item.time.substr(-8))), React.createElement(\"div\", {\n          style: {\n            clear: 'both'\n          },\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 112\n          },\n          __self: this\n        }));\n      })))));\n    }\n  }]);\n\n  return RealtimeBox;\n}(Component);\n\nexport default RealtimeBox;","map":{"version":3,"sources":["D:/actions/st_frontend/src/pages/pages/DemoTicket/Components/RealtimeBox.js"],"names":["socket","React","Component","StyleSheet","Row","Col","RealtimeBox","props","state","activeTab","tabs","icon","code","name","logs","setState","_iniSocket","client","service","on","res","data","length","Object","assign","push","scrollBox","document","getElementById","scrollTop","scrollHeight","position","width","top","borderBottom","overflowY","height","marginTop","marginLeft","map","item","lineHeight","paddingBottom","paddingTop","sn","inoutstatus","cardno","verifytype","event","eventaddr","time","substr","clear"],"mappings":";;;;;;AACA,OAAOA,MAAP,MAAmB,0BAAnB;AACA,OAAOC,KAAP,IAAgBC,SAAhB,EAA2BC,UAA3B,QAA6C,OAA7C;AACA,SAASC,GAAT,EAAcC,GAAd,QAAyB,YAAzB;;IAIMC,W;;;;;AAEJ,uBAAYC,KAAZ,EAAmB;AAAA;;AAAA;;AACjB,qFAAMA,KAAN;AAGA,UAAKC,KAAL,GAAa;AAEXC,MAAAA,SAAS,EAAE,GAFA;AAGXC,MAAAA,IAAI,EAAC,CACH;AACEC,QAAAA,IAAI,EAAC,gBADP;AAEEC,QAAAA,IAAI,EAAC,GAFP;AAGEC,QAAAA,IAAI,EAAC;AAHP,OADG,EAMH;AACEF,QAAAA,IAAI,EAAC,cADP;AAEEC,QAAAA,IAAI,EAAC,GAFP;AAGEC,QAAAA,IAAI,EAAC;AAHP,OANG,EAWH;AACEF,QAAAA,IAAI,EAAC,aADP;AAEEC,QAAAA,IAAI,EAAC,GAFP;AAGEC,QAAAA,IAAI,EAAC;AAHP,OAXG,CAHM;AAoBXC,MAAAA,IAAI,EAAC;AApBM,KAAb;AAJiB;AA4BlB;;;;iCAEYF,I,EAAK;AAChB,WAAKG,QAAL,CAAc;AACZN,QAAAA,SAAS,EAACG;AADE,OAAd;AAID;;;wCAEkB;AACjB,WAAKI,UAAL;AACD;;;iCAEW;AAAA;;AAGVhB,MAAAA,MAAM,CAACiB,MAAP,CAAcC,OAAd,CAAsB,SAAtB,EAAiCC,EAAjC,CAAoC,MAApC,EAA2C,UAACC,GAAD,EAAO;AAChD;AADgD,YAExCC,IAFwC,GAE/BD,GAF+B,CAExCC,IAFwC;;AAGhD,YAAGA,IAAI,CAACC,MAAL,GAAc,CAAjB,EAAoB;AAEhB,cAAIR,IAAI,GAAGS,MAAM,CAACC,MAAP,CAAc,EAAd,EAAiB,MAAI,CAAChB,KAAL,CAAWM,IAA5B,CAAX;AACAA,UAAAA,IAAI,CAACW,IAAL,CAAUJ,IAAI,CAAC,CAAD,CAAd;;AACA,UAAA,MAAI,CAACN,QAAL,CAAc;AAAED,YAAAA,IAAI,EAAJA;AAAF,WAAd,EAAuB,YAAI;AAEzB,gBAAMY,SAAS,GAAGC,QAAQ,CAACC,cAAT,CAAwB,YAAxB,CAAlB;AACAF,YAAAA,SAAS,CAACG,SAAV,GAAsBH,SAAS,CAACI,YAAhC;AAED,WALD;AAOH;AAGF,OAjBD;AAkBD;;;6BAEO;AAIN,aACE;AAAK,QAAA,SAAS,EAAC,uBAAf;AAAuC,QAAA,KAAK,EAAE;AAACC,UAAAA,QAAQ,EAAE,UAAX;AAAuBC,UAAAA,KAAK,EAAE,KAA9B;AAAqCC,UAAAA,GAAG,EAAE;AAA1C,SAA9C;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SACE;AAAK,QAAA,SAAS,EAAC,iBAAf;AAAiC,QAAA,EAAE,EAAC,aAApC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SAEI;AAAI,QAAA,SAAS,EAAC,cAAd;AAA6B,QAAA,KAAK,EAAE;AAAEC,UAAAA,YAAY,EAAC;AAAf,SAApC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SACE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SACE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,2BADF,CADF,CAFJ,EASI;AAAK,QAAA,EAAE,EAAC,YAAR;AAAqB,QAAA,SAAS,EAAC,eAA/B;AAA+C,QAAA,KAAK,EAAE;AAACH,UAAAA,QAAQ,EAAE,UAAX;AAAuBI,UAAAA,SAAS,EAAE,MAAlC;AAA0CH,UAAAA,KAAK,EAAE,MAAjD;AAAyDI,UAAAA,MAAM,EAAE;AAAjE,SAAtD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SAEM;AAAK,QAAA,SAAS,0BAAd;AAA0C,QAAA,EAAE,EAAC,UAA7C;AAAwD,QAAA,KAAK,EAAE;AAAEC,UAAAA,SAAS,EAAC,EAAZ;AAAgBC,UAAAA,UAAU,EAAC;AAA3B,SAA/D;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SAGM,KAAK9B,KAAL,CAAWM,IAAX,CAAgByB,GAAhB,CAAoB,UAACC,IAAD,EAAQ;AAC1B,eACE;AAAK,UAAA,SAAS,EAAC,MAAf;AAAsB,UAAA,KAAK,EAAE;AAAEC,YAAAA,UAAU,EAAC,KAAb;AAAoBC,YAAAA,aAAa,EAAC,EAAlC;AAAsCC,YAAAA,UAAU,EAAC,EAAjD;AAAqDT,YAAAA,YAAY,EAAC;AAAlE,WAA7B;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,WACI;AAAK,UAAA,SAAS,EAAC,YAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,WACA;AAAO,UAAA,SAAS,EAAC,oBAAjB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,2BACaM,IAAI,CAACI,EADlB,CADA,EAIA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBAAWJ,IAAI,CAACK,WAAhB,SAJA,EAKA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,UALA,EAMA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,WAAO;AAAG,UAAA,SAAS,EAAC,cAAb;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,UAAP,OAA0CL,IAAI,CAACM,MAA/C,CANA,EAOA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,iBACMN,IAAI,CAACO,UAAL,GAAgB,KAAhB,GAAuBP,IAAI,CAACQ,KAA5B,GAAoC,KAApC,GAA2CR,IAAI,CAACS,SADtD,CAPA,CADJ,EAaE;AAAK,UAAA,SAAS,EAAC,aAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,WACE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,WAAUT,IAAI,CAACU,IAAL,CAAUC,MAAV,CAAiB,CAAC,CAAlB,CAAV,CADF,CAbF,EAgBE;AAAK,UAAA,KAAK,EAAE;AAAEC,YAAAA,KAAK,EAAC;AAAR,WAAZ;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,UAhBF,CADF;AAoBD,OArBD,CAHN,CAFN,CATJ,CADF,CADF;AAiDD;;;;EAvHuBlD,S;;AA0H1B,eAAeI,WAAf","sourcesContent":["\r\nimport socket from '../../../../model/socket' ;\r\nimport React, { Component, StyleSheet } from 'react';\r\nimport { Row, Col } from 'reactstrap';\r\n\r\n\r\n\r\nclass RealtimeBox extends Component{\r\n\r\n  constructor(props) {\r\n    super(props);\r\n\r\n\r\n    this.state = {\r\n\r\n      activeTab: '1',\r\n      tabs:[\r\n        {\r\n          icon:'fa fa-list-alt',\r\n          code:'1',\r\n          name:'Hoạt động'\r\n        },\r\n        {\r\n          icon:'fa fa-bell-o',\r\n          code:'2',\r\n          name:'Nhắc việc'\r\n        },\r\n        {\r\n          icon:'fa fa-legal',\r\n          code:'3',\r\n          name:'DS Phạt'\r\n        }\r\n      ],\r\n      logs:[]\r\n    };\r\n\r\n\r\n  }\r\n\r\n  _onChangeTab(code){\r\n    this.setState({\r\n      activeTab:code\r\n    });\r\n\r\n  }\r\n\r\n  componentDidMount(){\r\n    this._iniSocket() ;\r\n  }\r\n\r\n  _iniSocket(){\r\n\r\n\r\n    socket.client.service('coupons').on('logs',(res)=>{\r\n      //const data = res.data;\r\n      const { data } = res ;\r\n      if(data.length > 0 ){\r\n\r\n          let logs = Object.assign([],this.state.logs) ;\r\n          logs.push(data[0]) ;\r\n          this.setState({ logs },()=>{\r\n\r\n            const scrollBox = document.getElementById('scroll-box') ;\r\n            scrollBox.scrollTop = scrollBox.scrollHeight;\r\n\r\n          });\r\n\r\n      }\r\n\r\n\r\n    });\r\n  }\r\n\r\n  render(){\r\n\r\n\r\n\r\n    return(\r\n      <div className=\"box-realtime-activity\" style={{position: 'relative', width: '95%', top: 0}}>\r\n        <div className=\"nav-tabs-custom\" id=\"task-holder\">\r\n\r\n            <ul className=\"nav nav-tabs\" style={{ borderBottom:'1px solid rgba(0,0,0,0.1)'}}>\r\n              <li>\r\n                <a>  RealTime logs</a>\r\n              </li>\r\n\r\n            </ul>\r\n\r\n            <div id=\"scroll-box\" className=\"slimScrollDiv\" style={{position: 'relative', overflowY: 'auto', width: 'auto', height: '80vh',}}>\r\n\r\n                  <div className={` tab-pane chat active `} id=\"chat-box\" style={{ marginTop:14, marginLeft:7}}>\r\n\r\n                      {\r\n                        this.state.logs.map((item)=>{\r\n                          return (\r\n                            <div className=\"item\" style={{ lineHeight:'8px', paddingBottom:10, paddingTop:10, borderBottom:'1px solid #f0f0f0'}}>\r\n                                <div className=\"float-left\">\r\n                                <label className=\"font-17 text-green\">\r\n                                    Cổng : { item.sn}\r\n                                </label>\r\n                                <span>  @{ item.inoutstatus }    </span>\r\n                                <br />\r\n                                <small><i className=\"fa fa-ticket\"></i> { item.cardno }</small>\r\n                                <small>\r\n                                  - { item.verifytype+' - '+ item.event + ' - '+ item.eventaddr }\r\n                                </small>\r\n\r\n                              </div>\r\n                              <div className=\"float-right\">\r\n                                <small>{  item.time.substr(-8) }</small>\r\n                              </div>\r\n                              <div style={{ clear:'both'}}></div>\r\n                            </div>\r\n                          )\r\n                        })\r\n                      }\r\n                  </div>\r\n\r\n\r\n            </div>\r\n\r\n\r\n        </div>\r\n\r\n      </div>\r\n    )\r\n  }\r\n}\r\n\r\nexport default RealtimeBox ;\r\n"]},"metadata":{},"sourceType":"module"}